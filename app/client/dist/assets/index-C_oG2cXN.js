(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))n(d);new MutationObserver(d=>{for(const m of d)if(m.type==="childList")for(const x of m.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&n(x)}).observe(document,{childList:!0,subtree:!0});function r(d){const m={};return d.integrity&&(m.integrity=d.integrity),d.referrerPolicy&&(m.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?m.credentials="include":d.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function n(d){if(d.ep)return;d.ep=!0;const m=r(d);fetch(d.href,m)}})();function Vh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ba={exports:{}},Is={},ka={exports:{}},ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Di=Symbol.for("react.element"),Kh=Symbol.for("react.portal"),qh=Symbol.for("react.fragment"),Gh=Symbol.for("react.strict_mode"),Xh=Symbol.for("react.profiler"),Yh=Symbol.for("react.provider"),Qh=Symbol.for("react.context"),Jh=Symbol.for("react.forward_ref"),Zh=Symbol.for("react.suspense"),eu=Symbol.for("react.memo"),tu=Symbol.for("react.lazy"),gl=Symbol.iterator;function ru(e){return e===null||typeof e!="object"?null:(e=gl&&e[gl]||e["@@iterator"],typeof e=="function"?e:null)}var Ra={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Da=Object.assign,Ma={};function zr(e,t,r){this.props=e,this.context=t,this.refs=Ma,this.updater=r||Ra}zr.prototype.isReactComponent={};zr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};zr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Aa(){}Aa.prototype=zr.prototype;function yo(e,t,r){this.props=e,this.context=t,this.refs=Ma,this.updater=r||Ra}var Co=yo.prototype=new Aa;Co.constructor=yo;Da(Co,zr.prototype);Co.isPureReactComponent=!0;var ml=Array.isArray,Ta=Object.prototype.hasOwnProperty,wo={current:null},Pa={key:!0,ref:!0,__self:!0,__source:!0};function Ba(e,t,r){var n,d={},m=null,x=null;if(t!=null)for(n in t.ref!==void 0&&(x=t.ref),t.key!==void 0&&(m=""+t.key),t)Ta.call(t,n)&&!Pa.hasOwnProperty(n)&&(d[n]=t[n]);var i=arguments.length-2;if(i===1)d.children=r;else if(1<i){for(var c=Array(i),u=0;u<i;u++)c[u]=arguments[u+2];d.children=c}if(e&&e.defaultProps)for(n in i=e.defaultProps,i)d[n]===void 0&&(d[n]=i[n]);return{$$typeof:Di,type:e,key:m,ref:x,props:d,_owner:wo.current}}function iu(e,t){return{$$typeof:Di,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Eo(e){return typeof e=="object"&&e!==null&&e.$$typeof===Di}function su(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Sl=/\/+/g;function Zs(e,t){return typeof e=="object"&&e!==null&&e.key!=null?su(""+e.key):t.toString(36)}function es(e,t,r,n,d){var m=typeof e;(m==="undefined"||m==="boolean")&&(e=null);var x=!1;if(e===null)x=!0;else switch(m){case"string":case"number":x=!0;break;case"object":switch(e.$$typeof){case Di:case Kh:x=!0}}if(x)return x=e,d=d(x),e=n===""?"."+Zs(x,0):n,ml(d)?(r="",e!=null&&(r=e.replace(Sl,"$&/")+"/"),es(d,t,r,"",function(u){return u})):d!=null&&(Eo(d)&&(d=iu(d,r+(!d.key||x&&x.key===d.key?"":(""+d.key).replace(Sl,"$&/")+"/")+e)),t.push(d)),1;if(x=0,n=n===""?".":n+":",ml(e))for(var i=0;i<e.length;i++){m=e[i];var c=n+Zs(m,i);x+=es(m,t,r,c,d)}else if(c=ru(e),typeof c=="function")for(e=c.call(e),i=0;!(m=e.next()).done;)m=m.value,c=n+Zs(m,i++),x+=es(m,t,r,c,d);else if(m==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return x}function Fi(e,t,r){if(e==null)return e;var n=[],d=0;return es(e,n,"","",function(m){return t.call(r,m,d++)}),n}function nu(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var $e={current:null},ts={transition:null},ou={ReactCurrentDispatcher:$e,ReactCurrentBatchConfig:ts,ReactCurrentOwner:wo};function Oa(){throw Error("act(...) is not supported in production builds of React.")}ie.Children={map:Fi,forEach:function(e,t,r){Fi(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Fi(e,function(){t++}),t},toArray:function(e){return Fi(e,function(t){return t})||[]},only:function(e){if(!Eo(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ie.Component=zr;ie.Fragment=qh;ie.Profiler=Xh;ie.PureComponent=yo;ie.StrictMode=Gh;ie.Suspense=Zh;ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ou;ie.act=Oa;ie.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Da({},e.props),d=e.key,m=e.ref,x=e._owner;if(t!=null){if(t.ref!==void 0&&(m=t.ref,x=wo.current),t.key!==void 0&&(d=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(c in t)Ta.call(t,c)&&!Pa.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&i!==void 0?i[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){i=Array(c);for(var u=0;u<c;u++)i[u]=arguments[u+2];n.children=i}return{$$typeof:Di,type:e.type,key:d,ref:m,props:n,_owner:x}};ie.createContext=function(e){return e={$$typeof:Qh,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Yh,_context:e},e.Consumer=e};ie.createElement=Ba;ie.createFactory=function(e){var t=Ba.bind(null,e);return t.type=e,t};ie.createRef=function(){return{current:null}};ie.forwardRef=function(e){return{$$typeof:Jh,render:e}};ie.isValidElement=Eo;ie.lazy=function(e){return{$$typeof:tu,_payload:{_status:-1,_result:e},_init:nu}};ie.memo=function(e,t){return{$$typeof:eu,type:e,compare:t===void 0?null:t}};ie.startTransition=function(e){var t=ts.transition;ts.transition={};try{e()}finally{ts.transition=t}};ie.unstable_act=Oa;ie.useCallback=function(e,t){return $e.current.useCallback(e,t)};ie.useContext=function(e){return $e.current.useContext(e)};ie.useDebugValue=function(){};ie.useDeferredValue=function(e){return $e.current.useDeferredValue(e)};ie.useEffect=function(e,t){return $e.current.useEffect(e,t)};ie.useId=function(){return $e.current.useId()};ie.useImperativeHandle=function(e,t,r){return $e.current.useImperativeHandle(e,t,r)};ie.useInsertionEffect=function(e,t){return $e.current.useInsertionEffect(e,t)};ie.useLayoutEffect=function(e,t){return $e.current.useLayoutEffect(e,t)};ie.useMemo=function(e,t){return $e.current.useMemo(e,t)};ie.useReducer=function(e,t,r){return $e.current.useReducer(e,t,r)};ie.useRef=function(e){return $e.current.useRef(e)};ie.useState=function(e){return $e.current.useState(e)};ie.useSyncExternalStore=function(e,t,r){return $e.current.useSyncExternalStore(e,t,r)};ie.useTransition=function(){return $e.current.useTransition()};ie.version="18.3.1";ka.exports=ie;var oe=ka.exports;const lu=Vh(oe);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var au=oe,cu=Symbol.for("react.element"),hu=Symbol.for("react.fragment"),uu=Object.prototype.hasOwnProperty,du=au.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fu={key:!0,ref:!0,__self:!0,__source:!0};function Ia(e,t,r){var n,d={},m=null,x=null;r!==void 0&&(m=""+r),t.key!==void 0&&(m=""+t.key),t.ref!==void 0&&(x=t.ref);for(n in t)uu.call(t,n)&&!fu.hasOwnProperty(n)&&(d[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)d[n]===void 0&&(d[n]=t[n]);return{$$typeof:cu,type:e,key:m,ref:x,props:d,_owner:du.current}}Is.Fragment=hu;Is.jsx=Ia;Is.jsxs=Ia;ba.exports=Is;var Q=ba.exports,bn={},Fa={exports:{}},et={},Ha={exports:{}},Na={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(k,A){var P=k.length;k.push(A);e:for(;0<P;){var O=P-1>>>1,$=k[O];if(0<d($,A))k[O]=A,k[P]=$,P=O;else break e}}function r(k){return k.length===0?null:k[0]}function n(k){if(k.length===0)return null;var A=k[0],P=k.pop();if(P!==A){k[0]=P;e:for(var O=0,$=k.length,W=$>>>1;O<W;){var j=2*(O+1)-1,K=k[j],Y=j+1,D=k[Y];if(0>d(K,P))Y<$&&0>d(D,K)?(k[O]=D,k[Y]=P,O=Y):(k[O]=K,k[j]=P,O=j);else if(Y<$&&0>d(D,P))k[O]=D,k[Y]=P,O=Y;else break e}}return A}function d(k,A){var P=k.sortIndex-A.sortIndex;return P!==0?P:k.id-A.id}if(typeof performance=="object"&&typeof performance.now=="function"){var m=performance;e.unstable_now=function(){return m.now()}}else{var x=Date,i=x.now();e.unstable_now=function(){return x.now()-i}}var c=[],u=[],v=1,h=null,_=3,E=!1,C=!1,f=!1,s=typeof setTimeout=="function"?setTimeout:null,l=typeof clearTimeout=="function"?clearTimeout:null,o=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function a(k){for(var A=r(u);A!==null;){if(A.callback===null)n(u);else if(A.startTime<=k)n(u),A.sortIndex=A.expirationTime,t(c,A);else break;A=r(u)}}function p(k){if(f=!1,a(k),!C)if(r(c)!==null)C=!0,H(S);else{var A=r(u);A!==null&&I(p,A.startTime-k)}}function S(k,A){C=!1,f&&(f=!1,l(g),g=-1),E=!0;var P=_;try{for(a(A),h=r(c);h!==null&&(!(h.expirationTime>A)||k&&!M());){var O=h.callback;if(typeof O=="function"){h.callback=null,_=h.priorityLevel;var $=O(h.expirationTime<=A);A=e.unstable_now(),typeof $=="function"?h.callback=$:h===r(c)&&n(c),a(A)}else n(c);h=r(c)}if(h!==null)var W=!0;else{var j=r(u);j!==null&&I(p,j.startTime-A),W=!1}return W}finally{h=null,_=P,E=!1}}var y=!1,L=null,g=-1,w=5,b=-1;function M(){return!(e.unstable_now()-b<w)}function R(){if(L!==null){var k=e.unstable_now();b=k;var A=!0;try{A=L(!0,k)}finally{A?T():(y=!1,L=null)}}else y=!1}var T;if(typeof o=="function")T=function(){o(R)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,F=B.port2;B.port1.onmessage=R,T=function(){F.postMessage(null)}}else T=function(){s(R,0)};function H(k){L=k,y||(y=!0,T())}function I(k,A){g=s(function(){k(e.unstable_now())},A)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(k){k.callback=null},e.unstable_continueExecution=function(){C||E||(C=!0,H(S))},e.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<k?Math.floor(1e3/k):5},e.unstable_getCurrentPriorityLevel=function(){return _},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(k){switch(_){case 1:case 2:case 3:var A=3;break;default:A=_}var P=_;_=A;try{return k()}finally{_=P}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(k,A){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var P=_;_=k;try{return A()}finally{_=P}},e.unstable_scheduleCallback=function(k,A,P){var O=e.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?O+P:O):P=O,k){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=P+$,k={id:v++,callback:A,priorityLevel:k,startTime:P,expirationTime:$,sortIndex:-1},P>O?(k.sortIndex=P,t(u,k),r(c)===null&&k===r(u)&&(f?(l(g),g=-1):f=!0,I(p,P-O))):(k.sortIndex=$,t(c,k),C||E||(C=!0,H(S))),k},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(k){var A=_;return function(){var P=_;_=A;try{return k.apply(this,arguments)}finally{_=P}}}})(Na);Ha.exports=Na;var _u=Ha.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pu=oe,Ze=_u;function V(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $a=new Set,di={};function dr(e,t){Br(e,t),Br(e+"Capture",t)}function Br(e,t){for(di[e]=t,e=0;e<t.length;e++)$a.add(t[e])}var Dt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kn=Object.prototype.hasOwnProperty,vu=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yl={},Cl={};function gu(e){return kn.call(Cl,e)?!0:kn.call(yl,e)?!1:vu.test(e)?Cl[e]=!0:(yl[e]=!0,!1)}function mu(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Su(e,t,r,n){if(t===null||typeof t>"u"||mu(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ze(e,t,r,n,d,m,x){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=d,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=m,this.removeEmptyString=x}var Pe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Pe[e]=new ze(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Pe[t]=new ze(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Pe[e]=new ze(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Pe[e]=new ze(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Pe[e]=new ze(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Pe[e]=new ze(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Pe[e]=new ze(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Pe[e]=new ze(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Pe[e]=new ze(e,5,!1,e.toLowerCase(),null,!1,!1)});var xo=/[\-:]([a-z])/g;function Lo(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(xo,Lo);Pe[t]=new ze(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(xo,Lo);Pe[t]=new ze(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(xo,Lo);Pe[t]=new ze(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Pe[e]=new ze(e,1,!1,e.toLowerCase(),null,!1,!1)});Pe.xlinkHref=new ze("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Pe[e]=new ze(e,1,!1,e.toLowerCase(),null,!0,!0)});function bo(e,t,r,n){var d=Pe.hasOwnProperty(t)?Pe[t]:null;(d!==null?d.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Su(t,r,d,n)&&(r=null),n||d===null?gu(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):d.mustUseProperty?e[d.propertyName]=r===null?d.type===3?!1:"":r:(t=d.attributeName,n=d.attributeNamespace,r===null?e.removeAttribute(t):(d=d.type,r=d===3||d===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Pt=pu.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Hi=Symbol.for("react.element"),vr=Symbol.for("react.portal"),gr=Symbol.for("react.fragment"),ko=Symbol.for("react.strict_mode"),Rn=Symbol.for("react.profiler"),za=Symbol.for("react.provider"),Ua=Symbol.for("react.context"),Ro=Symbol.for("react.forward_ref"),Dn=Symbol.for("react.suspense"),Mn=Symbol.for("react.suspense_list"),Do=Symbol.for("react.memo"),Ot=Symbol.for("react.lazy"),Wa=Symbol.for("react.offscreen"),wl=Symbol.iterator;function Vr(e){return e===null||typeof e!="object"?null:(e=wl&&e[wl]||e["@@iterator"],typeof e=="function"?e:null)}var Se=Object.assign,en;function Zr(e){if(en===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);en=t&&t[1]||""}return`
`+en+e}var tn=!1;function rn(e,t){if(!e||tn)return"";tn=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var d=u.stack.split(`
`),m=n.stack.split(`
`),x=d.length-1,i=m.length-1;1<=x&&0<=i&&d[x]!==m[i];)i--;for(;1<=x&&0<=i;x--,i--)if(d[x]!==m[i]){if(x!==1||i!==1)do if(x--,i--,0>i||d[x]!==m[i]){var c=`
`+d[x].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=x&&0<=i);break}}}finally{tn=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Zr(e):""}function yu(e){switch(e.tag){case 5:return Zr(e.type);case 16:return Zr("Lazy");case 13:return Zr("Suspense");case 19:return Zr("SuspenseList");case 0:case 2:case 15:return e=rn(e.type,!1),e;case 11:return e=rn(e.type.render,!1),e;case 1:return e=rn(e.type,!0),e;default:return""}}function An(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case gr:return"Fragment";case vr:return"Portal";case Rn:return"Profiler";case ko:return"StrictMode";case Dn:return"Suspense";case Mn:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ua:return(e.displayName||"Context")+".Consumer";case za:return(e._context.displayName||"Context")+".Provider";case Ro:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Do:return t=e.displayName||null,t!==null?t:An(e.type)||"Memo";case Ot:t=e._payload,e=e._init;try{return An(e(t))}catch{}}return null}function Cu(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return An(t);case 8:return t===ko?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Xt(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ja(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function wu(e){var t=ja(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var d=r.get,m=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return d.call(this)},set:function(x){n=""+x,m.call(this,x)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(x){n=""+x},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ni(e){e._valueTracker||(e._valueTracker=wu(e))}function Va(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=ja(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function ds(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Tn(e,t){var r=t.checked;return Se({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function El(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Xt(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Ka(e,t){t=t.checked,t!=null&&bo(e,"checked",t,!1)}function Pn(e,t){Ka(e,t);var r=Xt(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Bn(e,t.type,r):t.hasOwnProperty("defaultValue")&&Bn(e,t.type,Xt(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function xl(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Bn(e,t,r){(t!=="number"||ds(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var ei=Array.isArray;function Rr(e,t,r,n){if(e=e.options,t){t={};for(var d=0;d<r.length;d++)t["$"+r[d]]=!0;for(r=0;r<e.length;r++)d=t.hasOwnProperty("$"+e[r].value),e[r].selected!==d&&(e[r].selected=d),d&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Xt(r),t=null,d=0;d<e.length;d++){if(e[d].value===r){e[d].selected=!0,n&&(e[d].defaultSelected=!0);return}t!==null||e[d].disabled||(t=e[d])}t!==null&&(t.selected=!0)}}function On(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(V(91));return Se({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ll(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(V(92));if(ei(r)){if(1<r.length)throw Error(V(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Xt(r)}}function qa(e,t){var r=Xt(t.value),n=Xt(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function bl(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Ga(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function In(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Ga(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var $i,Xa=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,d){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,d)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for($i=$i||document.createElement("div"),$i.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=$i.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function fi(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var ii={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Eu=["Webkit","ms","Moz","O"];Object.keys(ii).forEach(function(e){Eu.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ii[t]=ii[e]})});function Ya(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||ii.hasOwnProperty(e)&&ii[e]?(""+t).trim():t+"px"}function Qa(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,d=Ya(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,d):e[r]=d}}var xu=Se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Fn(e,t){if(t){if(xu[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(V(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(V(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(V(61))}if(t.style!=null&&typeof t.style!="object")throw Error(V(62))}}function Hn(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nn=null;function Mo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var $n=null,Dr=null,Mr=null;function kl(e){if(e=Ti(e)){if(typeof $n!="function")throw Error(V(280));var t=e.stateNode;t&&(t=zs(t),$n(e.stateNode,e.type,t))}}function Ja(e){Dr?Mr?Mr.push(e):Mr=[e]:Dr=e}function Za(){if(Dr){var e=Dr,t=Mr;if(Mr=Dr=null,kl(e),t)for(e=0;e<t.length;e++)kl(t[e])}}function ec(e,t){return e(t)}function tc(){}var sn=!1;function rc(e,t,r){if(sn)return e(t,r);sn=!0;try{return ec(e,t,r)}finally{sn=!1,(Dr!==null||Mr!==null)&&(tc(),Za())}}function _i(e,t){var r=e.stateNode;if(r===null)return null;var n=zs(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(V(231,t,typeof r));return r}var zn=!1;if(Dt)try{var Kr={};Object.defineProperty(Kr,"passive",{get:function(){zn=!0}}),window.addEventListener("test",Kr,Kr),window.removeEventListener("test",Kr,Kr)}catch{zn=!1}function Lu(e,t,r,n,d,m,x,i,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(v){this.onError(v)}}var si=!1,fs=null,_s=!1,Un=null,bu={onError:function(e){si=!0,fs=e}};function ku(e,t,r,n,d,m,x,i,c){si=!1,fs=null,Lu.apply(bu,arguments)}function Ru(e,t,r,n,d,m,x,i,c){if(ku.apply(this,arguments),si){if(si){var u=fs;si=!1,fs=null}else throw Error(V(198));_s||(_s=!0,Un=u)}}function fr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function ic(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Rl(e){if(fr(e)!==e)throw Error(V(188))}function Du(e){var t=e.alternate;if(!t){if(t=fr(e),t===null)throw Error(V(188));return t!==e?null:e}for(var r=e,n=t;;){var d=r.return;if(d===null)break;var m=d.alternate;if(m===null){if(n=d.return,n!==null){r=n;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===r)return Rl(d),e;if(m===n)return Rl(d),t;m=m.sibling}throw Error(V(188))}if(r.return!==n.return)r=d,n=m;else{for(var x=!1,i=d.child;i;){if(i===r){x=!0,r=d,n=m;break}if(i===n){x=!0,n=d,r=m;break}i=i.sibling}if(!x){for(i=m.child;i;){if(i===r){x=!0,r=m,n=d;break}if(i===n){x=!0,n=m,r=d;break}i=i.sibling}if(!x)throw Error(V(189))}}if(r.alternate!==n)throw Error(V(190))}if(r.tag!==3)throw Error(V(188));return r.stateNode.current===r?e:t}function sc(e){return e=Du(e),e!==null?nc(e):null}function nc(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=nc(e);if(t!==null)return t;e=e.sibling}return null}var oc=Ze.unstable_scheduleCallback,Dl=Ze.unstable_cancelCallback,Mu=Ze.unstable_shouldYield,Au=Ze.unstable_requestPaint,Ee=Ze.unstable_now,Tu=Ze.unstable_getCurrentPriorityLevel,Ao=Ze.unstable_ImmediatePriority,lc=Ze.unstable_UserBlockingPriority,ps=Ze.unstable_NormalPriority,Pu=Ze.unstable_LowPriority,ac=Ze.unstable_IdlePriority,Fs=null,Ct=null;function Bu(e){if(Ct&&typeof Ct.onCommitFiberRoot=="function")try{Ct.onCommitFiberRoot(Fs,e,void 0,(e.current.flags&128)===128)}catch{}}var _t=Math.clz32?Math.clz32:Fu,Ou=Math.log,Iu=Math.LN2;function Fu(e){return e>>>=0,e===0?32:31-(Ou(e)/Iu|0)|0}var zi=64,Ui=4194304;function ti(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function vs(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,d=e.suspendedLanes,m=e.pingedLanes,x=r&268435455;if(x!==0){var i=x&~d;i!==0?n=ti(i):(m&=x,m!==0&&(n=ti(m)))}else x=r&~d,x!==0?n=ti(x):m!==0&&(n=ti(m));if(n===0)return 0;if(t!==0&&t!==n&&!(t&d)&&(d=n&-n,m=t&-t,d>=m||d===16&&(m&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-_t(t),d=1<<r,n|=e[r],t&=~d;return n}function Hu(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nu(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,d=e.expirationTimes,m=e.pendingLanes;0<m;){var x=31-_t(m),i=1<<x,c=d[x];c===-1?(!(i&r)||i&n)&&(d[x]=Hu(i,t)):c<=t&&(e.expiredLanes|=i),m&=~i}}function Wn(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function cc(){var e=zi;return zi<<=1,!(zi&4194240)&&(zi=64),e}function nn(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Mi(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-_t(t),e[t]=r}function $u(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var d=31-_t(r),m=1<<d;t[d]=0,n[d]=-1,e[d]=-1,r&=~m}}function To(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-_t(r),d=1<<n;d&t|e[n]&t&&(e[n]|=t),r&=~d}}var he=0;function hc(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var uc,Po,dc,fc,_c,jn=!1,Wi=[],zt=null,Ut=null,Wt=null,pi=new Map,vi=new Map,Ft=[],zu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ml(e,t){switch(e){case"focusin":case"focusout":zt=null;break;case"dragenter":case"dragleave":Ut=null;break;case"mouseover":case"mouseout":Wt=null;break;case"pointerover":case"pointerout":pi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":vi.delete(t.pointerId)}}function qr(e,t,r,n,d,m){return e===null||e.nativeEvent!==m?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:m,targetContainers:[d]},t!==null&&(t=Ti(t),t!==null&&Po(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,d!==null&&t.indexOf(d)===-1&&t.push(d),e)}function Uu(e,t,r,n,d){switch(t){case"focusin":return zt=qr(zt,e,t,r,n,d),!0;case"dragenter":return Ut=qr(Ut,e,t,r,n,d),!0;case"mouseover":return Wt=qr(Wt,e,t,r,n,d),!0;case"pointerover":var m=d.pointerId;return pi.set(m,qr(pi.get(m)||null,e,t,r,n,d)),!0;case"gotpointercapture":return m=d.pointerId,vi.set(m,qr(vi.get(m)||null,e,t,r,n,d)),!0}return!1}function pc(e){var t=rr(e.target);if(t!==null){var r=fr(t);if(r!==null){if(t=r.tag,t===13){if(t=ic(r),t!==null){e.blockedOn=t,_c(e.priority,function(){dc(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function rs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Vn(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Nn=n,r.target.dispatchEvent(n),Nn=null}else return t=Ti(r),t!==null&&Po(t),e.blockedOn=r,!1;t.shift()}return!0}function Al(e,t,r){rs(e)&&r.delete(t)}function Wu(){jn=!1,zt!==null&&rs(zt)&&(zt=null),Ut!==null&&rs(Ut)&&(Ut=null),Wt!==null&&rs(Wt)&&(Wt=null),pi.forEach(Al),vi.forEach(Al)}function Gr(e,t){e.blockedOn===t&&(e.blockedOn=null,jn||(jn=!0,Ze.unstable_scheduleCallback(Ze.unstable_NormalPriority,Wu)))}function gi(e){function t(d){return Gr(d,e)}if(0<Wi.length){Gr(Wi[0],e);for(var r=1;r<Wi.length;r++){var n=Wi[r];n.blockedOn===e&&(n.blockedOn=null)}}for(zt!==null&&Gr(zt,e),Ut!==null&&Gr(Ut,e),Wt!==null&&Gr(Wt,e),pi.forEach(t),vi.forEach(t),r=0;r<Ft.length;r++)n=Ft[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Ft.length&&(r=Ft[0],r.blockedOn===null);)pc(r),r.blockedOn===null&&Ft.shift()}var Ar=Pt.ReactCurrentBatchConfig,gs=!0;function ju(e,t,r,n){var d=he,m=Ar.transition;Ar.transition=null;try{he=1,Bo(e,t,r,n)}finally{he=d,Ar.transition=m}}function Vu(e,t,r,n){var d=he,m=Ar.transition;Ar.transition=null;try{he=4,Bo(e,t,r,n)}finally{he=d,Ar.transition=m}}function Bo(e,t,r,n){if(gs){var d=Vn(e,t,r,n);if(d===null)pn(e,t,n,ms,r),Ml(e,n);else if(Uu(d,e,t,r,n))n.stopPropagation();else if(Ml(e,n),t&4&&-1<zu.indexOf(e)){for(;d!==null;){var m=Ti(d);if(m!==null&&uc(m),m=Vn(e,t,r,n),m===null&&pn(e,t,n,ms,r),m===d)break;d=m}d!==null&&n.stopPropagation()}else pn(e,t,n,null,r)}}var ms=null;function Vn(e,t,r,n){if(ms=null,e=Mo(n),e=rr(e),e!==null)if(t=fr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=ic(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ms=e,null}function vc(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Tu()){case Ao:return 1;case lc:return 4;case ps:case Pu:return 16;case ac:return 536870912;default:return 16}default:return 16}}var Nt=null,Oo=null,is=null;function gc(){if(is)return is;var e,t=Oo,r=t.length,n,d="value"in Nt?Nt.value:Nt.textContent,m=d.length;for(e=0;e<r&&t[e]===d[e];e++);var x=r-e;for(n=1;n<=x&&t[r-n]===d[m-n];n++);return is=d.slice(e,1<n?1-n:void 0)}function ss(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ji(){return!0}function Tl(){return!1}function tt(e){function t(r,n,d,m,x){this._reactName=r,this._targetInst=d,this.type=n,this.nativeEvent=m,this.target=x,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(r=e[i],this[i]=r?r(m):m[i]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ji:Tl,this.isPropagationStopped=Tl,this}return Se(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ji)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ji)},persist:function(){},isPersistent:ji}),t}var Ur={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Io=tt(Ur),Ai=Se({},Ur,{view:0,detail:0}),Ku=tt(Ai),on,ln,Xr,Hs=Se({},Ai,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Xr&&(Xr&&e.type==="mousemove"?(on=e.screenX-Xr.screenX,ln=e.screenY-Xr.screenY):ln=on=0,Xr=e),on)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),Pl=tt(Hs),qu=Se({},Hs,{dataTransfer:0}),Gu=tt(qu),Xu=Se({},Ai,{relatedTarget:0}),an=tt(Xu),Yu=Se({},Ur,{animationName:0,elapsedTime:0,pseudoElement:0}),Qu=tt(Yu),Ju=Se({},Ur,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Zu=tt(Ju),ed=Se({},Ur,{data:0}),Bl=tt(ed),td={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},id={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sd(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=id[e])?!!t[e]:!1}function Fo(){return sd}var nd=Se({},Ai,{key:function(e){if(e.key){var t=td[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ss(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?rd[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fo,charCode:function(e){return e.type==="keypress"?ss(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ss(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),od=tt(nd),ld=Se({},Hs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ol=tt(ld),ad=Se({},Ai,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fo}),cd=tt(ad),hd=Se({},Ur,{propertyName:0,elapsedTime:0,pseudoElement:0}),ud=tt(hd),dd=Se({},Hs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),fd=tt(dd),_d=[9,13,27,32],Ho=Dt&&"CompositionEvent"in window,ni=null;Dt&&"documentMode"in document&&(ni=document.documentMode);var pd=Dt&&"TextEvent"in window&&!ni,mc=Dt&&(!Ho||ni&&8<ni&&11>=ni),Il=" ",Fl=!1;function Sc(e,t){switch(e){case"keyup":return _d.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var mr=!1;function vd(e,t){switch(e){case"compositionend":return yc(t);case"keypress":return t.which!==32?null:(Fl=!0,Il);case"textInput":return e=t.data,e===Il&&Fl?null:e;default:return null}}function gd(e,t){if(mr)return e==="compositionend"||!Ho&&Sc(e,t)?(e=gc(),is=Oo=Nt=null,mr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return mc&&t.locale!=="ko"?null:t.data;default:return null}}var md={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!md[e.type]:t==="textarea"}function Cc(e,t,r,n){Ja(n),t=Ss(t,"onChange"),0<t.length&&(r=new Io("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var oi=null,mi=null;function Sd(e){Tc(e,0)}function Ns(e){var t=Cr(e);if(Va(t))return e}function yd(e,t){if(e==="change")return t}var wc=!1;if(Dt){var cn;if(Dt){var hn="oninput"in document;if(!hn){var Nl=document.createElement("div");Nl.setAttribute("oninput","return;"),hn=typeof Nl.oninput=="function"}cn=hn}else cn=!1;wc=cn&&(!document.documentMode||9<document.documentMode)}function $l(){oi&&(oi.detachEvent("onpropertychange",Ec),mi=oi=null)}function Ec(e){if(e.propertyName==="value"&&Ns(mi)){var t=[];Cc(t,mi,e,Mo(e)),rc(Sd,t)}}function Cd(e,t,r){e==="focusin"?($l(),oi=t,mi=r,oi.attachEvent("onpropertychange",Ec)):e==="focusout"&&$l()}function wd(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ns(mi)}function Ed(e,t){if(e==="click")return Ns(t)}function xd(e,t){if(e==="input"||e==="change")return Ns(t)}function Ld(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var vt=typeof Object.is=="function"?Object.is:Ld;function Si(e,t){if(vt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var d=r[n];if(!kn.call(t,d)||!vt(e[d],t[d]))return!1}return!0}function zl(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ul(e,t){var r=zl(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=zl(r)}}function xc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?xc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Lc(){for(var e=window,t=ds();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=ds(e.document)}return t}function No(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function bd(e){var t=Lc(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&xc(r.ownerDocument.documentElement,r)){if(n!==null&&No(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var d=r.textContent.length,m=Math.min(n.start,d);n=n.end===void 0?m:Math.min(n.end,d),!e.extend&&m>n&&(d=n,n=m,m=d),d=Ul(r,m);var x=Ul(r,n);d&&x&&(e.rangeCount!==1||e.anchorNode!==d.node||e.anchorOffset!==d.offset||e.focusNode!==x.node||e.focusOffset!==x.offset)&&(t=t.createRange(),t.setStart(d.node,d.offset),e.removeAllRanges(),m>n?(e.addRange(t),e.extend(x.node,x.offset)):(t.setEnd(x.node,x.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var kd=Dt&&"documentMode"in document&&11>=document.documentMode,Sr=null,Kn=null,li=null,qn=!1;function Wl(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;qn||Sr==null||Sr!==ds(n)||(n=Sr,"selectionStart"in n&&No(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),li&&Si(li,n)||(li=n,n=Ss(Kn,"onSelect"),0<n.length&&(t=new Io("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Sr)))}function Vi(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var yr={animationend:Vi("Animation","AnimationEnd"),animationiteration:Vi("Animation","AnimationIteration"),animationstart:Vi("Animation","AnimationStart"),transitionend:Vi("Transition","TransitionEnd")},un={},bc={};Dt&&(bc=document.createElement("div").style,"AnimationEvent"in window||(delete yr.animationend.animation,delete yr.animationiteration.animation,delete yr.animationstart.animation),"TransitionEvent"in window||delete yr.transitionend.transition);function $s(e){if(un[e])return un[e];if(!yr[e])return e;var t=yr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in bc)return un[e]=t[r];return e}var kc=$s("animationend"),Rc=$s("animationiteration"),Dc=$s("animationstart"),Mc=$s("transitionend"),Ac=new Map,jl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qt(e,t){Ac.set(e,t),dr(t,[e])}for(var dn=0;dn<jl.length;dn++){var fn=jl[dn],Rd=fn.toLowerCase(),Dd=fn[0].toUpperCase()+fn.slice(1);Qt(Rd,"on"+Dd)}Qt(kc,"onAnimationEnd");Qt(Rc,"onAnimationIteration");Qt(Dc,"onAnimationStart");Qt("dblclick","onDoubleClick");Qt("focusin","onFocus");Qt("focusout","onBlur");Qt(Mc,"onTransitionEnd");Br("onMouseEnter",["mouseout","mouseover"]);Br("onMouseLeave",["mouseout","mouseover"]);Br("onPointerEnter",["pointerout","pointerover"]);Br("onPointerLeave",["pointerout","pointerover"]);dr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));dr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));dr("onBeforeInput",["compositionend","keypress","textInput","paste"]);dr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));dr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));dr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ri="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Md=new Set("cancel close invalid load scroll toggle".split(" ").concat(ri));function Vl(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Ru(n,t,void 0,e),e.currentTarget=null}function Tc(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],d=n.event;n=n.listeners;e:{var m=void 0;if(t)for(var x=n.length-1;0<=x;x--){var i=n[x],c=i.instance,u=i.currentTarget;if(i=i.listener,c!==m&&d.isPropagationStopped())break e;Vl(d,i,u),m=c}else for(x=0;x<n.length;x++){if(i=n[x],c=i.instance,u=i.currentTarget,i=i.listener,c!==m&&d.isPropagationStopped())break e;Vl(d,i,u),m=c}}}if(_s)throw e=Un,_s=!1,Un=null,e}function _e(e,t){var r=t[Jn];r===void 0&&(r=t[Jn]=new Set);var n=e+"__bubble";r.has(n)||(Pc(t,e,2,!1),r.add(n))}function _n(e,t,r){var n=0;t&&(n|=4),Pc(r,e,n,t)}var Ki="_reactListening"+Math.random().toString(36).slice(2);function yi(e){if(!e[Ki]){e[Ki]=!0,$a.forEach(function(r){r!=="selectionchange"&&(Md.has(r)||_n(r,!1,e),_n(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ki]||(t[Ki]=!0,_n("selectionchange",!1,t))}}function Pc(e,t,r,n){switch(vc(t)){case 1:var d=ju;break;case 4:d=Vu;break;default:d=Bo}r=d.bind(null,t,r,e),d=void 0,!zn||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(d=!0),n?d!==void 0?e.addEventListener(t,r,{capture:!0,passive:d}):e.addEventListener(t,r,!0):d!==void 0?e.addEventListener(t,r,{passive:d}):e.addEventListener(t,r,!1)}function pn(e,t,r,n,d){var m=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var x=n.tag;if(x===3||x===4){var i=n.stateNode.containerInfo;if(i===d||i.nodeType===8&&i.parentNode===d)break;if(x===4)for(x=n.return;x!==null;){var c=x.tag;if((c===3||c===4)&&(c=x.stateNode.containerInfo,c===d||c.nodeType===8&&c.parentNode===d))return;x=x.return}for(;i!==null;){if(x=rr(i),x===null)return;if(c=x.tag,c===5||c===6){n=m=x;continue e}i=i.parentNode}}n=n.return}rc(function(){var u=m,v=Mo(r),h=[];e:{var _=Ac.get(e);if(_!==void 0){var E=Io,C=e;switch(e){case"keypress":if(ss(r)===0)break e;case"keydown":case"keyup":E=od;break;case"focusin":C="focus",E=an;break;case"focusout":C="blur",E=an;break;case"beforeblur":case"afterblur":E=an;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=Pl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=Gu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=cd;break;case kc:case Rc:case Dc:E=Qu;break;case Mc:E=ud;break;case"scroll":E=Ku;break;case"wheel":E=fd;break;case"copy":case"cut":case"paste":E=Zu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=Ol}var f=(t&4)!==0,s=!f&&e==="scroll",l=f?_!==null?_+"Capture":null:_;f=[];for(var o=u,a;o!==null;){a=o;var p=a.stateNode;if(a.tag===5&&p!==null&&(a=p,l!==null&&(p=_i(o,l),p!=null&&f.push(Ci(o,p,a)))),s)break;o=o.return}0<f.length&&(_=new E(_,C,null,r,v),h.push({event:_,listeners:f}))}}if(!(t&7)){e:{if(_=e==="mouseover"||e==="pointerover",E=e==="mouseout"||e==="pointerout",_&&r!==Nn&&(C=r.relatedTarget||r.fromElement)&&(rr(C)||C[Mt]))break e;if((E||_)&&(_=v.window===v?v:(_=v.ownerDocument)?_.defaultView||_.parentWindow:window,E?(C=r.relatedTarget||r.toElement,E=u,C=C?rr(C):null,C!==null&&(s=fr(C),C!==s||C.tag!==5&&C.tag!==6)&&(C=null)):(E=null,C=u),E!==C)){if(f=Pl,p="onMouseLeave",l="onMouseEnter",o="mouse",(e==="pointerout"||e==="pointerover")&&(f=Ol,p="onPointerLeave",l="onPointerEnter",o="pointer"),s=E==null?_:Cr(E),a=C==null?_:Cr(C),_=new f(p,o+"leave",E,r,v),_.target=s,_.relatedTarget=a,p=null,rr(v)===u&&(f=new f(l,o+"enter",C,r,v),f.target=a,f.relatedTarget=s,p=f),s=p,E&&C)t:{for(f=E,l=C,o=0,a=f;a;a=pr(a))o++;for(a=0,p=l;p;p=pr(p))a++;for(;0<o-a;)f=pr(f),o--;for(;0<a-o;)l=pr(l),a--;for(;o--;){if(f===l||l!==null&&f===l.alternate)break t;f=pr(f),l=pr(l)}f=null}else f=null;E!==null&&Kl(h,_,E,f,!1),C!==null&&s!==null&&Kl(h,s,C,f,!0)}}e:{if(_=u?Cr(u):window,E=_.nodeName&&_.nodeName.toLowerCase(),E==="select"||E==="input"&&_.type==="file")var S=yd;else if(Hl(_))if(wc)S=xd;else{S=wd;var y=Cd}else(E=_.nodeName)&&E.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(S=Ed);if(S&&(S=S(e,u))){Cc(h,S,r,v);break e}y&&y(e,_,u),e==="focusout"&&(y=_._wrapperState)&&y.controlled&&_.type==="number"&&Bn(_,"number",_.value)}switch(y=u?Cr(u):window,e){case"focusin":(Hl(y)||y.contentEditable==="true")&&(Sr=y,Kn=u,li=null);break;case"focusout":li=Kn=Sr=null;break;case"mousedown":qn=!0;break;case"contextmenu":case"mouseup":case"dragend":qn=!1,Wl(h,r,v);break;case"selectionchange":if(kd)break;case"keydown":case"keyup":Wl(h,r,v)}var L;if(Ho)e:{switch(e){case"compositionstart":var g="onCompositionStart";break e;case"compositionend":g="onCompositionEnd";break e;case"compositionupdate":g="onCompositionUpdate";break e}g=void 0}else mr?Sc(e,r)&&(g="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(g="onCompositionStart");g&&(mc&&r.locale!=="ko"&&(mr||g!=="onCompositionStart"?g==="onCompositionEnd"&&mr&&(L=gc()):(Nt=v,Oo="value"in Nt?Nt.value:Nt.textContent,mr=!0)),y=Ss(u,g),0<y.length&&(g=new Bl(g,e,null,r,v),h.push({event:g,listeners:y}),L?g.data=L:(L=yc(r),L!==null&&(g.data=L)))),(L=pd?vd(e,r):gd(e,r))&&(u=Ss(u,"onBeforeInput"),0<u.length&&(v=new Bl("onBeforeInput","beforeinput",null,r,v),h.push({event:v,listeners:u}),v.data=L))}Tc(h,t)})}function Ci(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Ss(e,t){for(var r=t+"Capture",n=[];e!==null;){var d=e,m=d.stateNode;d.tag===5&&m!==null&&(d=m,m=_i(e,r),m!=null&&n.unshift(Ci(e,m,d)),m=_i(e,t),m!=null&&n.push(Ci(e,m,d))),e=e.return}return n}function pr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Kl(e,t,r,n,d){for(var m=t._reactName,x=[];r!==null&&r!==n;){var i=r,c=i.alternate,u=i.stateNode;if(c!==null&&c===n)break;i.tag===5&&u!==null&&(i=u,d?(c=_i(r,m),c!=null&&x.unshift(Ci(r,c,i))):d||(c=_i(r,m),c!=null&&x.push(Ci(r,c,i)))),r=r.return}x.length!==0&&e.push({event:t,listeners:x})}var Ad=/\r\n?/g,Td=/\u0000|\uFFFD/g;function ql(e){return(typeof e=="string"?e:""+e).replace(Ad,`
`).replace(Td,"")}function qi(e,t,r){if(t=ql(t),ql(e)!==t&&r)throw Error(V(425))}function ys(){}var Gn=null,Xn=null;function Yn(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Qn=typeof setTimeout=="function"?setTimeout:void 0,Pd=typeof clearTimeout=="function"?clearTimeout:void 0,Gl=typeof Promise=="function"?Promise:void 0,Bd=typeof queueMicrotask=="function"?queueMicrotask:typeof Gl<"u"?function(e){return Gl.resolve(null).then(e).catch(Od)}:Qn;function Od(e){setTimeout(function(){throw e})}function vn(e,t){var r=t,n=0;do{var d=r.nextSibling;if(e.removeChild(r),d&&d.nodeType===8)if(r=d.data,r==="/$"){if(n===0){e.removeChild(d),gi(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=d}while(r);gi(t)}function jt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Xl(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Wr=Math.random().toString(36).slice(2),yt="__reactFiber$"+Wr,wi="__reactProps$"+Wr,Mt="__reactContainer$"+Wr,Jn="__reactEvents$"+Wr,Id="__reactListeners$"+Wr,Fd="__reactHandles$"+Wr;function rr(e){var t=e[yt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Mt]||r[yt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Xl(e);e!==null;){if(r=e[yt])return r;e=Xl(e)}return t}e=r,r=e.parentNode}return null}function Ti(e){return e=e[yt]||e[Mt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Cr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(V(33))}function zs(e){return e[wi]||null}var Zn=[],wr=-1;function Jt(e){return{current:e}}function pe(e){0>wr||(e.current=Zn[wr],Zn[wr]=null,wr--)}function de(e,t){wr++,Zn[wr]=e.current,e.current=t}var Yt={},Fe=Jt(Yt),Ke=Jt(!1),lr=Yt;function Or(e,t){var r=e.type.contextTypes;if(!r)return Yt;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var d={},m;for(m in r)d[m]=t[m];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=d),d}function qe(e){return e=e.childContextTypes,e!=null}function Cs(){pe(Ke),pe(Fe)}function Yl(e,t,r){if(Fe.current!==Yt)throw Error(V(168));de(Fe,t),de(Ke,r)}function Bc(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var d in n)if(!(d in t))throw Error(V(108,Cu(e)||"Unknown",d));return Se({},r,n)}function ws(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Yt,lr=Fe.current,de(Fe,e),de(Ke,Ke.current),!0}function Ql(e,t,r){var n=e.stateNode;if(!n)throw Error(V(169));r?(e=Bc(e,t,lr),n.__reactInternalMemoizedMergedChildContext=e,pe(Ke),pe(Fe),de(Fe,e)):pe(Ke),de(Ke,r)}var Lt=null,Us=!1,gn=!1;function Oc(e){Lt===null?Lt=[e]:Lt.push(e)}function Hd(e){Us=!0,Oc(e)}function Zt(){if(!gn&&Lt!==null){gn=!0;var e=0,t=he;try{var r=Lt;for(he=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Lt=null,Us=!1}catch(d){throw Lt!==null&&(Lt=Lt.slice(e+1)),oc(Ao,Zt),d}finally{he=t,gn=!1}}return null}var Er=[],xr=0,Es=null,xs=0,it=[],st=0,ar=null,bt=1,kt="";function er(e,t){Er[xr++]=xs,Er[xr++]=Es,Es=e,xs=t}function Ic(e,t,r){it[st++]=bt,it[st++]=kt,it[st++]=ar,ar=e;var n=bt;e=kt;var d=32-_t(n)-1;n&=~(1<<d),r+=1;var m=32-_t(t)+d;if(30<m){var x=d-d%5;m=(n&(1<<x)-1).toString(32),n>>=x,d-=x,bt=1<<32-_t(t)+d|r<<d|n,kt=m+e}else bt=1<<m|r<<d|n,kt=e}function $o(e){e.return!==null&&(er(e,1),Ic(e,1,0))}function zo(e){for(;e===Es;)Es=Er[--xr],Er[xr]=null,xs=Er[--xr],Er[xr]=null;for(;e===ar;)ar=it[--st],it[st]=null,kt=it[--st],it[st]=null,bt=it[--st],it[st]=null}var Je=null,Qe=null,ve=!1,ft=null;function Fc(e,t){var r=nt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Jl(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Je=e,Qe=jt(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Je=e,Qe=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=ar!==null?{id:bt,overflow:kt}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=nt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Je=e,Qe=null,!0):!1;default:return!1}}function eo(e){return(e.mode&1)!==0&&(e.flags&128)===0}function to(e){if(ve){var t=Qe;if(t){var r=t;if(!Jl(e,t)){if(eo(e))throw Error(V(418));t=jt(r.nextSibling);var n=Je;t&&Jl(e,t)?Fc(n,r):(e.flags=e.flags&-4097|2,ve=!1,Je=e)}}else{if(eo(e))throw Error(V(418));e.flags=e.flags&-4097|2,ve=!1,Je=e}}}function Zl(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Je=e}function Gi(e){if(e!==Je)return!1;if(!ve)return Zl(e),ve=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Yn(e.type,e.memoizedProps)),t&&(t=Qe)){if(eo(e))throw Hc(),Error(V(418));for(;t;)Fc(e,t),t=jt(t.nextSibling)}if(Zl(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(V(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Qe=jt(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Qe=null}}else Qe=Je?jt(e.stateNode.nextSibling):null;return!0}function Hc(){for(var e=Qe;e;)e=jt(e.nextSibling)}function Ir(){Qe=Je=null,ve=!1}function Uo(e){ft===null?ft=[e]:ft.push(e)}var Nd=Pt.ReactCurrentBatchConfig;function Yr(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(V(309));var n=r.stateNode}if(!n)throw Error(V(147,e));var d=n,m=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===m?t.ref:(t=function(x){var i=d.refs;x===null?delete i[m]:i[m]=x},t._stringRef=m,t)}if(typeof e!="string")throw Error(V(284));if(!r._owner)throw Error(V(290,e))}return e}function Xi(e,t){throw e=Object.prototype.toString.call(t),Error(V(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ea(e){var t=e._init;return t(e._payload)}function Nc(e){function t(l,o){if(e){var a=l.deletions;a===null?(l.deletions=[o],l.flags|=16):a.push(o)}}function r(l,o){if(!e)return null;for(;o!==null;)t(l,o),o=o.sibling;return null}function n(l,o){for(l=new Map;o!==null;)o.key!==null?l.set(o.key,o):l.set(o.index,o),o=o.sibling;return l}function d(l,o){return l=Gt(l,o),l.index=0,l.sibling=null,l}function m(l,o,a){return l.index=a,e?(a=l.alternate,a!==null?(a=a.index,a<o?(l.flags|=2,o):a):(l.flags|=2,o)):(l.flags|=1048576,o)}function x(l){return e&&l.alternate===null&&(l.flags|=2),l}function i(l,o,a,p){return o===null||o.tag!==6?(o=xn(a,l.mode,p),o.return=l,o):(o=d(o,a),o.return=l,o)}function c(l,o,a,p){var S=a.type;return S===gr?v(l,o,a.props.children,p,a.key):o!==null&&(o.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Ot&&ea(S)===o.type)?(p=d(o,a.props),p.ref=Yr(l,o,a),p.return=l,p):(p=us(a.type,a.key,a.props,null,l.mode,p),p.ref=Yr(l,o,a),p.return=l,p)}function u(l,o,a,p){return o===null||o.tag!==4||o.stateNode.containerInfo!==a.containerInfo||o.stateNode.implementation!==a.implementation?(o=Ln(a,l.mode,p),o.return=l,o):(o=d(o,a.children||[]),o.return=l,o)}function v(l,o,a,p,S){return o===null||o.tag!==7?(o=or(a,l.mode,p,S),o.return=l,o):(o=d(o,a),o.return=l,o)}function h(l,o,a){if(typeof o=="string"&&o!==""||typeof o=="number")return o=xn(""+o,l.mode,a),o.return=l,o;if(typeof o=="object"&&o!==null){switch(o.$$typeof){case Hi:return a=us(o.type,o.key,o.props,null,l.mode,a),a.ref=Yr(l,null,o),a.return=l,a;case vr:return o=Ln(o,l.mode,a),o.return=l,o;case Ot:var p=o._init;return h(l,p(o._payload),a)}if(ei(o)||Vr(o))return o=or(o,l.mode,a,null),o.return=l,o;Xi(l,o)}return null}function _(l,o,a,p){var S=o!==null?o.key:null;if(typeof a=="string"&&a!==""||typeof a=="number")return S!==null?null:i(l,o,""+a,p);if(typeof a=="object"&&a!==null){switch(a.$$typeof){case Hi:return a.key===S?c(l,o,a,p):null;case vr:return a.key===S?u(l,o,a,p):null;case Ot:return S=a._init,_(l,o,S(a._payload),p)}if(ei(a)||Vr(a))return S!==null?null:v(l,o,a,p,null);Xi(l,a)}return null}function E(l,o,a,p,S){if(typeof p=="string"&&p!==""||typeof p=="number")return l=l.get(a)||null,i(o,l,""+p,S);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Hi:return l=l.get(p.key===null?a:p.key)||null,c(o,l,p,S);case vr:return l=l.get(p.key===null?a:p.key)||null,u(o,l,p,S);case Ot:var y=p._init;return E(l,o,a,y(p._payload),S)}if(ei(p)||Vr(p))return l=l.get(a)||null,v(o,l,p,S,null);Xi(o,p)}return null}function C(l,o,a,p){for(var S=null,y=null,L=o,g=o=0,w=null;L!==null&&g<a.length;g++){L.index>g?(w=L,L=null):w=L.sibling;var b=_(l,L,a[g],p);if(b===null){L===null&&(L=w);break}e&&L&&b.alternate===null&&t(l,L),o=m(b,o,g),y===null?S=b:y.sibling=b,y=b,L=w}if(g===a.length)return r(l,L),ve&&er(l,g),S;if(L===null){for(;g<a.length;g++)L=h(l,a[g],p),L!==null&&(o=m(L,o,g),y===null?S=L:y.sibling=L,y=L);return ve&&er(l,g),S}for(L=n(l,L);g<a.length;g++)w=E(L,l,g,a[g],p),w!==null&&(e&&w.alternate!==null&&L.delete(w.key===null?g:w.key),o=m(w,o,g),y===null?S=w:y.sibling=w,y=w);return e&&L.forEach(function(M){return t(l,M)}),ve&&er(l,g),S}function f(l,o,a,p){var S=Vr(a);if(typeof S!="function")throw Error(V(150));if(a=S.call(a),a==null)throw Error(V(151));for(var y=S=null,L=o,g=o=0,w=null,b=a.next();L!==null&&!b.done;g++,b=a.next()){L.index>g?(w=L,L=null):w=L.sibling;var M=_(l,L,b.value,p);if(M===null){L===null&&(L=w);break}e&&L&&M.alternate===null&&t(l,L),o=m(M,o,g),y===null?S=M:y.sibling=M,y=M,L=w}if(b.done)return r(l,L),ve&&er(l,g),S;if(L===null){for(;!b.done;g++,b=a.next())b=h(l,b.value,p),b!==null&&(o=m(b,o,g),y===null?S=b:y.sibling=b,y=b);return ve&&er(l,g),S}for(L=n(l,L);!b.done;g++,b=a.next())b=E(L,l,g,b.value,p),b!==null&&(e&&b.alternate!==null&&L.delete(b.key===null?g:b.key),o=m(b,o,g),y===null?S=b:y.sibling=b,y=b);return e&&L.forEach(function(R){return t(l,R)}),ve&&er(l,g),S}function s(l,o,a,p){if(typeof a=="object"&&a!==null&&a.type===gr&&a.key===null&&(a=a.props.children),typeof a=="object"&&a!==null){switch(a.$$typeof){case Hi:e:{for(var S=a.key,y=o;y!==null;){if(y.key===S){if(S=a.type,S===gr){if(y.tag===7){r(l,y.sibling),o=d(y,a.props.children),o.return=l,l=o;break e}}else if(y.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Ot&&ea(S)===y.type){r(l,y.sibling),o=d(y,a.props),o.ref=Yr(l,y,a),o.return=l,l=o;break e}r(l,y);break}else t(l,y);y=y.sibling}a.type===gr?(o=or(a.props.children,l.mode,p,a.key),o.return=l,l=o):(p=us(a.type,a.key,a.props,null,l.mode,p),p.ref=Yr(l,o,a),p.return=l,l=p)}return x(l);case vr:e:{for(y=a.key;o!==null;){if(o.key===y)if(o.tag===4&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){r(l,o.sibling),o=d(o,a.children||[]),o.return=l,l=o;break e}else{r(l,o);break}else t(l,o);o=o.sibling}o=Ln(a,l.mode,p),o.return=l,l=o}return x(l);case Ot:return y=a._init,s(l,o,y(a._payload),p)}if(ei(a))return C(l,o,a,p);if(Vr(a))return f(l,o,a,p);Xi(l,a)}return typeof a=="string"&&a!==""||typeof a=="number"?(a=""+a,o!==null&&o.tag===6?(r(l,o.sibling),o=d(o,a),o.return=l,l=o):(r(l,o),o=xn(a,l.mode,p),o.return=l,l=o),x(l)):r(l,o)}return s}var Fr=Nc(!0),$c=Nc(!1),Ls=Jt(null),bs=null,Lr=null,Wo=null;function jo(){Wo=Lr=bs=null}function Vo(e){var t=Ls.current;pe(Ls),e._currentValue=t}function ro(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Tr(e,t){bs=e,Wo=Lr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ve=!0),e.firstContext=null)}function lt(e){var t=e._currentValue;if(Wo!==e)if(e={context:e,memoizedValue:t,next:null},Lr===null){if(bs===null)throw Error(V(308));Lr=e,bs.dependencies={lanes:0,firstContext:e}}else Lr=Lr.next=e;return t}var ir=null;function Ko(e){ir===null?ir=[e]:ir.push(e)}function zc(e,t,r,n){var d=t.interleaved;return d===null?(r.next=r,Ko(t)):(r.next=d.next,d.next=r),t.interleaved=r,At(e,n)}function At(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var It=!1;function qo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Uc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Rt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Vt(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,ae&2){var d=n.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),n.pending=t,At(e,r)}return d=n.interleaved,d===null?(t.next=t,Ko(n)):(t.next=d.next,d.next=t),n.interleaved=t,At(e,r)}function ns(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,To(e,r)}}function ta(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var d=null,m=null;if(r=r.firstBaseUpdate,r!==null){do{var x={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};m===null?d=m=x:m=m.next=x,r=r.next}while(r!==null);m===null?d=m=t:m=m.next=t}else d=m=t;r={baseState:n.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function ks(e,t,r,n){var d=e.updateQueue;It=!1;var m=d.firstBaseUpdate,x=d.lastBaseUpdate,i=d.shared.pending;if(i!==null){d.shared.pending=null;var c=i,u=c.next;c.next=null,x===null?m=u:x.next=u,x=c;var v=e.alternate;v!==null&&(v=v.updateQueue,i=v.lastBaseUpdate,i!==x&&(i===null?v.firstBaseUpdate=u:i.next=u,v.lastBaseUpdate=c))}if(m!==null){var h=d.baseState;x=0,v=u=c=null,i=m;do{var _=i.lane,E=i.eventTime;if((n&_)===_){v!==null&&(v=v.next={eventTime:E,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var C=e,f=i;switch(_=t,E=r,f.tag){case 1:if(C=f.payload,typeof C=="function"){h=C.call(E,h,_);break e}h=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=f.payload,_=typeof C=="function"?C.call(E,h,_):C,_==null)break e;h=Se({},h,_);break e;case 2:It=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,_=d.effects,_===null?d.effects=[i]:_.push(i))}else E={eventTime:E,lane:_,tag:i.tag,payload:i.payload,callback:i.callback,next:null},v===null?(u=v=E,c=h):v=v.next=E,x|=_;if(i=i.next,i===null){if(i=d.shared.pending,i===null)break;_=i,i=_.next,_.next=null,d.lastBaseUpdate=_,d.shared.pending=null}}while(!0);if(v===null&&(c=h),d.baseState=c,d.firstBaseUpdate=u,d.lastBaseUpdate=v,t=d.shared.interleaved,t!==null){d=t;do x|=d.lane,d=d.next;while(d!==t)}else m===null&&(d.shared.lanes=0);hr|=x,e.lanes=x,e.memoizedState=h}}function ra(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],d=n.callback;if(d!==null){if(n.callback=null,n=r,typeof d!="function")throw Error(V(191,d));d.call(n)}}}var Pi={},wt=Jt(Pi),Ei=Jt(Pi),xi=Jt(Pi);function sr(e){if(e===Pi)throw Error(V(174));return e}function Go(e,t){switch(de(xi,t),de(Ei,e),de(wt,Pi),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:In(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=In(t,e)}pe(wt),de(wt,t)}function Hr(){pe(wt),pe(Ei),pe(xi)}function Wc(e){sr(xi.current);var t=sr(wt.current),r=In(t,e.type);t!==r&&(de(Ei,e),de(wt,r))}function Xo(e){Ei.current===e&&(pe(wt),pe(Ei))}var ge=Jt(0);function Rs(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var mn=[];function Yo(){for(var e=0;e<mn.length;e++)mn[e]._workInProgressVersionPrimary=null;mn.length=0}var os=Pt.ReactCurrentDispatcher,Sn=Pt.ReactCurrentBatchConfig,cr=0,me=null,be=null,De=null,Ds=!1,ai=!1,Li=0,$d=0;function Be(){throw Error(V(321))}function Qo(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!vt(e[r],t[r]))return!1;return!0}function Jo(e,t,r,n,d,m){if(cr=m,me=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,os.current=e===null||e.memoizedState===null?jd:Vd,e=r(n,d),ai){m=0;do{if(ai=!1,Li=0,25<=m)throw Error(V(301));m+=1,De=be=null,t.updateQueue=null,os.current=Kd,e=r(n,d)}while(ai)}if(os.current=Ms,t=be!==null&&be.next!==null,cr=0,De=be=me=null,Ds=!1,t)throw Error(V(300));return e}function Zo(){var e=Li!==0;return Li=0,e}function St(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return De===null?me.memoizedState=De=e:De=De.next=e,De}function at(){if(be===null){var e=me.alternate;e=e!==null?e.memoizedState:null}else e=be.next;var t=De===null?me.memoizedState:De.next;if(t!==null)De=t,be=e;else{if(e===null)throw Error(V(310));be=e,e={memoizedState:be.memoizedState,baseState:be.baseState,baseQueue:be.baseQueue,queue:be.queue,next:null},De===null?me.memoizedState=De=e:De=De.next=e}return De}function bi(e,t){return typeof t=="function"?t(e):t}function yn(e){var t=at(),r=t.queue;if(r===null)throw Error(V(311));r.lastRenderedReducer=e;var n=be,d=n.baseQueue,m=r.pending;if(m!==null){if(d!==null){var x=d.next;d.next=m.next,m.next=x}n.baseQueue=d=m,r.pending=null}if(d!==null){m=d.next,n=n.baseState;var i=x=null,c=null,u=m;do{var v=u.lane;if((cr&v)===v)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var h={lane:v,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(i=c=h,x=n):c=c.next=h,me.lanes|=v,hr|=v}u=u.next}while(u!==null&&u!==m);c===null?x=n:c.next=i,vt(n,t.memoizedState)||(Ve=!0),t.memoizedState=n,t.baseState=x,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){d=e;do m=d.lane,me.lanes|=m,hr|=m,d=d.next;while(d!==e)}else d===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Cn(e){var t=at(),r=t.queue;if(r===null)throw Error(V(311));r.lastRenderedReducer=e;var n=r.dispatch,d=r.pending,m=t.memoizedState;if(d!==null){r.pending=null;var x=d=d.next;do m=e(m,x.action),x=x.next;while(x!==d);vt(m,t.memoizedState)||(Ve=!0),t.memoizedState=m,t.baseQueue===null&&(t.baseState=m),r.lastRenderedState=m}return[m,n]}function jc(){}function Vc(e,t){var r=me,n=at(),d=t(),m=!vt(n.memoizedState,d);if(m&&(n.memoizedState=d,Ve=!0),n=n.queue,el(Gc.bind(null,r,n,e),[e]),n.getSnapshot!==t||m||De!==null&&De.memoizedState.tag&1){if(r.flags|=2048,ki(9,qc.bind(null,r,n,d,t),void 0,null),Me===null)throw Error(V(349));cr&30||Kc(r,t,d)}return d}function Kc(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=me.updateQueue,t===null?(t={lastEffect:null,stores:null},me.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function qc(e,t,r,n){t.value=r,t.getSnapshot=n,Xc(t)&&Yc(e)}function Gc(e,t,r){return r(function(){Xc(t)&&Yc(e)})}function Xc(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!vt(e,r)}catch{return!0}}function Yc(e){var t=At(e,1);t!==null&&pt(t,e,1,-1)}function ia(e){var t=St();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bi,lastRenderedState:e},t.queue=e,e=e.dispatch=Wd.bind(null,me,e),[t.memoizedState,e]}function ki(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=me.updateQueue,t===null?(t={lastEffect:null,stores:null},me.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Qc(){return at().memoizedState}function ls(e,t,r,n){var d=St();me.flags|=e,d.memoizedState=ki(1|t,r,void 0,n===void 0?null:n)}function Ws(e,t,r,n){var d=at();n=n===void 0?null:n;var m=void 0;if(be!==null){var x=be.memoizedState;if(m=x.destroy,n!==null&&Qo(n,x.deps)){d.memoizedState=ki(t,r,m,n);return}}me.flags|=e,d.memoizedState=ki(1|t,r,m,n)}function sa(e,t){return ls(8390656,8,e,t)}function el(e,t){return Ws(2048,8,e,t)}function Jc(e,t){return Ws(4,2,e,t)}function Zc(e,t){return Ws(4,4,e,t)}function eh(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function th(e,t,r){return r=r!=null?r.concat([e]):null,Ws(4,4,eh.bind(null,t,e),r)}function tl(){}function rh(e,t){var r=at();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Qo(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function ih(e,t){var r=at();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Qo(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function sh(e,t,r){return cr&21?(vt(r,t)||(r=cc(),me.lanes|=r,hr|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ve=!0),e.memoizedState=r)}function zd(e,t){var r=he;he=r!==0&&4>r?r:4,e(!0);var n=Sn.transition;Sn.transition={};try{e(!1),t()}finally{he=r,Sn.transition=n}}function nh(){return at().memoizedState}function Ud(e,t,r){var n=qt(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},oh(e))lh(t,r);else if(r=zc(e,t,r,n),r!==null){var d=Ne();pt(r,e,n,d),ah(r,t,n)}}function Wd(e,t,r){var n=qt(e),d={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(oh(e))lh(t,d);else{var m=e.alternate;if(e.lanes===0&&(m===null||m.lanes===0)&&(m=t.lastRenderedReducer,m!==null))try{var x=t.lastRenderedState,i=m(x,r);if(d.hasEagerState=!0,d.eagerState=i,vt(i,x)){var c=t.interleaved;c===null?(d.next=d,Ko(t)):(d.next=c.next,c.next=d),t.interleaved=d;return}}catch{}finally{}r=zc(e,t,d,n),r!==null&&(d=Ne(),pt(r,e,n,d),ah(r,t,n))}}function oh(e){var t=e.alternate;return e===me||t!==null&&t===me}function lh(e,t){ai=Ds=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function ah(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,To(e,r)}}var Ms={readContext:lt,useCallback:Be,useContext:Be,useEffect:Be,useImperativeHandle:Be,useInsertionEffect:Be,useLayoutEffect:Be,useMemo:Be,useReducer:Be,useRef:Be,useState:Be,useDebugValue:Be,useDeferredValue:Be,useTransition:Be,useMutableSource:Be,useSyncExternalStore:Be,useId:Be,unstable_isNewReconciler:!1},jd={readContext:lt,useCallback:function(e,t){return St().memoizedState=[e,t===void 0?null:t],e},useContext:lt,useEffect:sa,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,ls(4194308,4,eh.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ls(4194308,4,e,t)},useInsertionEffect:function(e,t){return ls(4,2,e,t)},useMemo:function(e,t){var r=St();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=St();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Ud.bind(null,me,e),[n.memoizedState,e]},useRef:function(e){var t=St();return e={current:e},t.memoizedState=e},useState:ia,useDebugValue:tl,useDeferredValue:function(e){return St().memoizedState=e},useTransition:function(){var e=ia(!1),t=e[0];return e=zd.bind(null,e[1]),St().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=me,d=St();if(ve){if(r===void 0)throw Error(V(407));r=r()}else{if(r=t(),Me===null)throw Error(V(349));cr&30||Kc(n,t,r)}d.memoizedState=r;var m={value:r,getSnapshot:t};return d.queue=m,sa(Gc.bind(null,n,m,e),[e]),n.flags|=2048,ki(9,qc.bind(null,n,m,r,t),void 0,null),r},useId:function(){var e=St(),t=Me.identifierPrefix;if(ve){var r=kt,n=bt;r=(n&~(1<<32-_t(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Li++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=$d++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Vd={readContext:lt,useCallback:rh,useContext:lt,useEffect:el,useImperativeHandle:th,useInsertionEffect:Jc,useLayoutEffect:Zc,useMemo:ih,useReducer:yn,useRef:Qc,useState:function(){return yn(bi)},useDebugValue:tl,useDeferredValue:function(e){var t=at();return sh(t,be.memoizedState,e)},useTransition:function(){var e=yn(bi)[0],t=at().memoizedState;return[e,t]},useMutableSource:jc,useSyncExternalStore:Vc,useId:nh,unstable_isNewReconciler:!1},Kd={readContext:lt,useCallback:rh,useContext:lt,useEffect:el,useImperativeHandle:th,useInsertionEffect:Jc,useLayoutEffect:Zc,useMemo:ih,useReducer:Cn,useRef:Qc,useState:function(){return Cn(bi)},useDebugValue:tl,useDeferredValue:function(e){var t=at();return be===null?t.memoizedState=e:sh(t,be.memoizedState,e)},useTransition:function(){var e=Cn(bi)[0],t=at().memoizedState;return[e,t]},useMutableSource:jc,useSyncExternalStore:Vc,useId:nh,unstable_isNewReconciler:!1};function ut(e,t){if(e&&e.defaultProps){t=Se({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function io(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Se({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var js={isMounted:function(e){return(e=e._reactInternals)?fr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Ne(),d=qt(e),m=Rt(n,d);m.payload=t,r!=null&&(m.callback=r),t=Vt(e,m,d),t!==null&&(pt(t,e,d,n),ns(t,e,d))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Ne(),d=qt(e),m=Rt(n,d);m.tag=1,m.payload=t,r!=null&&(m.callback=r),t=Vt(e,m,d),t!==null&&(pt(t,e,d,n),ns(t,e,d))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ne(),n=qt(e),d=Rt(r,n);d.tag=2,t!=null&&(d.callback=t),t=Vt(e,d,n),t!==null&&(pt(t,e,n,r),ns(t,e,n))}};function na(e,t,r,n,d,m,x){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,m,x):t.prototype&&t.prototype.isPureReactComponent?!Si(r,n)||!Si(d,m):!0}function ch(e,t,r){var n=!1,d=Yt,m=t.contextType;return typeof m=="object"&&m!==null?m=lt(m):(d=qe(t)?lr:Fe.current,n=t.contextTypes,m=(n=n!=null)?Or(e,d):Yt),t=new t(r,m),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=js,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=d,e.__reactInternalMemoizedMaskedChildContext=m),t}function oa(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&js.enqueueReplaceState(t,t.state,null)}function so(e,t,r,n){var d=e.stateNode;d.props=r,d.state=e.memoizedState,d.refs={},qo(e);var m=t.contextType;typeof m=="object"&&m!==null?d.context=lt(m):(m=qe(t)?lr:Fe.current,d.context=Or(e,m)),d.state=e.memoizedState,m=t.getDerivedStateFromProps,typeof m=="function"&&(io(e,t,m,r),d.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(t=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),t!==d.state&&js.enqueueReplaceState(d,d.state,null),ks(e,r,d,n),d.state=e.memoizedState),typeof d.componentDidMount=="function"&&(e.flags|=4194308)}function Nr(e,t){try{var r="",n=t;do r+=yu(n),n=n.return;while(n);var d=r}catch(m){d=`
Error generating stack: `+m.message+`
`+m.stack}return{value:e,source:t,stack:d,digest:null}}function wn(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function no(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var qd=typeof WeakMap=="function"?WeakMap:Map;function hh(e,t,r){r=Rt(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Ts||(Ts=!0,vo=n),no(e,t)},r}function uh(e,t,r){r=Rt(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var d=t.value;r.payload=function(){return n(d)},r.callback=function(){no(e,t)}}var m=e.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(r.callback=function(){no(e,t),typeof n!="function"&&(Kt===null?Kt=new Set([this]):Kt.add(this));var x=t.stack;this.componentDidCatch(t.value,{componentStack:x!==null?x:""})}),r}function la(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new qd;var d=new Set;n.set(t,d)}else d=n.get(t),d===void 0&&(d=new Set,n.set(t,d));d.has(r)||(d.add(r),e=af.bind(null,e,t,r),t.then(e,e))}function aa(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ca(e,t,r,n,d){return e.mode&1?(e.flags|=65536,e.lanes=d,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Rt(-1,1),t.tag=2,Vt(r,t,1))),r.lanes|=1),e)}var Gd=Pt.ReactCurrentOwner,Ve=!1;function He(e,t,r,n){t.child=e===null?$c(t,null,r,n):Fr(t,e.child,r,n)}function ha(e,t,r,n,d){r=r.render;var m=t.ref;return Tr(t,d),n=Jo(e,t,r,n,m,d),r=Zo(),e!==null&&!Ve?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,Tt(e,t,d)):(ve&&r&&$o(t),t.flags|=1,He(e,t,n,d),t.child)}function ua(e,t,r,n,d){if(e===null){var m=r.type;return typeof m=="function"&&!cl(m)&&m.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=m,dh(e,t,m,n,d)):(e=us(r.type,null,n,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}if(m=e.child,!(e.lanes&d)){var x=m.memoizedProps;if(r=r.compare,r=r!==null?r:Si,r(x,n)&&e.ref===t.ref)return Tt(e,t,d)}return t.flags|=1,e=Gt(m,n),e.ref=t.ref,e.return=t,t.child=e}function dh(e,t,r,n,d){if(e!==null){var m=e.memoizedProps;if(Si(m,n)&&e.ref===t.ref)if(Ve=!1,t.pendingProps=n=m,(e.lanes&d)!==0)e.flags&131072&&(Ve=!0);else return t.lanes=e.lanes,Tt(e,t,d)}return oo(e,t,r,n,d)}function fh(e,t,r){var n=t.pendingProps,d=n.children,m=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},de(kr,Ye),Ye|=r;else{if(!(r&1073741824))return e=m!==null?m.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,de(kr,Ye),Ye|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=m!==null?m.baseLanes:r,de(kr,Ye),Ye|=n}else m!==null?(n=m.baseLanes|r,t.memoizedState=null):n=r,de(kr,Ye),Ye|=n;return He(e,t,d,r),t.child}function _h(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function oo(e,t,r,n,d){var m=qe(r)?lr:Fe.current;return m=Or(t,m),Tr(t,d),r=Jo(e,t,r,n,m,d),n=Zo(),e!==null&&!Ve?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,Tt(e,t,d)):(ve&&n&&$o(t),t.flags|=1,He(e,t,r,d),t.child)}function da(e,t,r,n,d){if(qe(r)){var m=!0;ws(t)}else m=!1;if(Tr(t,d),t.stateNode===null)as(e,t),ch(t,r,n),so(t,r,n,d),n=!0;else if(e===null){var x=t.stateNode,i=t.memoizedProps;x.props=i;var c=x.context,u=r.contextType;typeof u=="object"&&u!==null?u=lt(u):(u=qe(r)?lr:Fe.current,u=Or(t,u));var v=r.getDerivedStateFromProps,h=typeof v=="function"||typeof x.getSnapshotBeforeUpdate=="function";h||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(i!==n||c!==u)&&oa(t,x,n,u),It=!1;var _=t.memoizedState;x.state=_,ks(t,n,x,d),c=t.memoizedState,i!==n||_!==c||Ke.current||It?(typeof v=="function"&&(io(t,r,v,n),c=t.memoizedState),(i=It||na(t,r,i,n,_,c,u))?(h||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(t.flags|=4194308)):(typeof x.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),x.props=n,x.state=c,x.context=u,n=i):(typeof x.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{x=t.stateNode,Uc(e,t),i=t.memoizedProps,u=t.type===t.elementType?i:ut(t.type,i),x.props=u,h=t.pendingProps,_=x.context,c=r.contextType,typeof c=="object"&&c!==null?c=lt(c):(c=qe(r)?lr:Fe.current,c=Or(t,c));var E=r.getDerivedStateFromProps;(v=typeof E=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(i!==h||_!==c)&&oa(t,x,n,c),It=!1,_=t.memoizedState,x.state=_,ks(t,n,x,d);var C=t.memoizedState;i!==h||_!==C||Ke.current||It?(typeof E=="function"&&(io(t,r,E,n),C=t.memoizedState),(u=It||na(t,r,u,n,_,C,c)||!1)?(v||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(n,C,c),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(n,C,c)),typeof x.componentDidUpdate=="function"&&(t.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof x.componentDidUpdate!="function"||i===e.memoizedProps&&_===e.memoizedState||(t.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&_===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=C),x.props=n,x.state=C,x.context=c,n=u):(typeof x.componentDidUpdate!="function"||i===e.memoizedProps&&_===e.memoizedState||(t.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&_===e.memoizedState||(t.flags|=1024),n=!1)}return lo(e,t,r,n,m,d)}function lo(e,t,r,n,d,m){_h(e,t);var x=(t.flags&128)!==0;if(!n&&!x)return d&&Ql(t,r,!1),Tt(e,t,m);n=t.stateNode,Gd.current=t;var i=x&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&x?(t.child=Fr(t,e.child,null,m),t.child=Fr(t,null,i,m)):He(e,t,i,m),t.memoizedState=n.state,d&&Ql(t,r,!0),t.child}function ph(e){var t=e.stateNode;t.pendingContext?Yl(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Yl(e,t.context,!1),Go(e,t.containerInfo)}function fa(e,t,r,n,d){return Ir(),Uo(d),t.flags|=256,He(e,t,r,n),t.child}var ao={dehydrated:null,treeContext:null,retryLane:0};function co(e){return{baseLanes:e,cachePool:null,transitions:null}}function vh(e,t,r){var n=t.pendingProps,d=ge.current,m=!1,x=(t.flags&128)!==0,i;if((i=x)||(i=e!==null&&e.memoizedState===null?!1:(d&2)!==0),i?(m=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(d|=1),de(ge,d&1),e===null)return to(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(x=n.children,e=n.fallback,m?(n=t.mode,m=t.child,x={mode:"hidden",children:x},!(n&1)&&m!==null?(m.childLanes=0,m.pendingProps=x):m=qs(x,n,0,null),e=or(e,n,r,null),m.return=t,e.return=t,m.sibling=e,t.child=m,t.child.memoizedState=co(r),t.memoizedState=ao,e):rl(t,x));if(d=e.memoizedState,d!==null&&(i=d.dehydrated,i!==null))return Xd(e,t,x,n,i,d,r);if(m){m=n.fallback,x=t.mode,d=e.child,i=d.sibling;var c={mode:"hidden",children:n.children};return!(x&1)&&t.child!==d?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Gt(d,c),n.subtreeFlags=d.subtreeFlags&14680064),i!==null?m=Gt(i,m):(m=or(m,x,r,null),m.flags|=2),m.return=t,n.return=t,n.sibling=m,t.child=n,n=m,m=t.child,x=e.child.memoizedState,x=x===null?co(r):{baseLanes:x.baseLanes|r,cachePool:null,transitions:x.transitions},m.memoizedState=x,m.childLanes=e.childLanes&~r,t.memoizedState=ao,n}return m=e.child,e=m.sibling,n=Gt(m,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function rl(e,t){return t=qs({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Yi(e,t,r,n){return n!==null&&Uo(n),Fr(t,e.child,null,r),e=rl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Xd(e,t,r,n,d,m,x){if(r)return t.flags&256?(t.flags&=-257,n=wn(Error(V(422))),Yi(e,t,x,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(m=n.fallback,d=t.mode,n=qs({mode:"visible",children:n.children},d,0,null),m=or(m,d,x,null),m.flags|=2,n.return=t,m.return=t,n.sibling=m,t.child=n,t.mode&1&&Fr(t,e.child,null,x),t.child.memoizedState=co(x),t.memoizedState=ao,m);if(!(t.mode&1))return Yi(e,t,x,null);if(d.data==="$!"){if(n=d.nextSibling&&d.nextSibling.dataset,n)var i=n.dgst;return n=i,m=Error(V(419)),n=wn(m,n,void 0),Yi(e,t,x,n)}if(i=(x&e.childLanes)!==0,Ve||i){if(n=Me,n!==null){switch(x&-x){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=d&(n.suspendedLanes|x)?0:d,d!==0&&d!==m.retryLane&&(m.retryLane=d,At(e,d),pt(n,e,d,-1))}return al(),n=wn(Error(V(421))),Yi(e,t,x,n)}return d.data==="$?"?(t.flags|=128,t.child=e.child,t=cf.bind(null,e),d._reactRetry=t,null):(e=m.treeContext,Qe=jt(d.nextSibling),Je=t,ve=!0,ft=null,e!==null&&(it[st++]=bt,it[st++]=kt,it[st++]=ar,bt=e.id,kt=e.overflow,ar=t),t=rl(t,n.children),t.flags|=4096,t)}function _a(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),ro(e.return,t,r)}function En(e,t,r,n,d){var m=e.memoizedState;m===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:d}:(m.isBackwards=t,m.rendering=null,m.renderingStartTime=0,m.last=n,m.tail=r,m.tailMode=d)}function gh(e,t,r){var n=t.pendingProps,d=n.revealOrder,m=n.tail;if(He(e,t,n.children,r),n=ge.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&_a(e,r,t);else if(e.tag===19)_a(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(de(ge,n),!(t.mode&1))t.memoizedState=null;else switch(d){case"forwards":for(r=t.child,d=null;r!==null;)e=r.alternate,e!==null&&Rs(e)===null&&(d=r),r=r.sibling;r=d,r===null?(d=t.child,t.child=null):(d=r.sibling,r.sibling=null),En(t,!1,d,r,m);break;case"backwards":for(r=null,d=t.child,t.child=null;d!==null;){if(e=d.alternate,e!==null&&Rs(e)===null){t.child=d;break}e=d.sibling,d.sibling=r,r=d,d=e}En(t,!0,r,null,m);break;case"together":En(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function as(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Tt(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),hr|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(V(153));if(t.child!==null){for(e=t.child,r=Gt(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Gt(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Yd(e,t,r){switch(t.tag){case 3:ph(t),Ir();break;case 5:Wc(t);break;case 1:qe(t.type)&&ws(t);break;case 4:Go(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,d=t.memoizedProps.value;de(Ls,n._currentValue),n._currentValue=d;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(de(ge,ge.current&1),t.flags|=128,null):r&t.child.childLanes?vh(e,t,r):(de(ge,ge.current&1),e=Tt(e,t,r),e!==null?e.sibling:null);de(ge,ge.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return gh(e,t,r);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),de(ge,ge.current),n)break;return null;case 22:case 23:return t.lanes=0,fh(e,t,r)}return Tt(e,t,r)}var mh,ho,Sh,yh;mh=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};ho=function(){};Sh=function(e,t,r,n){var d=e.memoizedProps;if(d!==n){e=t.stateNode,sr(wt.current);var m=null;switch(r){case"input":d=Tn(e,d),n=Tn(e,n),m=[];break;case"select":d=Se({},d,{value:void 0}),n=Se({},n,{value:void 0}),m=[];break;case"textarea":d=On(e,d),n=On(e,n),m=[];break;default:typeof d.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=ys)}Fn(r,n);var x;r=null;for(u in d)if(!n.hasOwnProperty(u)&&d.hasOwnProperty(u)&&d[u]!=null)if(u==="style"){var i=d[u];for(x in i)i.hasOwnProperty(x)&&(r||(r={}),r[x]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(di.hasOwnProperty(u)?m||(m=[]):(m=m||[]).push(u,null));for(u in n){var c=n[u];if(i=d!=null?d[u]:void 0,n.hasOwnProperty(u)&&c!==i&&(c!=null||i!=null))if(u==="style")if(i){for(x in i)!i.hasOwnProperty(x)||c&&c.hasOwnProperty(x)||(r||(r={}),r[x]="");for(x in c)c.hasOwnProperty(x)&&i[x]!==c[x]&&(r||(r={}),r[x]=c[x])}else r||(m||(m=[]),m.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,i=i?i.__html:void 0,c!=null&&i!==c&&(m=m||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(m=m||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(di.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&_e("scroll",e),m||i===c||(m=[])):(m=m||[]).push(u,c))}r&&(m=m||[]).push("style",r);var u=m;(t.updateQueue=u)&&(t.flags|=4)}};yh=function(e,t,r,n){r!==n&&(t.flags|=4)};function Qr(e,t){if(!ve)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Oe(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var d=e.child;d!==null;)r|=d.lanes|d.childLanes,n|=d.subtreeFlags&14680064,n|=d.flags&14680064,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)r|=d.lanes|d.childLanes,n|=d.subtreeFlags,n|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Qd(e,t,r){var n=t.pendingProps;switch(zo(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Oe(t),null;case 1:return qe(t.type)&&Cs(),Oe(t),null;case 3:return n=t.stateNode,Hr(),pe(Ke),pe(Fe),Yo(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Gi(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ft!==null&&(So(ft),ft=null))),ho(e,t),Oe(t),null;case 5:Xo(t);var d=sr(xi.current);if(r=t.type,e!==null&&t.stateNode!=null)Sh(e,t,r,n,d),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(V(166));return Oe(t),null}if(e=sr(wt.current),Gi(t)){n=t.stateNode,r=t.type;var m=t.memoizedProps;switch(n[yt]=t,n[wi]=m,e=(t.mode&1)!==0,r){case"dialog":_e("cancel",n),_e("close",n);break;case"iframe":case"object":case"embed":_e("load",n);break;case"video":case"audio":for(d=0;d<ri.length;d++)_e(ri[d],n);break;case"source":_e("error",n);break;case"img":case"image":case"link":_e("error",n),_e("load",n);break;case"details":_e("toggle",n);break;case"input":El(n,m),_e("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!m.multiple},_e("invalid",n);break;case"textarea":Ll(n,m),_e("invalid",n)}Fn(r,m),d=null;for(var x in m)if(m.hasOwnProperty(x)){var i=m[x];x==="children"?typeof i=="string"?n.textContent!==i&&(m.suppressHydrationWarning!==!0&&qi(n.textContent,i,e),d=["children",i]):typeof i=="number"&&n.textContent!==""+i&&(m.suppressHydrationWarning!==!0&&qi(n.textContent,i,e),d=["children",""+i]):di.hasOwnProperty(x)&&i!=null&&x==="onScroll"&&_e("scroll",n)}switch(r){case"input":Ni(n),xl(n,m,!0);break;case"textarea":Ni(n),bl(n);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(n.onclick=ys)}n=d,t.updateQueue=n,n!==null&&(t.flags|=4)}else{x=d.nodeType===9?d:d.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ga(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=x.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=x.createElement(r,{is:n.is}):(e=x.createElement(r),r==="select"&&(x=e,n.multiple?x.multiple=!0:n.size&&(x.size=n.size))):e=x.createElementNS(e,r),e[yt]=t,e[wi]=n,mh(e,t,!1,!1),t.stateNode=e;e:{switch(x=Hn(r,n),r){case"dialog":_e("cancel",e),_e("close",e),d=n;break;case"iframe":case"object":case"embed":_e("load",e),d=n;break;case"video":case"audio":for(d=0;d<ri.length;d++)_e(ri[d],e);d=n;break;case"source":_e("error",e),d=n;break;case"img":case"image":case"link":_e("error",e),_e("load",e),d=n;break;case"details":_e("toggle",e),d=n;break;case"input":El(e,n),d=Tn(e,n),_e("invalid",e);break;case"option":d=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},d=Se({},n,{value:void 0}),_e("invalid",e);break;case"textarea":Ll(e,n),d=On(e,n),_e("invalid",e);break;default:d=n}Fn(r,d),i=d;for(m in i)if(i.hasOwnProperty(m)){var c=i[m];m==="style"?Qa(e,c):m==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Xa(e,c)):m==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&fi(e,c):typeof c=="number"&&fi(e,""+c):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(di.hasOwnProperty(m)?c!=null&&m==="onScroll"&&_e("scroll",e):c!=null&&bo(e,m,c,x))}switch(r){case"input":Ni(e),xl(e,n,!1);break;case"textarea":Ni(e),bl(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Xt(n.value));break;case"select":e.multiple=!!n.multiple,m=n.value,m!=null?Rr(e,!!n.multiple,m,!1):n.defaultValue!=null&&Rr(e,!!n.multiple,n.defaultValue,!0);break;default:typeof d.onClick=="function"&&(e.onclick=ys)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Oe(t),null;case 6:if(e&&t.stateNode!=null)yh(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(V(166));if(r=sr(xi.current),sr(wt.current),Gi(t)){if(n=t.stateNode,r=t.memoizedProps,n[yt]=t,(m=n.nodeValue!==r)&&(e=Je,e!==null))switch(e.tag){case 3:qi(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&qi(n.nodeValue,r,(e.mode&1)!==0)}m&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[yt]=t,t.stateNode=n}return Oe(t),null;case 13:if(pe(ge),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ve&&Qe!==null&&t.mode&1&&!(t.flags&128))Hc(),Ir(),t.flags|=98560,m=!1;else if(m=Gi(t),n!==null&&n.dehydrated!==null){if(e===null){if(!m)throw Error(V(318));if(m=t.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(V(317));m[yt]=t}else Ir(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Oe(t),m=!1}else ft!==null&&(So(ft),ft=null),m=!0;if(!m)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||ge.current&1?Re===0&&(Re=3):al())),t.updateQueue!==null&&(t.flags|=4),Oe(t),null);case 4:return Hr(),ho(e,t),e===null&&yi(t.stateNode.containerInfo),Oe(t),null;case 10:return Vo(t.type._context),Oe(t),null;case 17:return qe(t.type)&&Cs(),Oe(t),null;case 19:if(pe(ge),m=t.memoizedState,m===null)return Oe(t),null;if(n=(t.flags&128)!==0,x=m.rendering,x===null)if(n)Qr(m,!1);else{if(Re!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(x=Rs(e),x!==null){for(t.flags|=128,Qr(m,!1),n=x.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)m=r,e=n,m.flags&=14680066,x=m.alternate,x===null?(m.childLanes=0,m.lanes=e,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=x.childLanes,m.lanes=x.lanes,m.child=x.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=x.memoizedProps,m.memoizedState=x.memoizedState,m.updateQueue=x.updateQueue,m.type=x.type,e=x.dependencies,m.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return de(ge,ge.current&1|2),t.child}e=e.sibling}m.tail!==null&&Ee()>$r&&(t.flags|=128,n=!0,Qr(m,!1),t.lanes=4194304)}else{if(!n)if(e=Rs(x),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Qr(m,!0),m.tail===null&&m.tailMode==="hidden"&&!x.alternate&&!ve)return Oe(t),null}else 2*Ee()-m.renderingStartTime>$r&&r!==1073741824&&(t.flags|=128,n=!0,Qr(m,!1),t.lanes=4194304);m.isBackwards?(x.sibling=t.child,t.child=x):(r=m.last,r!==null?r.sibling=x:t.child=x,m.last=x)}return m.tail!==null?(t=m.tail,m.rendering=t,m.tail=t.sibling,m.renderingStartTime=Ee(),t.sibling=null,r=ge.current,de(ge,n?r&1|2:r&1),t):(Oe(t),null);case 22:case 23:return ll(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Ye&1073741824&&(Oe(t),t.subtreeFlags&6&&(t.flags|=8192)):Oe(t),null;case 24:return null;case 25:return null}throw Error(V(156,t.tag))}function Jd(e,t){switch(zo(t),t.tag){case 1:return qe(t.type)&&Cs(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Hr(),pe(Ke),pe(Fe),Yo(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Xo(t),null;case 13:if(pe(ge),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(V(340));Ir()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return pe(ge),null;case 4:return Hr(),null;case 10:return Vo(t.type._context),null;case 22:case 23:return ll(),null;case 24:return null;default:return null}}var Qi=!1,Ie=!1,Zd=typeof WeakSet=="function"?WeakSet:Set,G=null;function br(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){we(e,t,n)}else r.current=null}function uo(e,t,r){try{r()}catch(n){we(e,t,n)}}var pa=!1;function ef(e,t){if(Gn=gs,e=Lc(),No(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var d=n.anchorOffset,m=n.focusNode;n=n.focusOffset;try{r.nodeType,m.nodeType}catch{r=null;break e}var x=0,i=-1,c=-1,u=0,v=0,h=e,_=null;t:for(;;){for(var E;h!==r||d!==0&&h.nodeType!==3||(i=x+d),h!==m||n!==0&&h.nodeType!==3||(c=x+n),h.nodeType===3&&(x+=h.nodeValue.length),(E=h.firstChild)!==null;)_=h,h=E;for(;;){if(h===e)break t;if(_===r&&++u===d&&(i=x),_===m&&++v===n&&(c=x),(E=h.nextSibling)!==null)break;h=_,_=h.parentNode}h=E}r=i===-1||c===-1?null:{start:i,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Xn={focusedElem:e,selectionRange:r},gs=!1,G=t;G!==null;)if(t=G,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,G=e;else for(;G!==null;){t=G;try{var C=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var f=C.memoizedProps,s=C.memoizedState,l=t.stateNode,o=l.getSnapshotBeforeUpdate(t.elementType===t.type?f:ut(t.type,f),s);l.__reactInternalSnapshotBeforeUpdate=o}break;case 3:var a=t.stateNode.containerInfo;a.nodeType===1?a.textContent="":a.nodeType===9&&a.documentElement&&a.removeChild(a.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(V(163))}}catch(p){we(t,t.return,p)}if(e=t.sibling,e!==null){e.return=t.return,G=e;break}G=t.return}return C=pa,pa=!1,C}function ci(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var d=n=n.next;do{if((d.tag&e)===e){var m=d.destroy;d.destroy=void 0,m!==void 0&&uo(t,r,m)}d=d.next}while(d!==n)}}function Vs(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function fo(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Ch(e){var t=e.alternate;t!==null&&(e.alternate=null,Ch(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[yt],delete t[wi],delete t[Jn],delete t[Id],delete t[Fd])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function wh(e){return e.tag===5||e.tag===3||e.tag===4}function va(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||wh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function _o(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=ys));else if(n!==4&&(e=e.child,e!==null))for(_o(e,t,r),e=e.sibling;e!==null;)_o(e,t,r),e=e.sibling}function po(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(po(e,t,r),e=e.sibling;e!==null;)po(e,t,r),e=e.sibling}var Ae=null,dt=!1;function Bt(e,t,r){for(r=r.child;r!==null;)Eh(e,t,r),r=r.sibling}function Eh(e,t,r){if(Ct&&typeof Ct.onCommitFiberUnmount=="function")try{Ct.onCommitFiberUnmount(Fs,r)}catch{}switch(r.tag){case 5:Ie||br(r,t);case 6:var n=Ae,d=dt;Ae=null,Bt(e,t,r),Ae=n,dt=d,Ae!==null&&(dt?(e=Ae,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ae.removeChild(r.stateNode));break;case 18:Ae!==null&&(dt?(e=Ae,r=r.stateNode,e.nodeType===8?vn(e.parentNode,r):e.nodeType===1&&vn(e,r),gi(e)):vn(Ae,r.stateNode));break;case 4:n=Ae,d=dt,Ae=r.stateNode.containerInfo,dt=!0,Bt(e,t,r),Ae=n,dt=d;break;case 0:case 11:case 14:case 15:if(!Ie&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){d=n=n.next;do{var m=d,x=m.destroy;m=m.tag,x!==void 0&&(m&2||m&4)&&uo(r,t,x),d=d.next}while(d!==n)}Bt(e,t,r);break;case 1:if(!Ie&&(br(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(i){we(r,t,i)}Bt(e,t,r);break;case 21:Bt(e,t,r);break;case 22:r.mode&1?(Ie=(n=Ie)||r.memoizedState!==null,Bt(e,t,r),Ie=n):Bt(e,t,r);break;default:Bt(e,t,r)}}function ga(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Zd),t.forEach(function(n){var d=hf.bind(null,e,n);r.has(n)||(r.add(n),n.then(d,d))})}}function ht(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var d=r[n];try{var m=e,x=t,i=x;e:for(;i!==null;){switch(i.tag){case 5:Ae=i.stateNode,dt=!1;break e;case 3:Ae=i.stateNode.containerInfo,dt=!0;break e;case 4:Ae=i.stateNode.containerInfo,dt=!0;break e}i=i.return}if(Ae===null)throw Error(V(160));Eh(m,x,d),Ae=null,dt=!1;var c=d.alternate;c!==null&&(c.return=null),d.return=null}catch(u){we(d,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)xh(t,e),t=t.sibling}function xh(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ht(t,e),mt(e),n&4){try{ci(3,e,e.return),Vs(3,e)}catch(f){we(e,e.return,f)}try{ci(5,e,e.return)}catch(f){we(e,e.return,f)}}break;case 1:ht(t,e),mt(e),n&512&&r!==null&&br(r,r.return);break;case 5:if(ht(t,e),mt(e),n&512&&r!==null&&br(r,r.return),e.flags&32){var d=e.stateNode;try{fi(d,"")}catch(f){we(e,e.return,f)}}if(n&4&&(d=e.stateNode,d!=null)){var m=e.memoizedProps,x=r!==null?r.memoizedProps:m,i=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{i==="input"&&m.type==="radio"&&m.name!=null&&Ka(d,m),Hn(i,x);var u=Hn(i,m);for(x=0;x<c.length;x+=2){var v=c[x],h=c[x+1];v==="style"?Qa(d,h):v==="dangerouslySetInnerHTML"?Xa(d,h):v==="children"?fi(d,h):bo(d,v,h,u)}switch(i){case"input":Pn(d,m);break;case"textarea":qa(d,m);break;case"select":var _=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!m.multiple;var E=m.value;E!=null?Rr(d,!!m.multiple,E,!1):_!==!!m.multiple&&(m.defaultValue!=null?Rr(d,!!m.multiple,m.defaultValue,!0):Rr(d,!!m.multiple,m.multiple?[]:"",!1))}d[wi]=m}catch(f){we(e,e.return,f)}}break;case 6:if(ht(t,e),mt(e),n&4){if(e.stateNode===null)throw Error(V(162));d=e.stateNode,m=e.memoizedProps;try{d.nodeValue=m}catch(f){we(e,e.return,f)}}break;case 3:if(ht(t,e),mt(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{gi(t.containerInfo)}catch(f){we(e,e.return,f)}break;case 4:ht(t,e),mt(e);break;case 13:ht(t,e),mt(e),d=e.child,d.flags&8192&&(m=d.memoizedState!==null,d.stateNode.isHidden=m,!m||d.alternate!==null&&d.alternate.memoizedState!==null||(nl=Ee())),n&4&&ga(e);break;case 22:if(v=r!==null&&r.memoizedState!==null,e.mode&1?(Ie=(u=Ie)||v,ht(t,e),Ie=u):ht(t,e),mt(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!v&&e.mode&1)for(G=e,v=e.child;v!==null;){for(h=G=v;G!==null;){switch(_=G,E=_.child,_.tag){case 0:case 11:case 14:case 15:ci(4,_,_.return);break;case 1:br(_,_.return);var C=_.stateNode;if(typeof C.componentWillUnmount=="function"){n=_,r=_.return;try{t=n,C.props=t.memoizedProps,C.state=t.memoizedState,C.componentWillUnmount()}catch(f){we(n,r,f)}}break;case 5:br(_,_.return);break;case 22:if(_.memoizedState!==null){Sa(h);continue}}E!==null?(E.return=_,G=E):Sa(h)}v=v.sibling}e:for(v=null,h=e;;){if(h.tag===5){if(v===null){v=h;try{d=h.stateNode,u?(m=d.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(i=h.stateNode,c=h.memoizedProps.style,x=c!=null&&c.hasOwnProperty("display")?c.display:null,i.style.display=Ya("display",x))}catch(f){we(e,e.return,f)}}}else if(h.tag===6){if(v===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(f){we(e,e.return,f)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;v===h&&(v=null),h=h.return}v===h&&(v=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ht(t,e),mt(e),n&4&&ga(e);break;case 21:break;default:ht(t,e),mt(e)}}function mt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(wh(r)){var n=r;break e}r=r.return}throw Error(V(160))}switch(n.tag){case 5:var d=n.stateNode;n.flags&32&&(fi(d,""),n.flags&=-33);var m=va(e);po(e,m,d);break;case 3:case 4:var x=n.stateNode.containerInfo,i=va(e);_o(e,i,x);break;default:throw Error(V(161))}}catch(c){we(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function tf(e,t,r){G=e,Lh(e)}function Lh(e,t,r){for(var n=(e.mode&1)!==0;G!==null;){var d=G,m=d.child;if(d.tag===22&&n){var x=d.memoizedState!==null||Qi;if(!x){var i=d.alternate,c=i!==null&&i.memoizedState!==null||Ie;i=Qi;var u=Ie;if(Qi=x,(Ie=c)&&!u)for(G=d;G!==null;)x=G,c=x.child,x.tag===22&&x.memoizedState!==null?ya(d):c!==null?(c.return=x,G=c):ya(d);for(;m!==null;)G=m,Lh(m),m=m.sibling;G=d,Qi=i,Ie=u}ma(e)}else d.subtreeFlags&8772&&m!==null?(m.return=d,G=m):ma(e)}}function ma(e){for(;G!==null;){var t=G;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ie||Vs(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Ie)if(r===null)n.componentDidMount();else{var d=t.elementType===t.type?r.memoizedProps:ut(t.type,r.memoizedProps);n.componentDidUpdate(d,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var m=t.updateQueue;m!==null&&ra(t,m,n);break;case 3:var x=t.updateQueue;if(x!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}ra(t,x,r)}break;case 5:var i=t.stateNode;if(r===null&&t.flags&4){r=i;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var v=u.memoizedState;if(v!==null){var h=v.dehydrated;h!==null&&gi(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(V(163))}Ie||t.flags&512&&fo(t)}catch(_){we(t,t.return,_)}}if(t===e){G=null;break}if(r=t.sibling,r!==null){r.return=t.return,G=r;break}G=t.return}}function Sa(e){for(;G!==null;){var t=G;if(t===e){G=null;break}var r=t.sibling;if(r!==null){r.return=t.return,G=r;break}G=t.return}}function ya(e){for(;G!==null;){var t=G;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Vs(4,t)}catch(c){we(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var d=t.return;try{n.componentDidMount()}catch(c){we(t,d,c)}}var m=t.return;try{fo(t)}catch(c){we(t,m,c)}break;case 5:var x=t.return;try{fo(t)}catch(c){we(t,x,c)}}}catch(c){we(t,t.return,c)}if(t===e){G=null;break}var i=t.sibling;if(i!==null){i.return=t.return,G=i;break}G=t.return}}var rf=Math.ceil,As=Pt.ReactCurrentDispatcher,il=Pt.ReactCurrentOwner,ot=Pt.ReactCurrentBatchConfig,ae=0,Me=null,Le=null,Te=0,Ye=0,kr=Jt(0),Re=0,Ri=null,hr=0,Ks=0,sl=0,hi=null,je=null,nl=0,$r=1/0,xt=null,Ts=!1,vo=null,Kt=null,Ji=!1,$t=null,Ps=0,ui=0,go=null,cs=-1,hs=0;function Ne(){return ae&6?Ee():cs!==-1?cs:cs=Ee()}function qt(e){return e.mode&1?ae&2&&Te!==0?Te&-Te:Nd.transition!==null?(hs===0&&(hs=cc()),hs):(e=he,e!==0||(e=window.event,e=e===void 0?16:vc(e.type)),e):1}function pt(e,t,r,n){if(50<ui)throw ui=0,go=null,Error(V(185));Mi(e,r,n),(!(ae&2)||e!==Me)&&(e===Me&&(!(ae&2)&&(Ks|=r),Re===4&&Ht(e,Te)),Ge(e,n),r===1&&ae===0&&!(t.mode&1)&&($r=Ee()+500,Us&&Zt()))}function Ge(e,t){var r=e.callbackNode;Nu(e,t);var n=vs(e,e===Me?Te:0);if(n===0)r!==null&&Dl(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Dl(r),t===1)e.tag===0?Hd(Ca.bind(null,e)):Oc(Ca.bind(null,e)),Bd(function(){!(ae&6)&&Zt()}),r=null;else{switch(hc(n)){case 1:r=Ao;break;case 4:r=lc;break;case 16:r=ps;break;case 536870912:r=ac;break;default:r=ps}r=Ph(r,bh.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function bh(e,t){if(cs=-1,hs=0,ae&6)throw Error(V(327));var r=e.callbackNode;if(Pr()&&e.callbackNode!==r)return null;var n=vs(e,e===Me?Te:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Bs(e,n);else{t=n;var d=ae;ae|=2;var m=Rh();(Me!==e||Te!==t)&&(xt=null,$r=Ee()+500,nr(e,t));do try{of();break}catch(i){kh(e,i)}while(!0);jo(),As.current=m,ae=d,Le!==null?t=0:(Me=null,Te=0,t=Re)}if(t!==0){if(t===2&&(d=Wn(e),d!==0&&(n=d,t=mo(e,d))),t===1)throw r=Ri,nr(e,0),Ht(e,n),Ge(e,Ee()),r;if(t===6)Ht(e,n);else{if(d=e.current.alternate,!(n&30)&&!sf(d)&&(t=Bs(e,n),t===2&&(m=Wn(e),m!==0&&(n=m,t=mo(e,m))),t===1))throw r=Ri,nr(e,0),Ht(e,n),Ge(e,Ee()),r;switch(e.finishedWork=d,e.finishedLanes=n,t){case 0:case 1:throw Error(V(345));case 2:tr(e,je,xt);break;case 3:if(Ht(e,n),(n&130023424)===n&&(t=nl+500-Ee(),10<t)){if(vs(e,0)!==0)break;if(d=e.suspendedLanes,(d&n)!==n){Ne(),e.pingedLanes|=e.suspendedLanes&d;break}e.timeoutHandle=Qn(tr.bind(null,e,je,xt),t);break}tr(e,je,xt);break;case 4:if(Ht(e,n),(n&4194240)===n)break;for(t=e.eventTimes,d=-1;0<n;){var x=31-_t(n);m=1<<x,x=t[x],x>d&&(d=x),n&=~m}if(n=d,n=Ee()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*rf(n/1960))-n,10<n){e.timeoutHandle=Qn(tr.bind(null,e,je,xt),n);break}tr(e,je,xt);break;case 5:tr(e,je,xt);break;default:throw Error(V(329))}}}return Ge(e,Ee()),e.callbackNode===r?bh.bind(null,e):null}function mo(e,t){var r=hi;return e.current.memoizedState.isDehydrated&&(nr(e,t).flags|=256),e=Bs(e,t),e!==2&&(t=je,je=r,t!==null&&So(t)),e}function So(e){je===null?je=e:je.push.apply(je,e)}function sf(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var d=r[n],m=d.getSnapshot;d=d.value;try{if(!vt(m(),d))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ht(e,t){for(t&=~sl,t&=~Ks,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-_t(t),n=1<<r;e[r]=-1,t&=~n}}function Ca(e){if(ae&6)throw Error(V(327));Pr();var t=vs(e,0);if(!(t&1))return Ge(e,Ee()),null;var r=Bs(e,t);if(e.tag!==0&&r===2){var n=Wn(e);n!==0&&(t=n,r=mo(e,n))}if(r===1)throw r=Ri,nr(e,0),Ht(e,t),Ge(e,Ee()),r;if(r===6)throw Error(V(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,tr(e,je,xt),Ge(e,Ee()),null}function ol(e,t){var r=ae;ae|=1;try{return e(t)}finally{ae=r,ae===0&&($r=Ee()+500,Us&&Zt())}}function ur(e){$t!==null&&$t.tag===0&&!(ae&6)&&Pr();var t=ae;ae|=1;var r=ot.transition,n=he;try{if(ot.transition=null,he=1,e)return e()}finally{he=n,ot.transition=r,ae=t,!(ae&6)&&Zt()}}function ll(){Ye=kr.current,pe(kr)}function nr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Pd(r)),Le!==null)for(r=Le.return;r!==null;){var n=r;switch(zo(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Cs();break;case 3:Hr(),pe(Ke),pe(Fe),Yo();break;case 5:Xo(n);break;case 4:Hr();break;case 13:pe(ge);break;case 19:pe(ge);break;case 10:Vo(n.type._context);break;case 22:case 23:ll()}r=r.return}if(Me=e,Le=e=Gt(e.current,null),Te=Ye=t,Re=0,Ri=null,sl=Ks=hr=0,je=hi=null,ir!==null){for(t=0;t<ir.length;t++)if(r=ir[t],n=r.interleaved,n!==null){r.interleaved=null;var d=n.next,m=r.pending;if(m!==null){var x=m.next;m.next=d,n.next=x}r.pending=n}ir=null}return e}function kh(e,t){do{var r=Le;try{if(jo(),os.current=Ms,Ds){for(var n=me.memoizedState;n!==null;){var d=n.queue;d!==null&&(d.pending=null),n=n.next}Ds=!1}if(cr=0,De=be=me=null,ai=!1,Li=0,il.current=null,r===null||r.return===null){Re=1,Ri=t,Le=null;break}e:{var m=e,x=r.return,i=r,c=t;if(t=Te,i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,v=i,h=v.tag;if(!(v.mode&1)&&(h===0||h===11||h===15)){var _=v.alternate;_?(v.updateQueue=_.updateQueue,v.memoizedState=_.memoizedState,v.lanes=_.lanes):(v.updateQueue=null,v.memoizedState=null)}var E=aa(x);if(E!==null){E.flags&=-257,ca(E,x,i,m,t),E.mode&1&&la(m,u,t),t=E,c=u;var C=t.updateQueue;if(C===null){var f=new Set;f.add(c),t.updateQueue=f}else C.add(c);break e}else{if(!(t&1)){la(m,u,t),al();break e}c=Error(V(426))}}else if(ve&&i.mode&1){var s=aa(x);if(s!==null){!(s.flags&65536)&&(s.flags|=256),ca(s,x,i,m,t),Uo(Nr(c,i));break e}}m=c=Nr(c,i),Re!==4&&(Re=2),hi===null?hi=[m]:hi.push(m),m=x;do{switch(m.tag){case 3:m.flags|=65536,t&=-t,m.lanes|=t;var l=hh(m,c,t);ta(m,l);break e;case 1:i=c;var o=m.type,a=m.stateNode;if(!(m.flags&128)&&(typeof o.getDerivedStateFromError=="function"||a!==null&&typeof a.componentDidCatch=="function"&&(Kt===null||!Kt.has(a)))){m.flags|=65536,t&=-t,m.lanes|=t;var p=uh(m,i,t);ta(m,p);break e}}m=m.return}while(m!==null)}Mh(r)}catch(S){t=S,Le===r&&r!==null&&(Le=r=r.return);continue}break}while(!0)}function Rh(){var e=As.current;return As.current=Ms,e===null?Ms:e}function al(){(Re===0||Re===3||Re===2)&&(Re=4),Me===null||!(hr&268435455)&&!(Ks&268435455)||Ht(Me,Te)}function Bs(e,t){var r=ae;ae|=2;var n=Rh();(Me!==e||Te!==t)&&(xt=null,nr(e,t));do try{nf();break}catch(d){kh(e,d)}while(!0);if(jo(),ae=r,As.current=n,Le!==null)throw Error(V(261));return Me=null,Te=0,Re}function nf(){for(;Le!==null;)Dh(Le)}function of(){for(;Le!==null&&!Mu();)Dh(Le)}function Dh(e){var t=Th(e.alternate,e,Ye);e.memoizedProps=e.pendingProps,t===null?Mh(e):Le=t,il.current=null}function Mh(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Jd(r,t),r!==null){r.flags&=32767,Le=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Re=6,Le=null;return}}else if(r=Qd(r,t,Ye),r!==null){Le=r;return}if(t=t.sibling,t!==null){Le=t;return}Le=t=e}while(t!==null);Re===0&&(Re=5)}function tr(e,t,r){var n=he,d=ot.transition;try{ot.transition=null,he=1,lf(e,t,r,n)}finally{ot.transition=d,he=n}return null}function lf(e,t,r,n){do Pr();while($t!==null);if(ae&6)throw Error(V(327));r=e.finishedWork;var d=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(V(177));e.callbackNode=null,e.callbackPriority=0;var m=r.lanes|r.childLanes;if($u(e,m),e===Me&&(Le=Me=null,Te=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ji||(Ji=!0,Ph(ps,function(){return Pr(),null})),m=(r.flags&15990)!==0,r.subtreeFlags&15990||m){m=ot.transition,ot.transition=null;var x=he;he=1;var i=ae;ae|=4,il.current=null,ef(e,r),xh(r,e),bd(Xn),gs=!!Gn,Xn=Gn=null,e.current=r,tf(r),Au(),ae=i,he=x,ot.transition=m}else e.current=r;if(Ji&&(Ji=!1,$t=e,Ps=d),m=e.pendingLanes,m===0&&(Kt=null),Bu(r.stateNode),Ge(e,Ee()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)d=t[r],n(d.value,{componentStack:d.stack,digest:d.digest});if(Ts)throw Ts=!1,e=vo,vo=null,e;return Ps&1&&e.tag!==0&&Pr(),m=e.pendingLanes,m&1?e===go?ui++:(ui=0,go=e):ui=0,Zt(),null}function Pr(){if($t!==null){var e=hc(Ps),t=ot.transition,r=he;try{if(ot.transition=null,he=16>e?16:e,$t===null)var n=!1;else{if(e=$t,$t=null,Ps=0,ae&6)throw Error(V(331));var d=ae;for(ae|=4,G=e.current;G!==null;){var m=G,x=m.child;if(G.flags&16){var i=m.deletions;if(i!==null){for(var c=0;c<i.length;c++){var u=i[c];for(G=u;G!==null;){var v=G;switch(v.tag){case 0:case 11:case 15:ci(8,v,m)}var h=v.child;if(h!==null)h.return=v,G=h;else for(;G!==null;){v=G;var _=v.sibling,E=v.return;if(Ch(v),v===u){G=null;break}if(_!==null){_.return=E,G=_;break}G=E}}}var C=m.alternate;if(C!==null){var f=C.child;if(f!==null){C.child=null;do{var s=f.sibling;f.sibling=null,f=s}while(f!==null)}}G=m}}if(m.subtreeFlags&2064&&x!==null)x.return=m,G=x;else e:for(;G!==null;){if(m=G,m.flags&2048)switch(m.tag){case 0:case 11:case 15:ci(9,m,m.return)}var l=m.sibling;if(l!==null){l.return=m.return,G=l;break e}G=m.return}}var o=e.current;for(G=o;G!==null;){x=G;var a=x.child;if(x.subtreeFlags&2064&&a!==null)a.return=x,G=a;else e:for(x=o;G!==null;){if(i=G,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:Vs(9,i)}}catch(S){we(i,i.return,S)}if(i===x){G=null;break e}var p=i.sibling;if(p!==null){p.return=i.return,G=p;break e}G=i.return}}if(ae=d,Zt(),Ct&&typeof Ct.onPostCommitFiberRoot=="function")try{Ct.onPostCommitFiberRoot(Fs,e)}catch{}n=!0}return n}finally{he=r,ot.transition=t}}return!1}function wa(e,t,r){t=Nr(r,t),t=hh(e,t,1),e=Vt(e,t,1),t=Ne(),e!==null&&(Mi(e,1,t),Ge(e,t))}function we(e,t,r){if(e.tag===3)wa(e,e,r);else for(;t!==null;){if(t.tag===3){wa(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Kt===null||!Kt.has(n))){e=Nr(r,e),e=uh(t,e,1),t=Vt(t,e,1),e=Ne(),t!==null&&(Mi(t,1,e),Ge(t,e));break}}t=t.return}}function af(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Ne(),e.pingedLanes|=e.suspendedLanes&r,Me===e&&(Te&r)===r&&(Re===4||Re===3&&(Te&130023424)===Te&&500>Ee()-nl?nr(e,0):sl|=r),Ge(e,t)}function Ah(e,t){t===0&&(e.mode&1?(t=Ui,Ui<<=1,!(Ui&130023424)&&(Ui=4194304)):t=1);var r=Ne();e=At(e,t),e!==null&&(Mi(e,t,r),Ge(e,r))}function cf(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Ah(e,r)}function hf(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,d=e.memoizedState;d!==null&&(r=d.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(V(314))}n!==null&&n.delete(t),Ah(e,r)}var Th;Th=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ke.current)Ve=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Ve=!1,Yd(e,t,r);Ve=!!(e.flags&131072)}else Ve=!1,ve&&t.flags&1048576&&Ic(t,xs,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;as(e,t),e=t.pendingProps;var d=Or(t,Fe.current);Tr(t,r),d=Jo(null,t,n,e,d,r);var m=Zo();return t.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,qe(n)?(m=!0,ws(t)):m=!1,t.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,qo(t),d.updater=js,t.stateNode=d,d._reactInternals=t,so(t,n,e,r),t=lo(null,t,n,!0,m,r)):(t.tag=0,ve&&m&&$o(t),He(null,t,d,r),t=t.child),t;case 16:n=t.elementType;e:{switch(as(e,t),e=t.pendingProps,d=n._init,n=d(n._payload),t.type=n,d=t.tag=df(n),e=ut(n,e),d){case 0:t=oo(null,t,n,e,r);break e;case 1:t=da(null,t,n,e,r);break e;case 11:t=ha(null,t,n,e,r);break e;case 14:t=ua(null,t,n,ut(n.type,e),r);break e}throw Error(V(306,n,""))}return t;case 0:return n=t.type,d=t.pendingProps,d=t.elementType===n?d:ut(n,d),oo(e,t,n,d,r);case 1:return n=t.type,d=t.pendingProps,d=t.elementType===n?d:ut(n,d),da(e,t,n,d,r);case 3:e:{if(ph(t),e===null)throw Error(V(387));n=t.pendingProps,m=t.memoizedState,d=m.element,Uc(e,t),ks(t,n,null,r);var x=t.memoizedState;if(n=x.element,m.isDehydrated)if(m={element:n,isDehydrated:!1,cache:x.cache,pendingSuspenseBoundaries:x.pendingSuspenseBoundaries,transitions:x.transitions},t.updateQueue.baseState=m,t.memoizedState=m,t.flags&256){d=Nr(Error(V(423)),t),t=fa(e,t,n,r,d);break e}else if(n!==d){d=Nr(Error(V(424)),t),t=fa(e,t,n,r,d);break e}else for(Qe=jt(t.stateNode.containerInfo.firstChild),Je=t,ve=!0,ft=null,r=$c(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ir(),n===d){t=Tt(e,t,r);break e}He(e,t,n,r)}t=t.child}return t;case 5:return Wc(t),e===null&&to(t),n=t.type,d=t.pendingProps,m=e!==null?e.memoizedProps:null,x=d.children,Yn(n,d)?x=null:m!==null&&Yn(n,m)&&(t.flags|=32),_h(e,t),He(e,t,x,r),t.child;case 6:return e===null&&to(t),null;case 13:return vh(e,t,r);case 4:return Go(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Fr(t,null,n,r):He(e,t,n,r),t.child;case 11:return n=t.type,d=t.pendingProps,d=t.elementType===n?d:ut(n,d),ha(e,t,n,d,r);case 7:return He(e,t,t.pendingProps,r),t.child;case 8:return He(e,t,t.pendingProps.children,r),t.child;case 12:return He(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,d=t.pendingProps,m=t.memoizedProps,x=d.value,de(Ls,n._currentValue),n._currentValue=x,m!==null)if(vt(m.value,x)){if(m.children===d.children&&!Ke.current){t=Tt(e,t,r);break e}}else for(m=t.child,m!==null&&(m.return=t);m!==null;){var i=m.dependencies;if(i!==null){x=m.child;for(var c=i.firstContext;c!==null;){if(c.context===n){if(m.tag===1){c=Rt(-1,r&-r),c.tag=2;var u=m.updateQueue;if(u!==null){u=u.shared;var v=u.pending;v===null?c.next=c:(c.next=v.next,v.next=c),u.pending=c}}m.lanes|=r,c=m.alternate,c!==null&&(c.lanes|=r),ro(m.return,r,t),i.lanes|=r;break}c=c.next}}else if(m.tag===10)x=m.type===t.type?null:m.child;else if(m.tag===18){if(x=m.return,x===null)throw Error(V(341));x.lanes|=r,i=x.alternate,i!==null&&(i.lanes|=r),ro(x,r,t),x=m.sibling}else x=m.child;if(x!==null)x.return=m;else for(x=m;x!==null;){if(x===t){x=null;break}if(m=x.sibling,m!==null){m.return=x.return,x=m;break}x=x.return}m=x}He(e,t,d.children,r),t=t.child}return t;case 9:return d=t.type,n=t.pendingProps.children,Tr(t,r),d=lt(d),n=n(d),t.flags|=1,He(e,t,n,r),t.child;case 14:return n=t.type,d=ut(n,t.pendingProps),d=ut(n.type,d),ua(e,t,n,d,r);case 15:return dh(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,d=t.pendingProps,d=t.elementType===n?d:ut(n,d),as(e,t),t.tag=1,qe(n)?(e=!0,ws(t)):e=!1,Tr(t,r),ch(t,n,d),so(t,n,d,r),lo(null,t,n,!0,e,r);case 19:return gh(e,t,r);case 22:return fh(e,t,r)}throw Error(V(156,t.tag))};function Ph(e,t){return oc(e,t)}function uf(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nt(e,t,r,n){return new uf(e,t,r,n)}function cl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function df(e){if(typeof e=="function")return cl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ro)return 11;if(e===Do)return 14}return 2}function Gt(e,t){var r=e.alternate;return r===null?(r=nt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function us(e,t,r,n,d,m){var x=2;if(n=e,typeof e=="function")cl(e)&&(x=1);else if(typeof e=="string")x=5;else e:switch(e){case gr:return or(r.children,d,m,t);case ko:x=8,d|=8;break;case Rn:return e=nt(12,r,t,d|2),e.elementType=Rn,e.lanes=m,e;case Dn:return e=nt(13,r,t,d),e.elementType=Dn,e.lanes=m,e;case Mn:return e=nt(19,r,t,d),e.elementType=Mn,e.lanes=m,e;case Wa:return qs(r,d,m,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case za:x=10;break e;case Ua:x=9;break e;case Ro:x=11;break e;case Do:x=14;break e;case Ot:x=16,n=null;break e}throw Error(V(130,e==null?e:typeof e,""))}return t=nt(x,r,t,d),t.elementType=e,t.type=n,t.lanes=m,t}function or(e,t,r,n){return e=nt(7,e,n,t),e.lanes=r,e}function qs(e,t,r,n){return e=nt(22,e,n,t),e.elementType=Wa,e.lanes=r,e.stateNode={isHidden:!1},e}function xn(e,t,r){return e=nt(6,e,null,t),e.lanes=r,e}function Ln(e,t,r){return t=nt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ff(e,t,r,n,d){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nn(0),this.expirationTimes=nn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nn(0),this.identifierPrefix=n,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function hl(e,t,r,n,d,m,x,i,c){return e=new ff(e,t,r,i,c),t===1?(t=1,m===!0&&(t|=8)):t=0,m=nt(3,null,null,t),e.current=m,m.stateNode=e,m.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},qo(m),e}function _f(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:vr,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Bh(e){if(!e)return Yt;e=e._reactInternals;e:{if(fr(e)!==e||e.tag!==1)throw Error(V(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(qe(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(V(171))}if(e.tag===1){var r=e.type;if(qe(r))return Bc(e,r,t)}return t}function Oh(e,t,r,n,d,m,x,i,c){return e=hl(r,n,!0,e,d,m,x,i,c),e.context=Bh(null),r=e.current,n=Ne(),d=qt(r),m=Rt(n,d),m.callback=t??null,Vt(r,m,d),e.current.lanes=d,Mi(e,d,n),Ge(e,n),e}function Gs(e,t,r,n){var d=t.current,m=Ne(),x=qt(d);return r=Bh(r),t.context===null?t.context=r:t.pendingContext=r,t=Rt(m,x),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Vt(d,t,x),e!==null&&(pt(e,d,x,m),ns(e,d,x)),x}function Os(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Ea(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function ul(e,t){Ea(e,t),(e=e.alternate)&&Ea(e,t)}function pf(){return null}var Ih=typeof reportError=="function"?reportError:function(e){console.error(e)};function dl(e){this._internalRoot=e}Xs.prototype.render=dl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(V(409));Gs(e,t,null,null)};Xs.prototype.unmount=dl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ur(function(){Gs(null,e,null,null)}),t[Mt]=null}};function Xs(e){this._internalRoot=e}Xs.prototype.unstable_scheduleHydration=function(e){if(e){var t=fc();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Ft.length&&t!==0&&t<Ft[r].priority;r++);Ft.splice(r,0,e),r===0&&pc(e)}};function fl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ys(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function xa(){}function vf(e,t,r,n,d){if(d){if(typeof n=="function"){var m=n;n=function(){var u=Os(x);m.call(u)}}var x=Oh(t,n,e,0,null,!1,!1,"",xa);return e._reactRootContainer=x,e[Mt]=x.current,yi(e.nodeType===8?e.parentNode:e),ur(),x}for(;d=e.lastChild;)e.removeChild(d);if(typeof n=="function"){var i=n;n=function(){var u=Os(c);i.call(u)}}var c=hl(e,0,!1,null,null,!1,!1,"",xa);return e._reactRootContainer=c,e[Mt]=c.current,yi(e.nodeType===8?e.parentNode:e),ur(function(){Gs(t,c,r,n)}),c}function Qs(e,t,r,n,d){var m=r._reactRootContainer;if(m){var x=m;if(typeof d=="function"){var i=d;d=function(){var c=Os(x);i.call(c)}}Gs(t,x,e,d)}else x=vf(r,t,e,d,n);return Os(x)}uc=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ti(t.pendingLanes);r!==0&&(To(t,r|1),Ge(t,Ee()),!(ae&6)&&($r=Ee()+500,Zt()))}break;case 13:ur(function(){var n=At(e,1);if(n!==null){var d=Ne();pt(n,e,1,d)}}),ul(e,1)}};Po=function(e){if(e.tag===13){var t=At(e,134217728);if(t!==null){var r=Ne();pt(t,e,134217728,r)}ul(e,134217728)}};dc=function(e){if(e.tag===13){var t=qt(e),r=At(e,t);if(r!==null){var n=Ne();pt(r,e,t,n)}ul(e,t)}};fc=function(){return he};_c=function(e,t){var r=he;try{return he=e,t()}finally{he=r}};$n=function(e,t,r){switch(t){case"input":if(Pn(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var d=zs(n);if(!d)throw Error(V(90));Va(n),Pn(n,d)}}}break;case"textarea":qa(e,r);break;case"select":t=r.value,t!=null&&Rr(e,!!r.multiple,t,!1)}};ec=ol;tc=ur;var gf={usingClientEntryPoint:!1,Events:[Ti,Cr,zs,Ja,Za,ol]},Jr={findFiberByHostInstance:rr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},mf={bundleType:Jr.bundleType,version:Jr.version,rendererPackageName:Jr.rendererPackageName,rendererConfig:Jr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Pt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=sc(e),e===null?null:e.stateNode},findFiberByHostInstance:Jr.findFiberByHostInstance||pf,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zi.isDisabled&&Zi.supportsFiber)try{Fs=Zi.inject(mf),Ct=Zi}catch{}}et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gf;et.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fl(t))throw Error(V(200));return _f(e,t,null,r)};et.createRoot=function(e,t){if(!fl(e))throw Error(V(299));var r=!1,n="",d=Ih;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(d=t.onRecoverableError)),t=hl(e,1,!1,null,null,r,!1,n,d),e[Mt]=t.current,yi(e.nodeType===8?e.parentNode:e),new dl(t)};et.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(V(188)):(e=Object.keys(e).join(","),Error(V(268,e)));return e=sc(t),e=e===null?null:e.stateNode,e};et.flushSync=function(e){return ur(e)};et.hydrate=function(e,t,r){if(!Ys(t))throw Error(V(200));return Qs(null,e,t,!0,r)};et.hydrateRoot=function(e,t,r){if(!fl(e))throw Error(V(405));var n=r!=null&&r.hydratedSources||null,d=!1,m="",x=Ih;if(r!=null&&(r.unstable_strictMode===!0&&(d=!0),r.identifierPrefix!==void 0&&(m=r.identifierPrefix),r.onRecoverableError!==void 0&&(x=r.onRecoverableError)),t=Oh(t,null,e,1,r??null,d,!1,m,x),e[Mt]=t.current,yi(e),n)for(e=0;e<n.length;e++)r=n[e],d=r._getVersion,d=d(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,d]:t.mutableSourceEagerHydrationData.push(r,d);return new Xs(t)};et.render=function(e,t,r){if(!Ys(t))throw Error(V(200));return Qs(null,e,t,!1,r)};et.unmountComponentAtNode=function(e){if(!Ys(e))throw Error(V(40));return e._reactRootContainer?(ur(function(){Qs(null,null,e,!1,function(){e._reactRootContainer=null,e[Mt]=null})}),!0):!1};et.unstable_batchedUpdates=ol;et.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Ys(r))throw Error(V(200));if(e==null||e._reactInternals===void 0)throw Error(V(38));return Qs(e,t,r,!1,n)};et.version="18.3.1-next-f1338f8080-20240426";function Fh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Fh)}catch(e){console.error(e)}}Fh(),Fa.exports=et;var Sf=Fa.exports,La=Sf;bn.createRoot=La.createRoot,bn.hydrateRoot=La.hydrateRoot;const We="http://localhost:3001";async function Xe(e){if(!e.ok)throw new Error(await e.text());return e.json()}const ke={listProjects:()=>fetch(`${We}/api/projects`).then(Xe),createProject:e=>fetch(`${We}/api/projects`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(Xe),importProject:e=>fetch(`${We}/api/projects/import`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cwd:e})}).then(Xe),updateProject:(e,t)=>fetch(`${We}/api/projects/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(Xe),deleteProject:e=>fetch(`${We}/api/projects/${e}`,{method:"DELETE"}).then(Xe),listSessions:()=>fetch(`${We}/api/sessions`).then(Xe),getSession:e=>fetch(`${We}/api/sessions/${e}`).then(Xe),createSession:e=>fetch(`${We}/api/sessions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(Xe),stopSession:e=>fetch(`${We}/api/sessions/${e}/stop`,{method:"POST"}).then(Xe),deleteSession:e=>fetch(`${We}/api/sessions/${e}`,{method:"DELETE"}).then(Xe),resize:(e,t,r)=>fetch(`${We}/api/sessions/${e}/resize`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cols:t,rows:r})}).then(Xe),scrollback:(e,t)=>fetch(`${We}/api/sessions/${e}/scrollback?from=${t}`).then(Xe),input:(e,t)=>fetch(`${We}/api/sessions/${e}/input`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(Xe)};function yf(e){return We.replace(/^http/,"ws")+e}function Cf({onOpen:e}){const[t,r]=oe.useState([]),[n,d]=oe.useState("demo"),[m,x]=oe.useState(""),[i,c]=oe.useState("Shell");oe.useEffect(()=>{ke.listProjects().then(r).catch(()=>{})},[]);const u=async()=>{const v=await ke.createProject({name:n,cwd:m,type:i});r(h=>[...h,v]);try{const h=JSON.parse(localStorage.getItem("mt.cwds")||"[]");h.includes(m)||h.push(m),localStorage.setItem("mt.cwds",JSON.stringify(h))}catch{}};return Q.jsxs("div",{children:[Q.jsxs("div",{className:"header",children:[Q.jsx("strong",{children:"Projects"}),Q.jsx("input",{placeholder:"name",value:n,onChange:v=>d(v.target.value)}),Q.jsx("input",{placeholder:"cwd (abs)",value:m,onChange:v=>x(v.target.value),style:{width:300}}),Q.jsxs("select",{value:i,onChange:v=>c(v.target.value),children:[Q.jsx("option",{children:"Shell"}),Q.jsx("option",{children:"Codex"})]}),Q.jsx("button",{className:"btn",onClick:u,children:"Add"})]}),Q.jsx("div",{style:{padding:12},children:t.map(v=>Q.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",padding:8,borderBottom:"1px solid #eee"},children:[Q.jsxs("div",{style:{flex:1},children:[Q.jsxs("div",{children:[Q.jsx("strong",{children:v.name})," ",Q.jsxs("small",{children:["(",v.type,")"]})]}),Q.jsx("div",{style:{color:"#6b7280"},children:v.cwd})]}),Q.jsx("button",{className:"btn",onClick:()=>e(v),children:"Open"}),Q.jsx("button",{className:"btn",onClick:()=>ke.deleteProject(v.id).then(()=>{r(h=>h.filter(_=>_.id!==v.id));try{const h=JSON.parse(localStorage.getItem("mt.cwds")||"[]");localStorage.setItem("mt.cwds",JSON.stringify(h.filter(_=>_!==v.cwd)))}catch{}}),children:"Delete"})]},v.id))})]})}var Hh={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(self,()=>(()=>{var r={4567:function(x,i,c){var u=this&&this.__decorate||function(a,p,S,y){var L,g=arguments.length,w=g<3?p:y===null?y=Object.getOwnPropertyDescriptor(p,S):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(a,p,S,y);else for(var b=a.length-1;b>=0;b--)(L=a[b])&&(w=(g<3?L(w):g>3?L(p,S,w):L(p,S))||w);return g>3&&w&&Object.defineProperty(p,S,w),w},v=this&&this.__param||function(a,p){return function(S,y){p(S,y,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.AccessibilityManager=void 0;const h=c(9042),_=c(6114),E=c(9924),C=c(844),f=c(5596),s=c(4725),l=c(3656);let o=i.AccessibilityManager=class extends C.Disposable{constructor(a,p){super(),this._terminal=a,this._renderService=p,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let S=0;S<this._terminal.rows;S++)this._rowElements[S]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[S]);if(this._topBoundaryFocusListener=S=>this._handleBoundaryFocus(S,0),this._bottomBoundaryFocusListener=S=>this._handleBoundaryFocus(S,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new E.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(S=>this._handleResize(S.rows))),this.register(this._terminal.onRender(S=>this._refreshRows(S.start,S.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(S=>this._handleChar(S))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(S=>this._handleTab(S))),this.register(this._terminal.onKey(S=>this._handleKey(S.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new f.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,l.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,C.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(a){for(let p=0;p<a;p++)this._handleChar(" ")}_handleChar(a){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==a&&(this._charsToAnnounce+=a):this._charsToAnnounce+=a,a===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=h.tooMuchOutput)),_.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,_.isMac&&this._liveRegion.remove()}_handleKey(a){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(a)||this._charsToConsume.push(a)}_refreshRows(a,p){this._liveRegionDebouncer.refresh(a,p,this._terminal.rows)}_renderRows(a,p){const S=this._terminal.buffer,y=S.lines.length.toString();for(let L=a;L<=p;L++){const g=S.translateBufferLineToString(S.ydisp+L,!0),w=(S.ydisp+L+1).toString(),b=this._rowElements[L];b&&(g.length===0?b.innerText="":b.textContent=g,b.setAttribute("aria-posinset",w),b.setAttribute("aria-setsize",y))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(a,p){const S=a.target,y=this._rowElements[p===0?1:this._rowElements.length-2];if(S.getAttribute("aria-posinset")===(p===0?"1":`${this._terminal.buffer.lines.length}`)||a.relatedTarget!==y)return;let L,g;if(p===0?(L=S,g=this._rowElements.pop(),this._rowContainer.removeChild(g)):(L=this._rowElements.shift(),g=S,this._rowContainer.removeChild(L)),L.removeEventListener("focus",this._topBoundaryFocusListener),g.removeEventListener("focus",this._bottomBoundaryFocusListener),p===0){const w=this._createAccessibilityTreeNode();this._rowElements.unshift(w),this._rowContainer.insertAdjacentElement("afterbegin",w)}else{const w=this._createAccessibilityTreeNode();this._rowElements.push(w),this._rowContainer.appendChild(w)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(p===0?-1:1),this._rowElements[p===0?1:this._rowElements.length-2].focus(),a.preventDefault(),a.stopImmediatePropagation()}_handleResize(a){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let p=this._rowContainer.children.length;p<this._terminal.rows;p++)this._rowElements[p]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[p]);for(;this._rowElements.length>a;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const a=document.createElement("div");return a.setAttribute("role","listitem"),a.tabIndex=-1,this._refreshRowDimensions(a),a}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let a=0;a<this._terminal.rows;a++)this._refreshRowDimensions(this._rowElements[a])}}_refreshRowDimensions(a){a.style.height=`${this._renderService.dimensions.css.cell.height}px`}};i.AccessibilityManager=o=u([v(1,s.IRenderService)],o)},3614:(x,i)=>{function c(_){return _.replace(/\r?\n/g,"\r")}function u(_,E){return E?"\x1B[200~"+_+"\x1B[201~":_}function v(_,E,C,f){_=u(_=c(_),C.decPrivateModes.bracketedPasteMode&&f.rawOptions.ignoreBracketedPasteMode!==!0),C.triggerDataEvent(_,!0),E.value=""}function h(_,E,C){const f=C.getBoundingClientRect(),s=_.clientX-f.left-10,l=_.clientY-f.top-10;E.style.width="20px",E.style.height="20px",E.style.left=`${s}px`,E.style.top=`${l}px`,E.style.zIndex="1000",E.focus()}Object.defineProperty(i,"__esModule",{value:!0}),i.rightClickHandler=i.moveTextAreaUnderMouseCursor=i.paste=i.handlePasteEvent=i.copyHandler=i.bracketTextForPaste=i.prepareTextForTerminal=void 0,i.prepareTextForTerminal=c,i.bracketTextForPaste=u,i.copyHandler=function(_,E){_.clipboardData&&_.clipboardData.setData("text/plain",E.selectionText),_.preventDefault()},i.handlePasteEvent=function(_,E,C,f){_.stopPropagation(),_.clipboardData&&v(_.clipboardData.getData("text/plain"),E,C,f)},i.paste=v,i.moveTextAreaUnderMouseCursor=h,i.rightClickHandler=function(_,E,C,f,s){h(_,E,C),s&&f.rightClickSelect(_),E.value=f.selectionText,E.select()}},7239:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorContrastCache=void 0;const u=c(1505);i.ColorContrastCache=class{constructor(){this._color=new u.TwoKeyMap,this._css=new u.TwoKeyMap}setCss(v,h,_){this._css.set(v,h,_)}getCss(v,h){return this._css.get(v,h)}setColor(v,h,_){this._color.set(v,h,_)}getColor(v,h){return this._color.get(v,h)}clear(){this._color.clear(),this._css.clear()}}},3656:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.addDisposableDomListener=void 0,i.addDisposableDomListener=function(c,u,v,h){c.addEventListener(u,v,h);let _=!1;return{dispose:()=>{_||(_=!0,c.removeEventListener(u,v,h))}}}},6465:function(x,i,c){var u=this&&this.__decorate||function(s,l,o,a){var p,S=arguments.length,y=S<3?l:a===null?a=Object.getOwnPropertyDescriptor(l,o):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(s,l,o,a);else for(var L=s.length-1;L>=0;L--)(p=s[L])&&(y=(S<3?p(y):S>3?p(l,o,y):p(l,o))||y);return S>3&&y&&Object.defineProperty(l,o,y),y},v=this&&this.__param||function(s,l){return function(o,a){l(o,a,s)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Linkifier2=void 0;const h=c(3656),_=c(8460),E=c(844),C=c(2585);let f=i.Linkifier2=class extends E.Disposable{get currentLink(){return this._currentLink}constructor(s){super(),this._bufferService=s,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new _.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new _.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,E.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,E.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(s){return this._linkProviders.push(s),{dispose:()=>{const l=this._linkProviders.indexOf(s);l!==-1&&this._linkProviders.splice(l,1)}}}attachToDom(s,l,o){this._element=s,this._mouseService=l,this._renderService=o,this.register((0,h.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,h.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,h.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,h.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(s){if(this._lastMouseEvent=s,!this._element||!this._mouseService)return;const l=this._positionFromMouseEvent(s,this._element,this._mouseService);if(!l)return;this._isMouseOut=!1;const o=s.composedPath();for(let a=0;a<o.length;a++){const p=o[a];if(p.classList.contains("xterm"))break;if(p.classList.contains("xterm-hover"))return}this._lastBufferCell&&l.x===this._lastBufferCell.x&&l.y===this._lastBufferCell.y||(this._handleHover(l),this._lastBufferCell=l)}_handleHover(s){if(this._activeLine!==s.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(s,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,s)||(this._clearCurrentLink(),this._askForLink(s,!0))}_askForLink(s,l){var o,a;this._activeProviderReplies&&l||((o=this._activeProviderReplies)===null||o===void 0||o.forEach(S=>{S==null||S.forEach(y=>{y.link.dispose&&y.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=s.y);let p=!1;for(const[S,y]of this._linkProviders.entries())l?!((a=this._activeProviderReplies)===null||a===void 0)&&a.get(S)&&(p=this._checkLinkProviderResult(S,s,p)):y.provideLinks(s.y,L=>{var g,w;if(this._isMouseOut)return;const b=L==null?void 0:L.map(M=>({link:M}));(g=this._activeProviderReplies)===null||g===void 0||g.set(S,b),p=this._checkLinkProviderResult(S,s,p),((w=this._activeProviderReplies)===null||w===void 0?void 0:w.size)===this._linkProviders.length&&this._removeIntersectingLinks(s.y,this._activeProviderReplies)})}_removeIntersectingLinks(s,l){const o=new Set;for(let a=0;a<l.size;a++){const p=l.get(a);if(p)for(let S=0;S<p.length;S++){const y=p[S],L=y.link.range.start.y<s?0:y.link.range.start.x,g=y.link.range.end.y>s?this._bufferService.cols:y.link.range.end.x;for(let w=L;w<=g;w++){if(o.has(w)){p.splice(S--,1);break}o.add(w)}}}}_checkLinkProviderResult(s,l,o){var a;if(!this._activeProviderReplies)return o;const p=this._activeProviderReplies.get(s);let S=!1;for(let y=0;y<s;y++)this._activeProviderReplies.has(y)&&!this._activeProviderReplies.get(y)||(S=!0);if(!S&&p){const y=p.find(L=>this._linkAtPosition(L.link,l));y&&(o=!0,this._handleNewLink(y))}if(this._activeProviderReplies.size===this._linkProviders.length&&!o)for(let y=0;y<this._activeProviderReplies.size;y++){const L=(a=this._activeProviderReplies.get(y))===null||a===void 0?void 0:a.find(g=>this._linkAtPosition(g.link,l));if(L){o=!0,this._handleNewLink(L);break}}return o}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(s){if(!this._element||!this._mouseService||!this._currentLink)return;const l=this._positionFromMouseEvent(s,this._element,this._mouseService);l&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,l)&&this._currentLink.link.activate(s,this._currentLink.link.text)}_clearCurrentLink(s,l){this._element&&this._currentLink&&this._lastMouseEvent&&(!s||!l||this._currentLink.link.range.start.y>=s&&this._currentLink.link.range.end.y<=l)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,E.disposeArray)(this._linkCacheDisposables))}_handleNewLink(s){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;const l=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);l&&this._linkAtPosition(s.link,l)&&(this._currentLink=s,this._currentLink.state={decorations:{underline:s.link.decorations===void 0||s.link.decorations.underline,pointerCursor:s.link.decorations===void 0||s.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,s.link,this._lastMouseEvent),s.link.decorations={},Object.defineProperties(s.link.decorations,{pointerCursor:{get:()=>{var o,a;return(a=(o=this._currentLink)===null||o===void 0?void 0:o.state)===null||a===void 0?void 0:a.decorations.pointerCursor},set:o=>{var a,p;!((a=this._currentLink)===null||a===void 0)&&a.state&&this._currentLink.state.decorations.pointerCursor!==o&&(this._currentLink.state.decorations.pointerCursor=o,this._currentLink.state.isHovered&&((p=this._element)===null||p===void 0||p.classList.toggle("xterm-cursor-pointer",o)))}},underline:{get:()=>{var o,a;return(a=(o=this._currentLink)===null||o===void 0?void 0:o.state)===null||a===void 0?void 0:a.decorations.underline},set:o=>{var a,p,S;!((a=this._currentLink)===null||a===void 0)&&a.state&&((S=(p=this._currentLink)===null||p===void 0?void 0:p.state)===null||S===void 0?void 0:S.decorations.underline)!==o&&(this._currentLink.state.decorations.underline=o,this._currentLink.state.isHovered&&this._fireUnderlineEvent(s.link,o))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(o=>{if(!this._currentLink)return;const a=o.start===0?0:o.start+1+this._bufferService.buffer.ydisp,p=this._bufferService.buffer.ydisp+1+o.end;if(this._currentLink.link.range.start.y>=a&&this._currentLink.link.range.end.y<=p&&(this._clearCurrentLink(a,p),this._lastMouseEvent&&this._element)){const S=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);S&&this._askForLink(S,!1)}})))}_linkHover(s,l,o){var a;!((a=this._currentLink)===null||a===void 0)&&a.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(l,!0),this._currentLink.state.decorations.pointerCursor&&s.classList.add("xterm-cursor-pointer")),l.hover&&l.hover(o,l.text)}_fireUnderlineEvent(s,l){const o=s.range,a=this._bufferService.buffer.ydisp,p=this._createLinkUnderlineEvent(o.start.x-1,o.start.y-a-1,o.end.x,o.end.y-a-1,void 0);(l?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(p)}_linkLeave(s,l,o){var a;!((a=this._currentLink)===null||a===void 0)&&a.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(l,!1),this._currentLink.state.decorations.pointerCursor&&s.classList.remove("xterm-cursor-pointer")),l.leave&&l.leave(o,l.text)}_linkAtPosition(s,l){const o=s.range.start.y*this._bufferService.cols+s.range.start.x,a=s.range.end.y*this._bufferService.cols+s.range.end.x,p=l.y*this._bufferService.cols+l.x;return o<=p&&p<=a}_positionFromMouseEvent(s,l,o){const a=o.getCoords(s,l,this._bufferService.cols,this._bufferService.rows);if(a)return{x:a[0],y:a[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(s,l,o,a,p){return{x1:s,y1:l,x2:o,y2:a,cols:this._bufferService.cols,fg:p}}};i.Linkifier2=f=u([v(0,C.IBufferService)],f)},9042:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tooMuchOutput=i.promptLabel=void 0,i.promptLabel="Terminal input",i.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(x,i,c){var u=this&&this.__decorate||function(f,s,l,o){var a,p=arguments.length,S=p<3?s:o===null?o=Object.getOwnPropertyDescriptor(s,l):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(f,s,l,o);else for(var y=f.length-1;y>=0;y--)(a=f[y])&&(S=(p<3?a(S):p>3?a(s,l,S):a(s,l))||S);return p>3&&S&&Object.defineProperty(s,l,S),S},v=this&&this.__param||function(f,s){return function(l,o){s(l,o,f)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkProvider=void 0;const h=c(511),_=c(2585);let E=i.OscLinkProvider=class{constructor(f,s,l){this._bufferService=f,this._optionsService=s,this._oscLinkService=l}provideLinks(f,s){var l;const o=this._bufferService.buffer.lines.get(f-1);if(!o)return void s(void 0);const a=[],p=this._optionsService.rawOptions.linkHandler,S=new h.CellData,y=o.getTrimmedLength();let L=-1,g=-1,w=!1;for(let b=0;b<y;b++)if(g!==-1||o.hasContent(b)){if(o.loadCell(b,S),S.hasExtendedAttrs()&&S.extended.urlId){if(g===-1){g=b,L=S.extended.urlId;continue}w=S.extended.urlId!==L}else g!==-1&&(w=!0);if(w||g!==-1&&b===y-1){const M=(l=this._oscLinkService.getLinkData(L))===null||l===void 0?void 0:l.uri;if(M){const R={start:{x:g+1,y:f},end:{x:b+(w||b!==y-1?0:1),y:f}};let T=!1;if(!(p!=null&&p.allowNonHttpProtocols))try{const B=new URL(M);["http:","https:"].includes(B.protocol)||(T=!0)}catch{T=!0}T||a.push({text:M,range:R,activate:(B,F)=>p?p.activate(B,F,R):C(0,F),hover:(B,F)=>{var H;return(H=p==null?void 0:p.hover)===null||H===void 0?void 0:H.call(p,B,F,R)},leave:(B,F)=>{var H;return(H=p==null?void 0:p.leave)===null||H===void 0?void 0:H.call(p,B,F,R)}})}w=!1,S.hasExtendedAttrs()&&S.extended.urlId?(g=b,L=S.extended.urlId):(g=-1,L=-1)}}s(a)}};function C(f,s){if(confirm(`Do you want to navigate to ${s}?

WARNING: This link could potentially be dangerous`)){const l=window.open();if(l){try{l.opener=null}catch{}l.location.href=s}else console.warn("Opening link blocked as opener could not be cleared")}}i.OscLinkProvider=E=u([v(0,_.IBufferService),v(1,_.IOptionsService),v(2,_.IOscLinkService)],E)},6193:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RenderDebouncer=void 0,i.RenderDebouncer=class{constructor(c,u){this._parentWindow=c,this._renderCallback=u,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(c){return this._refreshCallbacks.push(c),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(c,u,v){this._rowCount=v,c=c!==void 0?c:0,u=u!==void 0?u:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,c):c,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,u):u,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const c=Math.max(this._rowStart,0),u=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(c,u),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const c of this._refreshCallbacks)c(0);this._refreshCallbacks=[]}}},5596:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ScreenDprMonitor=void 0;const u=c(844);class v extends u.Disposable{constructor(_){super(),this._parentWindow=_,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,u.toDisposable)(()=>{this.clearListener()}))}setListener(_){this._listener&&this.clearListener(),this._listener=_,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var _;this._outerListener&&((_=this._resolutionMediaMatchList)===null||_===void 0||_.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}i.ScreenDprMonitor=v},3236:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Terminal=void 0;const u=c(3614),v=c(3656),h=c(6465),_=c(9042),E=c(3730),C=c(1680),f=c(3107),s=c(5744),l=c(2950),o=c(1296),a=c(428),p=c(4269),S=c(5114),y=c(8934),L=c(3230),g=c(9312),w=c(4725),b=c(6731),M=c(8055),R=c(8969),T=c(8460),B=c(844),F=c(6114),H=c(8437),I=c(2584),k=c(7399),A=c(5941),P=c(9074),O=c(2585),$=c(5435),W=c(4567),j=typeof window<"u"?window.document:null;class K extends R.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(D={}){super(D),this.browser=F,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new B.MutableDisposable),this._onCursorMove=this.register(new T.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new T.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new T.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new T.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new T.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new T.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new T.EventEmitter),this._onBlur=this.register(new T.EventEmitter),this._onA11yCharEmitter=this.register(new T.EventEmitter),this._onA11yTabEmitter=this.register(new T.EventEmitter),this._onWillOpen=this.register(new T.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(h.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(E.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(P.DecorationService),this._instantiationService.setService(O.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((N,z)=>this.refresh(N,z))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(N=>this._reportWindowsOptions(N))),this.register(this._inputHandler.onColor(N=>this._handleColorEvent(N))),this.register((0,T.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,T.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,T.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,T.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(N=>this._afterResize(N.cols,N.rows))),this.register((0,B.toDisposable)(()=>{var N,z;this._customKeyEventHandler=void 0,(z=(N=this.element)===null||N===void 0?void 0:N.parentNode)===null||z===void 0||z.removeChild(this.element)}))}_handleColorEvent(D){if(this._themeService)for(const N of D){let z,U="";switch(N.index){case 256:z="foreground",U="10";break;case 257:z="background",U="11";break;case 258:z="cursor",U="12";break;default:z="ansi",U="4;"+N.index}switch(N.type){case 0:const J=M.color.toColorRGB(z==="ansi"?this._themeService.colors.ansi[N.index]:this._themeService.colors[z]);this.coreService.triggerDataEvent(`${I.C0.ESC}]${U};${(0,A.toRgbString)(J)}${I.C1_ESCAPED.ST}`);break;case 1:if(z==="ansi")this._themeService.modifyColors(q=>q.ansi[N.index]=M.rgba.toColor(...N.color));else{const q=z;this._themeService.modifyColors(te=>te[q]=M.rgba.toColor(...N.color))}break;case 2:this._themeService.restoreColor(N.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(D){D?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(W.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(D){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(I.C0.ESC+"[I"),this.updateCursorStyle(D),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var D;return(D=this.textarea)===null||D===void 0?void 0:D.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(I.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const D=this.buffer.ybase+this.buffer.y,N=this.buffer.lines.get(D);if(!N)return;const z=Math.min(this.buffer.x,this.cols-1),U=this._renderService.dimensions.css.cell.height,J=N.getWidth(z),q=this._renderService.dimensions.css.cell.width*J,te=this.buffer.y*this._renderService.dimensions.css.cell.height,Z=z*this._renderService.dimensions.css.cell.width;this.textarea.style.left=Z+"px",this.textarea.style.top=te+"px",this.textarea.style.width=q+"px",this.textarea.style.height=U+"px",this.textarea.style.lineHeight=U+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,v.addDisposableDomListener)(this.element,"copy",N=>{this.hasSelection()&&(0,u.copyHandler)(N,this._selectionService)}));const D=N=>(0,u.handlePasteEvent)(N,this.textarea,this.coreService,this.optionsService);this.register((0,v.addDisposableDomListener)(this.textarea,"paste",D)),this.register((0,v.addDisposableDomListener)(this.element,"paste",D)),F.isFirefox?this.register((0,v.addDisposableDomListener)(this.element,"mousedown",N=>{N.button===2&&(0,u.rightClickHandler)(N,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,v.addDisposableDomListener)(this.element,"contextmenu",N=>{(0,u.rightClickHandler)(N,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),F.isLinux&&this.register((0,v.addDisposableDomListener)(this.element,"auxclick",N=>{N.button===1&&(0,u.moveTextAreaUnderMouseCursor)(N,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,v.addDisposableDomListener)(this.textarea,"keyup",D=>this._keyUp(D),!0)),this.register((0,v.addDisposableDomListener)(this.textarea,"keydown",D=>this._keyDown(D),!0)),this.register((0,v.addDisposableDomListener)(this.textarea,"keypress",D=>this._keyPress(D),!0)),this.register((0,v.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,v.addDisposableDomListener)(this.textarea,"compositionupdate",D=>this._compositionHelper.compositionupdate(D))),this.register((0,v.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,v.addDisposableDomListener)(this.textarea,"input",D=>this._inputEvent(D),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(D){var N;if(!D)throw new Error("Terminal requires a parent element.");D.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=D.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),D.appendChild(this.element);const z=j.createDocumentFragment();this._viewportElement=j.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),z.appendChild(this._viewportElement),this._viewportScrollArea=j.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=j.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=j.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),z.appendChild(this.screenElement),this.textarea=j.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",_.promptLabel),F.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(S.CoreBrowserService,this.textarea,(N=this._document.defaultView)!==null&&N!==void 0?N:window),this._instantiationService.setService(w.ICoreBrowserService,this._coreBrowserService),this.register((0,v.addDisposableDomListener)(this.textarea,"focus",U=>this._handleTextAreaFocus(U))),this.register((0,v.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(a.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(w.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(b.ThemeService),this._instantiationService.setService(w.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(p.CharacterJoinerService),this._instantiationService.setService(w.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(L.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(w.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(U=>this._onRender.fire(U))),this.onResize(U=>this._renderService.resize(U.cols,U.rows)),this._compositionView=j.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(l.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(z);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(y.MouseService),this._instantiationService.setService(w.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(C.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(U=>this.scrollLines(U.amount,U.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(g.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(w.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(U=>this.scrollLines(U.amount,U.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(U=>this._renderService.handleSelectionChanged(U.start,U.end,U.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(U=>{this.textarea.value=U,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(U=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,v.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(f.BufferDecorationRenderer,this.screenElement)),this.register((0,v.addDisposableDomListener)(this.element,"mousedown",U=>this._selectionService.handleMouseDown(U))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(W.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",U=>this._handleScreenReaderModeOptionChange(U))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(s.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",U=>{!this._overviewRulerRenderer&&U&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(s.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(o.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){const D=this,N=this.element;function z(q){const te=D._mouseService.getMouseReportCoords(q,D.screenElement);if(!te)return!1;let Z,ye;switch(q.overrideType||q.type){case"mousemove":ye=32,q.buttons===void 0?(Z=3,q.button!==void 0&&(Z=q.button<3?q.button:3)):Z=1&q.buttons?0:4&q.buttons?1:2&q.buttons?2:3;break;case"mouseup":ye=0,Z=q.button<3?q.button:3;break;case"mousedown":ye=1,Z=q.button<3?q.button:3;break;case"wheel":if(D.viewport.getLinesScrolled(q)===0)return!1;ye=q.deltaY<0?0:1,Z=4;break;default:return!1}return!(ye===void 0||Z===void 0||Z>4)&&D.coreMouseService.triggerMouseEvent({col:te.col,row:te.row,x:te.x,y:te.y,button:Z,action:ye,ctrl:q.ctrlKey,alt:q.altKey,shift:q.shiftKey})}const U={mouseup:null,wheel:null,mousedrag:null,mousemove:null},J={mouseup:q=>(z(q),q.buttons||(this._document.removeEventListener("mouseup",U.mouseup),U.mousedrag&&this._document.removeEventListener("mousemove",U.mousedrag)),this.cancel(q)),wheel:q=>(z(q),this.cancel(q,!0)),mousedrag:q=>{q.buttons&&z(q)},mousemove:q=>{q.buttons||z(q)}};this.register(this.coreMouseService.onProtocolChange(q=>{q?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(q)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&q?U.mousemove||(N.addEventListener("mousemove",J.mousemove),U.mousemove=J.mousemove):(N.removeEventListener("mousemove",U.mousemove),U.mousemove=null),16&q?U.wheel||(N.addEventListener("wheel",J.wheel,{passive:!1}),U.wheel=J.wheel):(N.removeEventListener("wheel",U.wheel),U.wheel=null),2&q?U.mouseup||(N.addEventListener("mouseup",J.mouseup),U.mouseup=J.mouseup):(this._document.removeEventListener("mouseup",U.mouseup),N.removeEventListener("mouseup",U.mouseup),U.mouseup=null),4&q?U.mousedrag||(U.mousedrag=J.mousedrag):(this._document.removeEventListener("mousemove",U.mousedrag),U.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,v.addDisposableDomListener)(N,"mousedown",q=>{if(q.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(q))return z(q),U.mouseup&&this._document.addEventListener("mouseup",U.mouseup),U.mousedrag&&this._document.addEventListener("mousemove",U.mousedrag),this.cancel(q)})),this.register((0,v.addDisposableDomListener)(N,"wheel",q=>{if(!U.wheel){if(!this.buffer.hasScrollback){const te=this.viewport.getLinesScrolled(q);if(te===0)return;const Z=I.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(q.deltaY<0?"A":"B");let ye="";for(let rt=0;rt<Math.abs(te);rt++)ye+=Z;return this.coreService.triggerDataEvent(ye,!0),this.cancel(q,!0)}return this.viewport.handleWheel(q)?this.cancel(q):void 0}},{passive:!1})),this.register((0,v.addDisposableDomListener)(N,"touchstart",q=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(q),this.cancel(q)},{passive:!0})),this.register((0,v.addDisposableDomListener)(N,"touchmove",q=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(q)?void 0:this.cancel(q)},{passive:!1}))}refresh(D,N){var z;(z=this._renderService)===null||z===void 0||z.refreshRows(D,N)}updateCursorStyle(D){var N;!((N=this._selectionService)===null||N===void 0)&&N.shouldColumnSelect(D)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(D,N,z=0){var U;z===1?(super.scrollLines(D,N,z),this.refresh(0,this.rows-1)):(U=this.viewport)===null||U===void 0||U.scrollLines(D)}paste(D){(0,u.paste)(D,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(D){this._customKeyEventHandler=D}registerLinkProvider(D){return this.linkifier2.registerLinkProvider(D)}registerCharacterJoiner(D){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const N=this._characterJoinerService.register(D);return this.refresh(0,this.rows-1),N}deregisterCharacterJoiner(D){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(D)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(D){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+D)}registerDecoration(D){return this._decorationService.registerDecoration(D)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(D,N,z){this._selectionService.setSelection(D,N,z)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var D;(D=this._selectionService)===null||D===void 0||D.clearSelection()}selectAll(){var D;(D=this._selectionService)===null||D===void 0||D.selectAll()}selectLines(D,N){var z;(z=this._selectionService)===null||z===void 0||z.selectLines(D,N)}_keyDown(D){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(D)===!1)return!1;const N=this.browser.isMac&&this.options.macOptionIsMeta&&D.altKey;if(!N&&!this._compositionHelper.keydown(D))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;N||D.key!=="Dead"&&D.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const z=(0,k.evaluateKeyboardEvent)(D,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(D),z.type===3||z.type===2){const U=this.rows-1;return this.scrollLines(z.type===2?-U:U),this.cancel(D,!0)}return z.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,D)||(z.cancel&&this.cancel(D,!0),!z.key||!!(D.key&&!D.ctrlKey&&!D.altKey&&!D.metaKey&&D.key.length===1&&D.key.charCodeAt(0)>=65&&D.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(z.key!==I.C0.ETX&&z.key!==I.C0.CR||(this.textarea.value=""),this._onKey.fire({key:z.key,domEvent:D}),this._showCursor(),this.coreService.triggerDataEvent(z.key,!0),!this.optionsService.rawOptions.screenReaderMode||D.altKey||D.ctrlKey?this.cancel(D,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(D,N){const z=D.isMac&&!this.options.macOptionIsMeta&&N.altKey&&!N.ctrlKey&&!N.metaKey||D.isWindows&&N.altKey&&N.ctrlKey&&!N.metaKey||D.isWindows&&N.getModifierState("AltGraph");return N.type==="keypress"?z:z&&(!N.keyCode||N.keyCode>47)}_keyUp(D){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(D)===!1||(function(N){return N.keyCode===16||N.keyCode===17||N.keyCode===18}(D)||this.focus(),this.updateCursorStyle(D),this._keyPressHandled=!1)}_keyPress(D){let N;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(D)===!1)return!1;if(this.cancel(D),D.charCode)N=D.charCode;else if(D.which===null||D.which===void 0)N=D.keyCode;else{if(D.which===0||D.charCode===0)return!1;N=D.which}return!(!N||(D.altKey||D.ctrlKey||D.metaKey)&&!this._isThirdLevelShift(this.browser,D)||(N=String.fromCharCode(N),this._onKey.fire({key:N,domEvent:D}),this._showCursor(),this.coreService.triggerDataEvent(N,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(D){if(D.data&&D.inputType==="insertText"&&(!D.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const N=D.data;return this.coreService.triggerDataEvent(N,!0),this.cancel(D),!0}return!1}resize(D,N){D!==this.cols||N!==this.rows?super.resize(D,N):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(D,N){var z,U;(z=this._charSizeService)===null||z===void 0||z.measure(),(U=this.viewport)===null||U===void 0||U.syncScrollArea(!0)}clear(){var D;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let N=1;N<this.rows;N++)this.buffer.lines.push(this.buffer.getBlankLine(H.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(D=this.viewport)===null||D===void 0||D.reset(),this.refresh(0,this.rows-1)}}reset(){var D,N;this.options.rows=this.rows,this.options.cols=this.cols;const z=this._customKeyEventHandler;this._setup(),super.reset(),(D=this._selectionService)===null||D===void 0||D.reset(),this._decorationService.reset(),(N=this.viewport)===null||N===void 0||N.reset(),this._customKeyEventHandler=z,this.refresh(0,this.rows-1)}clearTextureAtlas(){var D;(D=this._renderService)===null||D===void 0||D.clearTextureAtlas()}_reportFocus(){var D;!((D=this.element)===null||D===void 0)&&D.classList.contains("focus")?this.coreService.triggerDataEvent(I.C0.ESC+"[I"):this.coreService.triggerDataEvent(I.C0.ESC+"[O")}_reportWindowsOptions(D){if(this._renderService)switch(D){case $.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const N=this._renderService.dimensions.css.canvas.width.toFixed(0),z=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${I.C0.ESC}[4;${z};${N}t`);break;case $.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const U=this._renderService.dimensions.css.cell.width.toFixed(0),J=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${I.C0.ESC}[6;${J};${U}t`)}}cancel(D,N){if(this.options.cancelEvents||N)return D.preventDefault(),D.stopPropagation(),!1}}i.Terminal=K},9924:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TimeBasedDebouncer=void 0,i.TimeBasedDebouncer=class{constructor(c,u=1e3){this._renderCallback=c,this._debounceThresholdMS=u,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(c,u,v){this._rowCount=v,c=c!==void 0?c:0,u=u!==void 0?u:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,c):c,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,u):u;const h=Date.now();if(h-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=h,this._innerRefresh();else if(!this._additionalRefreshRequested){const _=h-this._lastRefreshMs,E=this._debounceThresholdMS-_;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},E)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const c=Math.max(this._rowStart,0),u=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(c,u)}}},1680:function(x,i,c){var u=this&&this.__decorate||function(l,o,a,p){var S,y=arguments.length,L=y<3?o:p===null?p=Object.getOwnPropertyDescriptor(o,a):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(l,o,a,p);else for(var g=l.length-1;g>=0;g--)(S=l[g])&&(L=(y<3?S(L):y>3?S(o,a,L):S(o,a))||L);return y>3&&L&&Object.defineProperty(o,a,L),L},v=this&&this.__param||function(l,o){return function(a,p){o(a,p,l)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Viewport=void 0;const h=c(3656),_=c(4725),E=c(8460),C=c(844),f=c(2585);let s=i.Viewport=class extends C.Disposable{constructor(l,o,a,p,S,y,L,g){super(),this._viewportElement=l,this._scrollArea=o,this._bufferService=a,this._optionsService=p,this._charSizeService=S,this._renderService=y,this._coreBrowserService=L,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new E.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,h.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(w=>this._activeBuffer=w.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(w=>this._renderDimensions=w)),this._handleThemeChange(g.colors),this.register(g.onChangeColors(w=>this._handleThemeChange(w))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(l){this._viewportElement.style.backgroundColor=l.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(l){if(l)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const o=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==o&&(this._lastRecordedBufferHeight=o,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const l=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==l&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=l),this._refreshAnimationFrame=null}syncScrollArea(l=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(l);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(l)}_handleScroll(l){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const o=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:o,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const l=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(l*(this._smoothScrollState.target-this._smoothScrollState.origin)),l<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(l,o){const a=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(o<0&&this._viewportElement.scrollTop!==0||o>0&&a<this._lastRecordedBufferHeight)||(l.cancelable&&l.preventDefault(),!1)}handleWheel(l){const o=this._getPixelsScrolled(l);return o!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+o:this._smoothScrollState.target+=o,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=o,this._bubbleScroll(l,o))}scrollLines(l){if(l!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const o=l*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+o,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:l,suppressScrollEvent:!1})}_getPixelsScrolled(l){if(l.deltaY===0||l.shiftKey)return 0;let o=this._applyScrollModifier(l.deltaY,l);return l.deltaMode===WheelEvent.DOM_DELTA_LINE?o*=this._currentRowHeight:l.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(o*=this._currentRowHeight*this._bufferService.rows),o}getBufferElements(l,o){var a;let p,S="";const y=[],L=o??this._bufferService.buffer.lines.length,g=this._bufferService.buffer.lines;for(let w=l;w<L;w++){const b=g.get(w);if(!b)continue;const M=(a=g.get(w+1))===null||a===void 0?void 0:a.isWrapped;if(S+=b.translateToString(!M),!M||w===g.length-1){const R=document.createElement("div");R.textContent=S,y.push(R),S.length>0&&(p=R),S=""}}return{bufferElements:y,cursorElement:p}}getLinesScrolled(l){if(l.deltaY===0||l.shiftKey)return 0;let o=this._applyScrollModifier(l.deltaY,l);return l.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(o/=this._currentRowHeight+0,this._wheelPartialScroll+=o,o=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):l.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(o*=this._bufferService.rows),o}_applyScrollModifier(l,o){const a=this._optionsService.rawOptions.fastScrollModifier;return a==="alt"&&o.altKey||a==="ctrl"&&o.ctrlKey||a==="shift"&&o.shiftKey?l*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:l*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(l){this._lastTouchY=l.touches[0].pageY}handleTouchMove(l){const o=this._lastTouchY-l.touches[0].pageY;return this._lastTouchY=l.touches[0].pageY,o!==0&&(this._viewportElement.scrollTop+=o,this._bubbleScroll(l,o))}};i.Viewport=s=u([v(2,f.IBufferService),v(3,f.IOptionsService),v(4,_.ICharSizeService),v(5,_.IRenderService),v(6,_.ICoreBrowserService),v(7,_.IThemeService)],s)},3107:function(x,i,c){var u=this&&this.__decorate||function(s,l,o,a){var p,S=arguments.length,y=S<3?l:a===null?a=Object.getOwnPropertyDescriptor(l,o):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(s,l,o,a);else for(var L=s.length-1;L>=0;L--)(p=s[L])&&(y=(S<3?p(y):S>3?p(l,o,y):p(l,o))||y);return S>3&&y&&Object.defineProperty(l,o,y),y},v=this&&this.__param||function(s,l){return function(o,a){l(o,a,s)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferDecorationRenderer=void 0;const h=c(3656),_=c(4725),E=c(844),C=c(2585);let f=i.BufferDecorationRenderer=class extends E.Disposable{constructor(s,l,o,a){super(),this._screenElement=s,this._bufferService=l,this._decorationService=o,this._renderService=a,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,h.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(p=>this._removeDecoration(p))),this.register((0,E.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const s of this._decorationService.decorations)this._renderDecoration(s);this._dimensionsChanged=!1}_renderDecoration(s){this._refreshStyle(s),this._dimensionsChanged&&this._refreshXPosition(s)}_createElement(s){var l,o;const a=document.createElement("div");a.classList.add("xterm-decoration"),a.classList.toggle("xterm-decoration-top-layer",((l=s==null?void 0:s.options)===null||l===void 0?void 0:l.layer)==="top"),a.style.width=`${Math.round((s.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,a.style.height=(s.options.height||1)*this._renderService.dimensions.css.cell.height+"px",a.style.top=(s.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",a.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const p=(o=s.options.x)!==null&&o!==void 0?o:0;return p&&p>this._bufferService.cols&&(a.style.display="none"),this._refreshXPosition(s,a),a}_refreshStyle(s){const l=s.marker.line-this._bufferService.buffers.active.ydisp;if(l<0||l>=this._bufferService.rows)s.element&&(s.element.style.display="none",s.onRenderEmitter.fire(s.element));else{let o=this._decorationElements.get(s);o||(o=this._createElement(s),s.element=o,this._decorationElements.set(s,o),this._container.appendChild(o),s.onDispose(()=>{this._decorationElements.delete(s),o.remove()})),o.style.top=l*this._renderService.dimensions.css.cell.height+"px",o.style.display=this._altBufferIsActive?"none":"block",s.onRenderEmitter.fire(o)}}_refreshXPosition(s,l=s.element){var o;if(!l)return;const a=(o=s.options.x)!==null&&o!==void 0?o:0;(s.options.anchor||"left")==="right"?l.style.right=a?a*this._renderService.dimensions.css.cell.width+"px":"":l.style.left=a?a*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(s){var l;(l=this._decorationElements.get(s))===null||l===void 0||l.remove(),this._decorationElements.delete(s),s.dispose()}};i.BufferDecorationRenderer=f=u([v(1,C.IBufferService),v(2,C.IDecorationService),v(3,_.IRenderService)],f)},5871:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorZoneStore=void 0,i.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(c){if(c.options.overviewRulerOptions){for(const u of this._zones)if(u.color===c.options.overviewRulerOptions.color&&u.position===c.options.overviewRulerOptions.position){if(this._lineIntersectsZone(u,c.marker.line))return;if(this._lineAdjacentToZone(u,c.marker.line,c.options.overviewRulerOptions.position))return void this._addLineToZone(u,c.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=c.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=c.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=c.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=c.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:c.options.overviewRulerOptions.color,position:c.options.overviewRulerOptions.position,startBufferLine:c.marker.line,endBufferLine:c.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(c){this._linePadding=c}_lineIntersectsZone(c,u){return u>=c.startBufferLine&&u<=c.endBufferLine}_lineAdjacentToZone(c,u,v){return u>=c.startBufferLine-this._linePadding[v||"full"]&&u<=c.endBufferLine+this._linePadding[v||"full"]}_addLineToZone(c,u){c.startBufferLine=Math.min(c.startBufferLine,u),c.endBufferLine=Math.max(c.endBufferLine,u)}}},5744:function(x,i,c){var u=this&&this.__decorate||function(p,S,y,L){var g,w=arguments.length,b=w<3?S:L===null?L=Object.getOwnPropertyDescriptor(S,y):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(p,S,y,L);else for(var M=p.length-1;M>=0;M--)(g=p[M])&&(b=(w<3?g(b):w>3?g(S,y,b):g(S,y))||b);return w>3&&b&&Object.defineProperty(S,y,b),b},v=this&&this.__param||function(p,S){return function(y,L){S(y,L,p)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OverviewRulerRenderer=void 0;const h=c(5871),_=c(3656),E=c(4725),C=c(844),f=c(2585),s={full:0,left:0,center:0,right:0},l={full:0,left:0,center:0,right:0},o={full:0,left:0,center:0,right:0};let a=i.OverviewRulerRenderer=class extends C.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(p,S,y,L,g,w,b){var M;super(),this._viewportElement=p,this._screenElement=S,this._bufferService=y,this._decorationService=L,this._renderService=g,this._optionsService=w,this._coreBrowseService=b,this._colorZoneStore=new h.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(M=this._viewportElement.parentElement)===null||M===void 0||M.insertBefore(this._canvas,this._viewportElement);const R=this._canvas.getContext("2d");if(!R)throw new Error("Ctx cannot be null");this._ctx=R,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,C.toDisposable)(()=>{var T;(T=this._canvas)===null||T===void 0||T.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,_.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const p=Math.floor(this._canvas.width/3),S=Math.ceil(this._canvas.width/3);l.full=this._canvas.width,l.left=p,l.center=S,l.right=p,this._refreshDrawHeightConstants(),o.full=0,o.left=0,o.center=l.left,o.right=l.left+l.center}_refreshDrawHeightConstants(){s.full=Math.round(2*this._coreBrowseService.dpr);const p=this._canvas.height/this._bufferService.buffer.lines.length,S=Math.round(Math.max(Math.min(p,12),6)*this._coreBrowseService.dpr);s.left=S,s.center=S,s.right=S}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*s.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*s.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*s.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*s.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const S of this._decorationService.decorations)this._colorZoneStore.addDecoration(S);this._ctx.lineWidth=1;const p=this._colorZoneStore.zones;for(const S of p)S.position!=="full"&&this._renderColorZone(S);for(const S of p)S.position==="full"&&this._renderColorZone(S);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(p){this._ctx.fillStyle=p.color,this._ctx.fillRect(o[p.position||"full"],Math.round((this._canvas.height-1)*(p.startBufferLine/this._bufferService.buffers.active.lines.length)-s[p.position||"full"]/2),l[p.position||"full"],Math.round((this._canvas.height-1)*((p.endBufferLine-p.startBufferLine)/this._bufferService.buffers.active.lines.length)+s[p.position||"full"]))}_queueRefresh(p,S){this._shouldUpdateDimensions=p||this._shouldUpdateDimensions,this._shouldUpdateAnchor=S||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};i.OverviewRulerRenderer=a=u([v(2,f.IBufferService),v(3,f.IDecorationService),v(4,E.IRenderService),v(5,f.IOptionsService),v(6,E.ICoreBrowserService)],a)},2950:function(x,i,c){var u=this&&this.__decorate||function(f,s,l,o){var a,p=arguments.length,S=p<3?s:o===null?o=Object.getOwnPropertyDescriptor(s,l):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(f,s,l,o);else for(var y=f.length-1;y>=0;y--)(a=f[y])&&(S=(p<3?a(S):p>3?a(s,l,S):a(s,l))||S);return p>3&&S&&Object.defineProperty(s,l,S),S},v=this&&this.__param||function(f,s){return function(l,o){s(l,o,f)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CompositionHelper=void 0;const h=c(4725),_=c(2585),E=c(2584);let C=i.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(f,s,l,o,a,p){this._textarea=f,this._compositionView=s,this._bufferService=l,this._optionsService=o,this._coreService=a,this._renderService=p,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(f){this._compositionView.textContent=f.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(f){if(this._isComposing||this._isSendingComposition){if(f.keyCode===229||f.keyCode===16||f.keyCode===17||f.keyCode===18)return!1;this._finalizeComposition(!1)}return f.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(f){if(this._compositionView.classList.remove("active"),this._isComposing=!1,f){const s={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let l;this._isSendingComposition=!1,s.start+=this._dataAlreadySent.length,l=this._isComposing?this._textarea.value.substring(s.start,s.end):this._textarea.value.substring(s.start),l.length>0&&this._coreService.triggerDataEvent(l,!0)}},0)}else{this._isSendingComposition=!1;const s=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(s,!0)}}_handleAnyTextareaChanges(){const f=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const s=this._textarea.value,l=s.replace(f,"");this._dataAlreadySent=l,s.length>f.length?this._coreService.triggerDataEvent(l,!0):s.length<f.length?this._coreService.triggerDataEvent(`${E.C0.DEL}`,!0):s.length===f.length&&s!==f&&this._coreService.triggerDataEvent(s,!0)}},0)}updateCompositionElements(f){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const s=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),l=this._renderService.dimensions.css.cell.height,o=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,a=s*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=a+"px",this._compositionView.style.top=o+"px",this._compositionView.style.height=l+"px",this._compositionView.style.lineHeight=l+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const p=this._compositionView.getBoundingClientRect();this._textarea.style.left=a+"px",this._textarea.style.top=o+"px",this._textarea.style.width=Math.max(p.width,1)+"px",this._textarea.style.height=Math.max(p.height,1)+"px",this._textarea.style.lineHeight=p.height+"px"}f||setTimeout(()=>this.updateCompositionElements(!0),0)}}};i.CompositionHelper=C=u([v(2,_.IBufferService),v(3,_.IOptionsService),v(4,_.ICoreService),v(5,h.IRenderService)],C)},9806:(x,i)=>{function c(u,v,h){const _=h.getBoundingClientRect(),E=u.getComputedStyle(h),C=parseInt(E.getPropertyValue("padding-left")),f=parseInt(E.getPropertyValue("padding-top"));return[v.clientX-_.left-C,v.clientY-_.top-f]}Object.defineProperty(i,"__esModule",{value:!0}),i.getCoords=i.getCoordsRelativeToElement=void 0,i.getCoordsRelativeToElement=c,i.getCoords=function(u,v,h,_,E,C,f,s,l){if(!C)return;const o=c(u,v,h);return o?(o[0]=Math.ceil((o[0]+(l?f/2:0))/f),o[1]=Math.ceil(o[1]/s),o[0]=Math.min(Math.max(o[0],1),_+(l?1:0)),o[1]=Math.min(Math.max(o[1],1),E),o):void 0}},9504:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.moveToCellSequence=void 0;const u=c(2584);function v(s,l,o,a){const p=s-h(s,o),S=l-h(l,o),y=Math.abs(p-S)-function(L,g,w){let b=0;const M=L-h(L,w),R=g-h(g,w);for(let T=0;T<Math.abs(M-R);T++){const B=_(L,g)==="A"?-1:1,F=w.buffer.lines.get(M+B*T);F!=null&&F.isWrapped&&b++}return b}(s,l,o);return f(y,C(_(s,l),a))}function h(s,l){let o=0,a=l.buffer.lines.get(s),p=a==null?void 0:a.isWrapped;for(;p&&s>=0&&s<l.rows;)o++,a=l.buffer.lines.get(--s),p=a==null?void 0:a.isWrapped;return o}function _(s,l){return s>l?"A":"B"}function E(s,l,o,a,p,S){let y=s,L=l,g="";for(;y!==o||L!==a;)y+=p?1:-1,p&&y>S.cols-1?(g+=S.buffer.translateBufferLineToString(L,!1,s,y),y=0,s=0,L++):!p&&y<0&&(g+=S.buffer.translateBufferLineToString(L,!1,0,s+1),y=S.cols-1,s=y,L--);return g+S.buffer.translateBufferLineToString(L,!1,s,y)}function C(s,l){const o=l?"O":"[";return u.C0.ESC+o+s}function f(s,l){s=Math.floor(s);let o="";for(let a=0;a<s;a++)o+=l;return o}i.moveToCellSequence=function(s,l,o,a){const p=o.buffer.x,S=o.buffer.y;if(!o.buffer.hasScrollback)return function(g,w,b,M,R,T){return v(w,M,R,T).length===0?"":f(E(g,w,g,w-h(w,R),!1,R).length,C("D",T))}(p,S,0,l,o,a)+v(S,l,o,a)+function(g,w,b,M,R,T){let B;B=v(w,M,R,T).length>0?M-h(M,R):w;const F=M,H=function(I,k,A,P,O,$){let W;return W=v(A,P,O,$).length>0?P-h(P,O):k,I<A&&W<=P||I>=A&&W<P?"C":"D"}(g,w,b,M,R,T);return f(E(g,B,b,F,H==="C",R).length,C(H,T))}(p,S,s,l,o,a);let y;if(S===l)return y=p>s?"D":"C",f(Math.abs(p-s),C(y,a));y=S>l?"D":"C";const L=Math.abs(S-l);return f(function(g,w){return w.cols-g}(S>l?s:p,o)+(L-1)*o.cols+1+((S>l?p:s)-1),C(y,a))}},1296:function(x,i,c){var u=this&&this.__decorate||function(R,T,B,F){var H,I=arguments.length,k=I<3?T:F===null?F=Object.getOwnPropertyDescriptor(T,B):F;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(R,T,B,F);else for(var A=R.length-1;A>=0;A--)(H=R[A])&&(k=(I<3?H(k):I>3?H(T,B,k):H(T,B))||k);return I>3&&k&&Object.defineProperty(T,B,k),k},v=this&&this.__param||function(R,T){return function(B,F){T(B,F,R)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRenderer=void 0;const h=c(3787),_=c(2550),E=c(2223),C=c(6171),f=c(4725),s=c(8055),l=c(8460),o=c(844),a=c(2585),p="xterm-dom-renderer-owner-",S="xterm-rows",y="xterm-fg-",L="xterm-bg-",g="xterm-focus",w="xterm-selection";let b=1,M=i.DomRenderer=class extends o.Disposable{constructor(R,T,B,F,H,I,k,A,P,O){super(),this._element=R,this._screenElement=T,this._viewportElement=B,this._linkifier2=F,this._charSizeService=I,this._optionsService=k,this._bufferService=A,this._coreBrowserService=P,this._themeService=O,this._terminalClass=b++,this._rowElements=[],this.onRequestRedraw=this.register(new l.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(S),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(w),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,C.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors($=>this._injectCss($))),this._injectCss(this._themeService.colors),this._rowFactory=H.createInstance(h.DomRendererRowFactory,document),this._element.classList.add(p+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline($=>this._handleLinkHover($))),this.register(this._linkifier2.onHideLinkUnderline($=>this._handleLinkLeave($))),this.register((0,o.toDisposable)(()=>{this._element.classList.remove(p+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new _.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const R=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*R,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*R),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/R),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/R),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const B of this._rowElements)B.style.width=`${this.dimensions.css.canvas.width}px`,B.style.height=`${this.dimensions.css.cell.height}px`,B.style.lineHeight=`${this.dimensions.css.cell.height}px`,B.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const T=`${this._terminalSelector} .${S} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=T,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(R){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let T=`${this._terminalSelector} .${S} { color: ${R.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;T+=`${this._terminalSelector} .${S} .xterm-dim { color: ${s.color.multiplyOpacity(R.foreground,.5).css};}`,T+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,T+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",T+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${R.cursor.css};  color: ${R.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${R.cursor.css}; }}`,T+=`${this._terminalSelector} .${S}.${g} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${S}.${g} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-block { background-color: ${R.cursor.css}; color: ${R.cursorAccent.css};}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${R.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${R.cursor.css} inset;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${R.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,T+=`${this._terminalSelector} .${w} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${w} div { position: absolute; background-color: ${R.selectionBackgroundOpaque.css};}${this._terminalSelector} .${w} div { position: absolute; background-color: ${R.selectionInactiveBackgroundOpaque.css};}`;for(const[B,F]of R.ansi.entries())T+=`${this._terminalSelector} .${y}${B} { color: ${F.css}; }${this._terminalSelector} .${y}${B}.xterm-dim { color: ${s.color.multiplyOpacity(F,.5).css}; }${this._terminalSelector} .${L}${B} { background-color: ${F.css}; }`;T+=`${this._terminalSelector} .${y}${E.INVERTED_DEFAULT_COLOR} { color: ${s.color.opaque(R.background).css}; }${this._terminalSelector} .${y}${E.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${s.color.multiplyOpacity(s.color.opaque(R.background),.5).css}; }${this._terminalSelector} .${L}${E.INVERTED_DEFAULT_COLOR} { background-color: ${R.foreground.css}; }`,this._themeStyleElement.textContent=T}_setDefaultSpacing(){const R=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${R}px`,this._rowFactory.defaultSpacing=R}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(R,T){for(let B=this._rowElements.length;B<=T;B++){const F=document.createElement("div");this._rowContainer.appendChild(F),this._rowElements.push(F)}for(;this._rowElements.length>T;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(R,T){this._refreshRowElements(R,T),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(g)}handleFocus(){this._rowContainer.classList.add(g),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(R,T,B){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(R,T,B),this.renderRows(0,this._bufferService.rows-1),!R||!T)return;const F=R[1]-this._bufferService.buffer.ydisp,H=T[1]-this._bufferService.buffer.ydisp,I=Math.max(F,0),k=Math.min(H,this._bufferService.rows-1);if(I>=this._bufferService.rows||k<0)return;const A=document.createDocumentFragment();if(B){const P=R[0]>T[0];A.appendChild(this._createSelectionElement(I,P?T[0]:R[0],P?R[0]:T[0],k-I+1))}else{const P=F===I?R[0]:0,O=I===H?T[0]:this._bufferService.cols;A.appendChild(this._createSelectionElement(I,P,O));const $=k-I-1;if(A.appendChild(this._createSelectionElement(I+1,0,this._bufferService.cols,$)),I!==k){const W=H===k?T[0]:this._bufferService.cols;A.appendChild(this._createSelectionElement(k,0,W))}}this._selectionContainer.appendChild(A)}_createSelectionElement(R,T,B,F=1){const H=document.createElement("div");return H.style.height=F*this.dimensions.css.cell.height+"px",H.style.top=R*this.dimensions.css.cell.height+"px",H.style.left=T*this.dimensions.css.cell.width+"px",H.style.width=this.dimensions.css.cell.width*(B-T)+"px",H}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const R of this._rowElements)R.replaceChildren()}renderRows(R,T){const B=this._bufferService.buffer,F=B.ybase+B.y,H=Math.min(B.x,this._bufferService.cols-1),I=this._optionsService.rawOptions.cursorBlink,k=this._optionsService.rawOptions.cursorStyle,A=this._optionsService.rawOptions.cursorInactiveStyle;for(let P=R;P<=T;P++){const O=P+B.ydisp,$=this._rowElements[P],W=B.lines.get(O);if(!$||!W)break;$.replaceChildren(...this._rowFactory.createRow(W,O,O===F,k,A,H,I,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${p}${this._terminalClass}`}_handleLinkHover(R){this._setCellUnderline(R.x1,R.x2,R.y1,R.y2,R.cols,!0)}_handleLinkLeave(R){this._setCellUnderline(R.x1,R.x2,R.y1,R.y2,R.cols,!1)}_setCellUnderline(R,T,B,F,H,I){B<0&&(R=0),F<0&&(T=0);const k=this._bufferService.rows-1;B=Math.max(Math.min(B,k),0),F=Math.max(Math.min(F,k),0),H=Math.min(H,this._bufferService.cols);const A=this._bufferService.buffer,P=A.ybase+A.y,O=Math.min(A.x,H-1),$=this._optionsService.rawOptions.cursorBlink,W=this._optionsService.rawOptions.cursorStyle,j=this._optionsService.rawOptions.cursorInactiveStyle;for(let K=B;K<=F;++K){const Y=K+A.ydisp,D=this._rowElements[K],N=A.lines.get(Y);if(!D||!N)break;D.replaceChildren(...this._rowFactory.createRow(N,Y,Y===P,W,j,O,$,this.dimensions.css.cell.width,this._widthCache,I?K===B?R:0:-1,I?(K===F?T:H)-1:-1))}}};i.DomRenderer=M=u([v(4,a.IInstantiationService),v(5,f.ICharSizeService),v(6,a.IOptionsService),v(7,a.IBufferService),v(8,f.ICoreBrowserService),v(9,f.IThemeService)],M)},3787:function(x,i,c){var u=this&&this.__decorate||function(y,L,g,w){var b,M=arguments.length,R=M<3?L:w===null?w=Object.getOwnPropertyDescriptor(L,g):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(y,L,g,w);else for(var T=y.length-1;T>=0;T--)(b=y[T])&&(R=(M<3?b(R):M>3?b(L,g,R):b(L,g))||R);return M>3&&R&&Object.defineProperty(L,g,R),R},v=this&&this.__param||function(y,L){return function(g,w){L(g,w,y)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRendererRowFactory=void 0;const h=c(2223),_=c(643),E=c(511),C=c(2585),f=c(8055),s=c(4725),l=c(4269),o=c(6171),a=c(3734);let p=i.DomRendererRowFactory=class{constructor(y,L,g,w,b,M,R){this._document=y,this._characterJoinerService=L,this._optionsService=g,this._coreBrowserService=w,this._coreService=b,this._decorationService=M,this._themeService=R,this._workCell=new E.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(y,L,g){this._selectionStart=y,this._selectionEnd=L,this._columnSelectMode=g}createRow(y,L,g,w,b,M,R,T,B,F,H){const I=[],k=this._characterJoinerService.getJoinedCharacters(L),A=this._themeService.colors;let P,O=y.getNoBgTrimmedLength();g&&O<M+1&&(O=M+1);let $=0,W="",j=0,K=0,Y=0,D=!1,N=0,z=!1,U=0;const J=[],q=F!==-1&&H!==-1;for(let te=0;te<O;te++){y.loadCell(te,this._workCell);let Z=this._workCell.getWidth();if(Z===0)continue;let ye=!1,rt=te,ee=this._workCell;if(k.length>0&&te===k[0][0]){ye=!0;const re=k.shift();ee=new l.JoinedCellData(this._workCell,y.translateToString(!0,re[0],re[1]),re[1]-re[0]),rt=re[1]-1,Z=ee.getWidth()}const gt=this._isCellInSelection(te,L),_r=g&&te===M,ce=q&&te>=F&&te<=H;let se=!1;this._decorationService.forEachDecorationAtCell(te,L,void 0,re=>{se=!0});let ne=ee.getChars()||_.WHITESPACE_CELL_CHAR;if(ne===" "&&(ee.isUnderline()||ee.isOverline())&&(ne=""),U=Z*T-B.get(ne,ee.isBold(),ee.isItalic()),P){if($&&(gt&&z||!gt&&!z&&ee.bg===j)&&(gt&&z&&A.selectionForeground||ee.fg===K)&&ee.extended.ext===Y&&ce===D&&U===N&&!_r&&!ye&&!se){W+=ne,$++;continue}$&&(P.textContent=W),P=this._document.createElement("span"),$=0,W=""}else P=this._document.createElement("span");if(j=ee.bg,K=ee.fg,Y=ee.extended.ext,D=ce,N=U,z=gt,ye&&M>=te&&M<=rt&&(M=te),!this._coreService.isCursorHidden&&_r){if(J.push("xterm-cursor"),this._coreBrowserService.isFocused)R&&J.push("xterm-cursor-blink"),J.push(w==="bar"?"xterm-cursor-bar":w==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(b)switch(b){case"outline":J.push("xterm-cursor-outline");break;case"block":J.push("xterm-cursor-block");break;case"bar":J.push("xterm-cursor-bar");break;case"underline":J.push("xterm-cursor-underline")}}if(ee.isBold()&&J.push("xterm-bold"),ee.isItalic()&&J.push("xterm-italic"),ee.isDim()&&J.push("xterm-dim"),W=ee.isInvisible()?_.WHITESPACE_CELL_CHAR:ee.getChars()||_.WHITESPACE_CELL_CHAR,ee.isUnderline()&&(J.push(`xterm-underline-${ee.extended.underlineStyle}`),W===" "&&(W=""),!ee.isUnderlineColorDefault()))if(ee.isUnderlineColorRGB())P.style.textDecorationColor=`rgb(${a.AttributeData.toColorRGB(ee.getUnderlineColor()).join(",")})`;else{let re=ee.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&ee.isBold()&&re<8&&(re+=8),P.style.textDecorationColor=A.ansi[re].css}ee.isOverline()&&(J.push("xterm-overline"),W===" "&&(W="")),ee.isStrikethrough()&&J.push("xterm-strikethrough"),ce&&(P.style.textDecoration="underline");let X=ee.getFgColor(),le=ee.getFgColorMode(),Ce=ee.getBgColor(),fe=ee.getBgColorMode();const Et=!!ee.isInverse();if(Et){const re=X;X=Ce,Ce=re;const jr=le;le=fe,fe=jr}let Ue,ct,xe,ue=!1;switch(this._decorationService.forEachDecorationAtCell(te,L,void 0,re=>{re.options.layer!=="top"&&ue||(re.backgroundColorRGB&&(fe=50331648,Ce=re.backgroundColorRGB.rgba>>8&16777215,Ue=re.backgroundColorRGB),re.foregroundColorRGB&&(le=50331648,X=re.foregroundColorRGB.rgba>>8&16777215,ct=re.foregroundColorRGB),ue=re.options.layer==="top")}),!ue&&gt&&(Ue=this._coreBrowserService.isFocused?A.selectionBackgroundOpaque:A.selectionInactiveBackgroundOpaque,Ce=Ue.rgba>>8&16777215,fe=50331648,ue=!0,A.selectionForeground&&(le=50331648,X=A.selectionForeground.rgba>>8&16777215,ct=A.selectionForeground)),ue&&J.push("xterm-decoration-top"),fe){case 16777216:case 33554432:xe=A.ansi[Ce],J.push(`xterm-bg-${Ce}`);break;case 50331648:xe=f.rgba.toColor(Ce>>16,Ce>>8&255,255&Ce),this._addStyle(P,`background-color:#${S((Ce>>>0).toString(16),"0",6)}`);break;default:Et?(xe=A.foreground,J.push(`xterm-bg-${h.INVERTED_DEFAULT_COLOR}`)):xe=A.background}switch(Ue||ee.isDim()&&(Ue=f.color.multiplyOpacity(xe,.5)),le){case 16777216:case 33554432:ee.isBold()&&X<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(X+=8),this._applyMinimumContrast(P,xe,A.ansi[X],ee,Ue,void 0)||J.push(`xterm-fg-${X}`);break;case 50331648:const re=f.rgba.toColor(X>>16&255,X>>8&255,255&X);this._applyMinimumContrast(P,xe,re,ee,Ue,ct)||this._addStyle(P,`color:#${S(X.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(P,xe,A.foreground,ee,Ue,void 0)||Et&&J.push(`xterm-fg-${h.INVERTED_DEFAULT_COLOR}`)}J.length&&(P.className=J.join(" "),J.length=0),_r||ye||se?P.textContent=W:$++,U!==this.defaultSpacing&&(P.style.letterSpacing=`${U}px`),I.push(P),te=rt}return P&&$&&(P.textContent=W),I}_applyMinimumContrast(y,L,g,w,b,M){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,o.excludeFromContrastRatioDemands)(w.getCode()))return!1;const R=this._getContrastCache(w);let T;if(b||M||(T=R.getColor(L.rgba,g.rgba)),T===void 0){const B=this._optionsService.rawOptions.minimumContrastRatio/(w.isDim()?2:1);T=f.color.ensureContrastRatio(b||L,M||g,B),R.setColor((b||L).rgba,(M||g).rgba,T??null)}return!!T&&(this._addStyle(y,`color:${T.css}`),!0)}_getContrastCache(y){return y.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(y,L){y.setAttribute("style",`${y.getAttribute("style")||""}${L};`)}_isCellInSelection(y,L){const g=this._selectionStart,w=this._selectionEnd;return!(!g||!w)&&(this._columnSelectMode?g[0]<=w[0]?y>=g[0]&&L>=g[1]&&y<w[0]&&L<=w[1]:y<g[0]&&L>=g[1]&&y>=w[0]&&L<=w[1]:L>g[1]&&L<w[1]||g[1]===w[1]&&L===g[1]&&y>=g[0]&&y<w[0]||g[1]<w[1]&&L===w[1]&&y<w[0]||g[1]<w[1]&&L===g[1]&&y>=g[0])}};function S(y,L,g){for(;y.length<g;)y=L+y;return y}i.DomRendererRowFactory=p=u([v(1,s.ICharacterJoinerService),v(2,C.IOptionsService),v(3,s.ICoreBrowserService),v(4,C.ICoreService),v(5,C.IDecorationService),v(6,s.IThemeService)],p)},2550:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WidthCache=void 0,i.WidthCache=class{constructor(c){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=c.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const u=c.createElement("span"),v=c.createElement("span");v.style.fontWeight="bold";const h=c.createElement("span");h.style.fontStyle="italic";const _=c.createElement("span");_.style.fontWeight="bold",_.style.fontStyle="italic",this._measureElements=[u,v,h,_],this._container.appendChild(u),this._container.appendChild(v),this._container.appendChild(h),this._container.appendChild(_),c.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(c,u,v,h){c===this._font&&u===this._fontSize&&v===this._weight&&h===this._weightBold||(this._font=c,this._fontSize=u,this._weight=v,this._weightBold=h,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${v}`,this._measureElements[1].style.fontWeight=`${h}`,this._measureElements[2].style.fontWeight=`${v}`,this._measureElements[3].style.fontWeight=`${h}`,this.clear())}get(c,u,v){let h=0;if(!u&&!v&&c.length===1&&(h=c.charCodeAt(0))<256)return this._flat[h]!==-9999?this._flat[h]:this._flat[h]=this._measure(c,0);let _=c;u&&(_+="B"),v&&(_+="I");let E=this._holey.get(_);if(E===void 0){let C=0;u&&(C|=1),v&&(C|=2),E=this._measure(c,C),this._holey.set(_,E)}return E}_measure(c,u){const v=this._measureElements[u];return v.textContent=c.repeat(32),v.offsetWidth/32}}},2223:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;const u=c(6114);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=u.isFirefox||u.isLegacyEdge?"bottom":"ideographic"},6171:(x,i)=>{function c(u){return 57508<=u&&u<=57558}Object.defineProperty(i,"__esModule",{value:!0}),i.createRenderDimensions=i.excludeFromContrastRatioDemands=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(u){if(!u)throw new Error("value must not be falsy");return u},i.isPowerlineGlyph=c,i.isRestrictedPowerlineGlyph=function(u){return 57520<=u&&u<=57527},i.excludeFromContrastRatioDemands=function(u){return c(u)||function(v){return 9472<=v&&v<=9631}(u)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionModel=void 0,i.SelectionModel=class{constructor(c){this._bufferService=c,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const c=this.selectionStart[0]+this.selectionStartLength;return c>this._bufferService.cols?c%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(c/this._bufferService.cols)-1]:[c%this._bufferService.cols,this.selectionStart[1]+Math.floor(c/this._bufferService.cols)]:[c,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const c=this.selectionStart[0]+this.selectionStartLength;return c>this._bufferService.cols?[c%this._bufferService.cols,this.selectionStart[1]+Math.floor(c/this._bufferService.cols)]:[Math.max(c,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const c=this.selectionStart,u=this.selectionEnd;return!(!c||!u)&&(c[1]>u[1]||c[1]===u[1]&&c[0]>u[0])}handleTrim(c){return this.selectionStart&&(this.selectionStart[1]-=c),this.selectionEnd&&(this.selectionEnd[1]-=c),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(x,i,c){var u=this&&this.__decorate||function(s,l,o,a){var p,S=arguments.length,y=S<3?l:a===null?a=Object.getOwnPropertyDescriptor(l,o):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(s,l,o,a);else for(var L=s.length-1;L>=0;L--)(p=s[L])&&(y=(S<3?p(y):S>3?p(l,o,y):p(l,o))||y);return S>3&&y&&Object.defineProperty(l,o,y),y},v=this&&this.__param||function(s,l){return function(o,a){l(o,a,s)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharSizeService=void 0;const h=c(2585),_=c(8460),E=c(844);let C=i.CharSizeService=class extends E.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(s,l,o){super(),this._optionsService=o,this.width=0,this.height=0,this._onCharSizeChange=this.register(new _.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new f(s,l,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const s=this._measureStrategy.measure();s.width===this.width&&s.height===this.height||(this.width=s.width,this.height=s.height,this._onCharSizeChange.fire())}};i.CharSizeService=C=u([v(2,h.IOptionsService)],C);class f{constructor(l,o,a){this._document=l,this._parentElement=o,this._optionsService=a,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;const l={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return l.width!==0&&l.height!==0&&(this._result.width=l.width/32,this._result.height=Math.ceil(l.height)),this._result}}},4269:function(x,i,c){var u=this&&this.__decorate||function(l,o,a,p){var S,y=arguments.length,L=y<3?o:p===null?p=Object.getOwnPropertyDescriptor(o,a):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(l,o,a,p);else for(var g=l.length-1;g>=0;g--)(S=l[g])&&(L=(y<3?S(L):y>3?S(o,a,L):S(o,a))||L);return y>3&&L&&Object.defineProperty(o,a,L),L},v=this&&this.__param||function(l,o){return function(a,p){o(a,p,l)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharacterJoinerService=i.JoinedCellData=void 0;const h=c(3734),_=c(643),E=c(511),C=c(2585);class f extends h.AttributeData{constructor(o,a,p){super(),this.content=0,this.combinedData="",this.fg=o.fg,this.bg=o.bg,this.combinedData=a,this._width=p}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(o){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.JoinedCellData=f;let s=i.CharacterJoinerService=class Nh{constructor(o){this._bufferService=o,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new E.CellData}register(o){const a={id:this._nextCharacterJoinerId++,handler:o};return this._characterJoiners.push(a),a.id}deregister(o){for(let a=0;a<this._characterJoiners.length;a++)if(this._characterJoiners[a].id===o)return this._characterJoiners.splice(a,1),!0;return!1}getJoinedCharacters(o){if(this._characterJoiners.length===0)return[];const a=this._bufferService.buffer.lines.get(o);if(!a||a.length===0)return[];const p=[],S=a.translateToString(!0);let y=0,L=0,g=0,w=a.getFg(0),b=a.getBg(0);for(let M=0;M<a.getTrimmedLength();M++)if(a.loadCell(M,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==w||this._workCell.bg!==b){if(M-y>1){const R=this._getJoinedRanges(S,g,L,a,y);for(let T=0;T<R.length;T++)p.push(R[T])}y=M,g=L,w=this._workCell.fg,b=this._workCell.bg}L+=this._workCell.getChars().length||_.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-y>1){const M=this._getJoinedRanges(S,g,L,a,y);for(let R=0;R<M.length;R++)p.push(M[R])}return p}_getJoinedRanges(o,a,p,S,y){const L=o.substring(a,p);let g=[];try{g=this._characterJoiners[0].handler(L)}catch(w){console.error(w)}for(let w=1;w<this._characterJoiners.length;w++)try{const b=this._characterJoiners[w].handler(L);for(let M=0;M<b.length;M++)Nh._mergeRanges(g,b[M])}catch(b){console.error(b)}return this._stringRangesToCellRanges(g,S,y),g}_stringRangesToCellRanges(o,a,p){let S=0,y=!1,L=0,g=o[S];if(g){for(let w=p;w<this._bufferService.cols;w++){const b=a.getWidth(w),M=a.getString(w).length||_.WHITESPACE_CELL_CHAR.length;if(b!==0){if(!y&&g[0]<=L&&(g[0]=w,y=!0),g[1]<=L){if(g[1]=w,g=o[++S],!g)break;g[0]<=L?(g[0]=w,y=!0):y=!1}L+=M}}g&&(g[1]=this._bufferService.cols)}}static _mergeRanges(o,a){let p=!1;for(let S=0;S<o.length;S++){const y=o[S];if(p){if(a[1]<=y[0])return o[S-1][1]=a[1],o;if(a[1]<=y[1])return o[S-1][1]=Math.max(a[1],y[1]),o.splice(S,1),o;o.splice(S,1),S--}else{if(a[1]<=y[0])return o.splice(S,0,a),o;if(a[1]<=y[1])return y[0]=Math.min(a[0],y[0]),o;a[0]<y[1]&&(y[0]=Math.min(a[0],y[0]),p=!0)}}return p?o[o.length-1][1]=a[1]:o.push(a),o}};i.CharacterJoinerService=s=u([v(0,C.IBufferService)],s)},5114:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreBrowserService=void 0,i.CoreBrowserService=class{constructor(c,u){this._textarea=c,this.window=u,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(x,i,c){var u=this&&this.__decorate||function(C,f,s,l){var o,a=arguments.length,p=a<3?f:l===null?l=Object.getOwnPropertyDescriptor(f,s):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(C,f,s,l);else for(var S=C.length-1;S>=0;S--)(o=C[S])&&(p=(a<3?o(p):a>3?o(f,s,p):o(f,s))||p);return a>3&&p&&Object.defineProperty(f,s,p),p},v=this&&this.__param||function(C,f){return function(s,l){f(s,l,C)}};Object.defineProperty(i,"__esModule",{value:!0}),i.MouseService=void 0;const h=c(4725),_=c(9806);let E=i.MouseService=class{constructor(C,f){this._renderService=C,this._charSizeService=f}getCoords(C,f,s,l,o){return(0,_.getCoords)(window,C,f,s,l,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,o)}getMouseReportCoords(C,f){const s=(0,_.getCoordsRelativeToElement)(window,C,f);if(this._charSizeService.hasValidSize)return s[0]=Math.min(Math.max(s[0],0),this._renderService.dimensions.css.canvas.width-1),s[1]=Math.min(Math.max(s[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(s[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(s[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(s[0]),y:Math.floor(s[1])}}};i.MouseService=E=u([v(0,h.IRenderService),v(1,h.ICharSizeService)],E)},3230:function(x,i,c){var u=this&&this.__decorate||function(p,S,y,L){var g,w=arguments.length,b=w<3?S:L===null?L=Object.getOwnPropertyDescriptor(S,y):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(p,S,y,L);else for(var M=p.length-1;M>=0;M--)(g=p[M])&&(b=(w<3?g(b):w>3?g(S,y,b):g(S,y))||b);return w>3&&b&&Object.defineProperty(S,y,b),b},v=this&&this.__param||function(p,S){return function(y,L){S(y,L,p)}};Object.defineProperty(i,"__esModule",{value:!0}),i.RenderService=void 0;const h=c(3656),_=c(6193),E=c(5596),C=c(4725),f=c(8460),s=c(844),l=c(7226),o=c(2585);let a=i.RenderService=class extends s.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(p,S,y,L,g,w,b,M){if(super(),this._rowCount=p,this._charSizeService=L,this._renderer=this.register(new s.MutableDisposable),this._pausedResizeTask=new l.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new f.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new f.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new f.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new f.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new _.RenderDebouncer(b.window,(R,T)=>this._renderRows(R,T)),this.register(this._renderDebouncer),this._screenDprMonitor=new E.ScreenDprMonitor(b.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(w.onResize(()=>this._fullRefresh())),this.register(w.buffers.onBufferActivate(()=>{var R;return(R=this._renderer.value)===null||R===void 0?void 0:R.clear()})),this.register(y.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(g.onDecorationRegistered(()=>this._fullRefresh())),this.register(g.onDecorationRemoved(()=>this._fullRefresh())),this.register(y.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(w.cols,w.rows),this._fullRefresh()})),this.register(y.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(w.buffer.y,w.buffer.y,!0))),this.register((0,h.addDisposableDomListener)(b.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(M.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in b.window){const R=new b.window.IntersectionObserver(T=>this._handleIntersectionChange(T[T.length-1]),{threshold:0});R.observe(S),this.register({dispose:()=>R.disconnect()})}}_handleIntersectionChange(p){this._isPaused=p.isIntersecting===void 0?p.intersectionRatio===0:!p.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(p,S,y=!1){this._isPaused?this._needsFullRefresh=!0:(y||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(p,S,this._rowCount))}_renderRows(p,S){this._renderer.value&&(p=Math.min(p,this._rowCount-1),S=Math.min(S,this._rowCount-1),this._renderer.value.renderRows(p,S),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:p,end:S}),this._onRender.fire({start:p,end:S}),this._isNextRenderRedrawOnly=!0)}resize(p,S){this._rowCount=S,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(p){this._renderer.value=p,this._renderer.value.onRequestRedraw(S=>this.refreshRows(S.start,S.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(p){return this._renderDebouncer.addRefreshCallback(p)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var p,S;this._renderer.value&&((S=(p=this._renderer.value).clearTextureAtlas)===null||S===void 0||S.call(p),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(p,S){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(p,S)):this._renderer.value.handleResize(p,S),this._fullRefresh())}handleCharSizeChanged(){var p;(p=this._renderer.value)===null||p===void 0||p.handleCharSizeChanged()}handleBlur(){var p;(p=this._renderer.value)===null||p===void 0||p.handleBlur()}handleFocus(){var p;(p=this._renderer.value)===null||p===void 0||p.handleFocus()}handleSelectionChanged(p,S,y){var L;this._selectionState.start=p,this._selectionState.end=S,this._selectionState.columnSelectMode=y,(L=this._renderer.value)===null||L===void 0||L.handleSelectionChanged(p,S,y)}handleCursorMove(){var p;(p=this._renderer.value)===null||p===void 0||p.handleCursorMove()}clear(){var p;(p=this._renderer.value)===null||p===void 0||p.clear()}};i.RenderService=a=u([v(2,o.IOptionsService),v(3,C.ICharSizeService),v(4,o.IDecorationService),v(5,o.IBufferService),v(6,C.ICoreBrowserService),v(7,C.IThemeService)],a)},9312:function(x,i,c){var u=this&&this.__decorate||function(g,w,b,M){var R,T=arguments.length,B=T<3?w:M===null?M=Object.getOwnPropertyDescriptor(w,b):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(g,w,b,M);else for(var F=g.length-1;F>=0;F--)(R=g[F])&&(B=(T<3?R(B):T>3?R(w,b,B):R(w,b))||B);return T>3&&B&&Object.defineProperty(w,b,B),B},v=this&&this.__param||function(g,w){return function(b,M){w(b,M,g)}};Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionService=void 0;const h=c(9806),_=c(9504),E=c(456),C=c(4725),f=c(8460),s=c(844),l=c(6114),o=c(4841),a=c(511),p=c(2585),S="",y=new RegExp(S,"g");let L=i.SelectionService=class extends s.Disposable{constructor(g,w,b,M,R,T,B,F,H){super(),this._element=g,this._screenElement=w,this._linkifier=b,this._bufferService=M,this._coreService=R,this._mouseService=T,this._optionsService=B,this._renderService=F,this._coreBrowserService=H,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new a.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new f.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new f.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new f.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new f.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=I=>this._handleMouseMove(I),this._mouseUpListener=I=>this._handleMouseUp(I),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(I=>this._handleTrim(I)),this.register(this._bufferService.buffers.onBufferActivate(I=>this._handleBufferActivate(I))),this.enable(),this._model=new E.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,s.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const g=this._model.finalSelectionStart,w=this._model.finalSelectionEnd;return!(!g||!w||g[0]===w[0]&&g[1]===w[1])}get selectionText(){const g=this._model.finalSelectionStart,w=this._model.finalSelectionEnd;if(!g||!w)return"";const b=this._bufferService.buffer,M=[];if(this._activeSelectionMode===3){if(g[0]===w[0])return"";const R=g[0]<w[0]?g[0]:w[0],T=g[0]<w[0]?w[0]:g[0];for(let B=g[1];B<=w[1];B++){const F=b.translateBufferLineToString(B,!0,R,T);M.push(F)}}else{const R=g[1]===w[1]?w[0]:void 0;M.push(b.translateBufferLineToString(g[1],!0,g[0],R));for(let T=g[1]+1;T<=w[1]-1;T++){const B=b.lines.get(T),F=b.translateBufferLineToString(T,!0);B!=null&&B.isWrapped?M[M.length-1]+=F:M.push(F)}if(g[1]!==w[1]){const T=b.lines.get(w[1]),B=b.translateBufferLineToString(w[1],!0,0,w[0]);T&&T.isWrapped?M[M.length-1]+=B:M.push(B)}}return M.map(R=>R.replace(y," ")).join(l.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(g){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),l.isLinux&&g&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(g){const w=this._getMouseBufferCoords(g),b=this._model.finalSelectionStart,M=this._model.finalSelectionEnd;return!!(b&&M&&w)&&this._areCoordsInSelection(w,b,M)}isCellInSelection(g,w){const b=this._model.finalSelectionStart,M=this._model.finalSelectionEnd;return!(!b||!M)&&this._areCoordsInSelection([g,w],b,M)}_areCoordsInSelection(g,w,b){return g[1]>w[1]&&g[1]<b[1]||w[1]===b[1]&&g[1]===w[1]&&g[0]>=w[0]&&g[0]<b[0]||w[1]<b[1]&&g[1]===b[1]&&g[0]<b[0]||w[1]<b[1]&&g[1]===w[1]&&g[0]>=w[0]}_selectWordAtCursor(g,w){var b,M;const R=(M=(b=this._linkifier.currentLink)===null||b===void 0?void 0:b.link)===null||M===void 0?void 0:M.range;if(R)return this._model.selectionStart=[R.start.x-1,R.start.y-1],this._model.selectionStartLength=(0,o.getRangeLength)(R,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const T=this._getMouseBufferCoords(g);return!!T&&(this._selectWordAt(T,w),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(g,w){this._model.clearSelection(),g=Math.max(g,0),w=Math.min(w,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,g],this._model.selectionEnd=[this._bufferService.cols,w],this.refresh(),this._onSelectionChange.fire()}_handleTrim(g){this._model.handleTrim(g)&&this.refresh()}_getMouseBufferCoords(g){const w=this._mouseService.getCoords(g,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(w)return w[0]--,w[1]--,w[1]+=this._bufferService.buffer.ydisp,w}_getMouseEventScrollAmount(g){let w=(0,h.getCoordsRelativeToElement)(this._coreBrowserService.window,g,this._screenElement)[1];const b=this._renderService.dimensions.css.canvas.height;return w>=0&&w<=b?0:(w>b&&(w-=b),w=Math.min(Math.max(w,-50),50),w/=50,w/Math.abs(w)+Math.round(14*w))}shouldForceSelection(g){return l.isMac?g.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:g.shiftKey}handleMouseDown(g){if(this._mouseDownTimeStamp=g.timeStamp,(g.button!==2||!this.hasSelection)&&g.button===0){if(!this._enabled){if(!this.shouldForceSelection(g))return;g.stopPropagation()}g.preventDefault(),this._dragScrollAmount=0,this._enabled&&g.shiftKey?this._handleIncrementalClick(g):g.detail===1?this._handleSingleClick(g):g.detail===2?this._handleDoubleClick(g):g.detail===3&&this._handleTripleClick(g),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(g){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(g))}_handleSingleClick(g){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(g)?3:0,this._model.selectionStart=this._getMouseBufferCoords(g),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const w=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);w&&w.length!==this._model.selectionStart[0]&&w.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(g){this._selectWordAtCursor(g,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(g){const w=this._getMouseBufferCoords(g);w&&(this._activeSelectionMode=2,this._selectLineAt(w[1]))}shouldColumnSelect(g){return g.altKey&&!(l.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(g){if(g.stopImmediatePropagation(),!this._model.selectionStart)return;const w=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(g),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(g),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const b=this._bufferService.buffer;if(this._model.selectionEnd[1]<b.lines.length){const M=b.lines.get(this._model.selectionEnd[1]);M&&M.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}w&&w[0]===this._model.selectionEnd[0]&&w[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const g=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(g.ydisp+this._bufferService.rows,g.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=g.ydisp),this.refresh()}}_handleMouseUp(g){const w=g.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&w<500&&g.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const b=this._mouseService.getCoords(g,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(b&&b[0]!==void 0&&b[1]!==void 0){const M=(0,_.moveToCellSequence)(b[0]-1,b[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(M,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const g=this._model.finalSelectionStart,w=this._model.finalSelectionEnd,b=!(!g||!w||g[0]===w[0]&&g[1]===w[1]);b?g&&w&&(this._oldSelectionStart&&this._oldSelectionEnd&&g[0]===this._oldSelectionStart[0]&&g[1]===this._oldSelectionStart[1]&&w[0]===this._oldSelectionEnd[0]&&w[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(g,w,b)):this._oldHasSelection&&this._fireOnSelectionChange(g,w,b)}_fireOnSelectionChange(g,w,b){this._oldSelectionStart=g,this._oldSelectionEnd=w,this._oldHasSelection=b,this._onSelectionChange.fire()}_handleBufferActivate(g){this.clearSelection(),this._trimListener.dispose(),this._trimListener=g.activeBuffer.lines.onTrim(w=>this._handleTrim(w))}_convertViewportColToCharacterIndex(g,w){let b=w;for(let M=0;w>=M;M++){const R=g.loadCell(M,this._workCell).getChars().length;this._workCell.getWidth()===0?b--:R>1&&w!==M&&(b+=R-1)}return b}setSelection(g,w,b){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[g,w],this._model.selectionStartLength=b,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(g){this._isClickInSelection(g)||(this._selectWordAtCursor(g,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(g,w,b=!0,M=!0){if(g[0]>=this._bufferService.cols)return;const R=this._bufferService.buffer,T=R.lines.get(g[1]);if(!T)return;const B=R.translateBufferLineToString(g[1],!1);let F=this._convertViewportColToCharacterIndex(T,g[0]),H=F;const I=g[0]-F;let k=0,A=0,P=0,O=0;if(B.charAt(F)===" "){for(;F>0&&B.charAt(F-1)===" ";)F--;for(;H<B.length&&B.charAt(H+1)===" ";)H++}else{let j=g[0],K=g[0];T.getWidth(j)===0&&(k++,j--),T.getWidth(K)===2&&(A++,K++);const Y=T.getString(K).length;for(Y>1&&(O+=Y-1,H+=Y-1);j>0&&F>0&&!this._isCharWordSeparator(T.loadCell(j-1,this._workCell));){T.loadCell(j-1,this._workCell);const D=this._workCell.getChars().length;this._workCell.getWidth()===0?(k++,j--):D>1&&(P+=D-1,F-=D-1),F--,j--}for(;K<T.length&&H+1<B.length&&!this._isCharWordSeparator(T.loadCell(K+1,this._workCell));){T.loadCell(K+1,this._workCell);const D=this._workCell.getChars().length;this._workCell.getWidth()===2?(A++,K++):D>1&&(O+=D-1,H+=D-1),H++,K++}}H++;let $=F+I-k+P,W=Math.min(this._bufferService.cols,H-F+k+A-P-O);if(w||B.slice(F,H).trim()!==""){if(b&&$===0&&T.getCodePoint(0)!==32){const j=R.lines.get(g[1]-1);if(j&&T.isWrapped&&j.getCodePoint(this._bufferService.cols-1)!==32){const K=this._getWordAt([this._bufferService.cols-1,g[1]-1],!1,!0,!1);if(K){const Y=this._bufferService.cols-K.start;$-=Y,W+=Y}}}if(M&&$+W===this._bufferService.cols&&T.getCodePoint(this._bufferService.cols-1)!==32){const j=R.lines.get(g[1]+1);if(j!=null&&j.isWrapped&&j.getCodePoint(0)!==32){const K=this._getWordAt([0,g[1]+1],!1,!1,!0);K&&(W+=K.length)}}return{start:$,length:W}}}_selectWordAt(g,w){const b=this._getWordAt(g,w);if(b){for(;b.start<0;)b.start+=this._bufferService.cols,g[1]--;this._model.selectionStart=[b.start,g[1]],this._model.selectionStartLength=b.length}}_selectToWordAt(g){const w=this._getWordAt(g,!0);if(w){let b=g[1];for(;w.start<0;)w.start+=this._bufferService.cols,b--;if(!this._model.areSelectionValuesReversed())for(;w.start+w.length>this._bufferService.cols;)w.length-=this._bufferService.cols,b++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?w.start:w.start+w.length,b]}}_isCharWordSeparator(g){return g.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(g.getChars())>=0}_selectLineAt(g){const w=this._bufferService.buffer.getWrappedRangeForLine(g),b={start:{x:0,y:w.first},end:{x:this._bufferService.cols-1,y:w.last}};this._model.selectionStart=[0,w.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,o.getRangeLength)(b,this._bufferService.cols)}};i.SelectionService=L=u([v(3,p.IBufferService),v(4,p.ICoreService),v(5,C.IMouseService),v(6,p.IOptionsService),v(7,C.IRenderService),v(8,C.ICoreBrowserService)],L)},4725:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IThemeService=i.ICharacterJoinerService=i.ISelectionService=i.IRenderService=i.IMouseService=i.ICoreBrowserService=i.ICharSizeService=void 0;const u=c(8343);i.ICharSizeService=(0,u.createDecorator)("CharSizeService"),i.ICoreBrowserService=(0,u.createDecorator)("CoreBrowserService"),i.IMouseService=(0,u.createDecorator)("MouseService"),i.IRenderService=(0,u.createDecorator)("RenderService"),i.ISelectionService=(0,u.createDecorator)("SelectionService"),i.ICharacterJoinerService=(0,u.createDecorator)("CharacterJoinerService"),i.IThemeService=(0,u.createDecorator)("ThemeService")},6731:function(x,i,c){var u=this&&this.__decorate||function(L,g,w,b){var M,R=arguments.length,T=R<3?g:b===null?b=Object.getOwnPropertyDescriptor(g,w):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(L,g,w,b);else for(var B=L.length-1;B>=0;B--)(M=L[B])&&(T=(R<3?M(T):R>3?M(g,w,T):M(g,w))||T);return R>3&&T&&Object.defineProperty(g,w,T),T},v=this&&this.__param||function(L,g){return function(w,b){g(w,b,L)}};Object.defineProperty(i,"__esModule",{value:!0}),i.ThemeService=i.DEFAULT_ANSI_COLORS=void 0;const h=c(7239),_=c(8055),E=c(8460),C=c(844),f=c(2585),s=_.css.toColor("#ffffff"),l=_.css.toColor("#000000"),o=_.css.toColor("#ffffff"),a=_.css.toColor("#000000"),p={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};i.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const L=[_.css.toColor("#2e3436"),_.css.toColor("#cc0000"),_.css.toColor("#4e9a06"),_.css.toColor("#c4a000"),_.css.toColor("#3465a4"),_.css.toColor("#75507b"),_.css.toColor("#06989a"),_.css.toColor("#d3d7cf"),_.css.toColor("#555753"),_.css.toColor("#ef2929"),_.css.toColor("#8ae234"),_.css.toColor("#fce94f"),_.css.toColor("#729fcf"),_.css.toColor("#ad7fa8"),_.css.toColor("#34e2e2"),_.css.toColor("#eeeeec")],g=[0,95,135,175,215,255];for(let w=0;w<216;w++){const b=g[w/36%6|0],M=g[w/6%6|0],R=g[w%6];L.push({css:_.channels.toCss(b,M,R),rgba:_.channels.toRgba(b,M,R)})}for(let w=0;w<24;w++){const b=8+10*w;L.push({css:_.channels.toCss(b,b,b),rgba:_.channels.toRgba(b,b,b)})}return L})());let S=i.ThemeService=class extends C.Disposable{get colors(){return this._colors}constructor(L){super(),this._optionsService=L,this._contrastCache=new h.ColorContrastCache,this._halfContrastCache=new h.ColorContrastCache,this._onChangeColors=this.register(new E.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:s,background:l,cursor:o,cursorAccent:a,selectionForeground:void 0,selectionBackgroundTransparent:p,selectionBackgroundOpaque:_.color.blend(l,p),selectionInactiveBackgroundTransparent:p,selectionInactiveBackgroundOpaque:_.color.blend(l,p),ansi:i.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(L={}){const g=this._colors;if(g.foreground=y(L.foreground,s),g.background=y(L.background,l),g.cursor=y(L.cursor,o),g.cursorAccent=y(L.cursorAccent,a),g.selectionBackgroundTransparent=y(L.selectionBackground,p),g.selectionBackgroundOpaque=_.color.blend(g.background,g.selectionBackgroundTransparent),g.selectionInactiveBackgroundTransparent=y(L.selectionInactiveBackground,g.selectionBackgroundTransparent),g.selectionInactiveBackgroundOpaque=_.color.blend(g.background,g.selectionInactiveBackgroundTransparent),g.selectionForeground=L.selectionForeground?y(L.selectionForeground,_.NULL_COLOR):void 0,g.selectionForeground===_.NULL_COLOR&&(g.selectionForeground=void 0),_.color.isOpaque(g.selectionBackgroundTransparent)&&(g.selectionBackgroundTransparent=_.color.opacity(g.selectionBackgroundTransparent,.3)),_.color.isOpaque(g.selectionInactiveBackgroundTransparent)&&(g.selectionInactiveBackgroundTransparent=_.color.opacity(g.selectionInactiveBackgroundTransparent,.3)),g.ansi=i.DEFAULT_ANSI_COLORS.slice(),g.ansi[0]=y(L.black,i.DEFAULT_ANSI_COLORS[0]),g.ansi[1]=y(L.red,i.DEFAULT_ANSI_COLORS[1]),g.ansi[2]=y(L.green,i.DEFAULT_ANSI_COLORS[2]),g.ansi[3]=y(L.yellow,i.DEFAULT_ANSI_COLORS[3]),g.ansi[4]=y(L.blue,i.DEFAULT_ANSI_COLORS[4]),g.ansi[5]=y(L.magenta,i.DEFAULT_ANSI_COLORS[5]),g.ansi[6]=y(L.cyan,i.DEFAULT_ANSI_COLORS[6]),g.ansi[7]=y(L.white,i.DEFAULT_ANSI_COLORS[7]),g.ansi[8]=y(L.brightBlack,i.DEFAULT_ANSI_COLORS[8]),g.ansi[9]=y(L.brightRed,i.DEFAULT_ANSI_COLORS[9]),g.ansi[10]=y(L.brightGreen,i.DEFAULT_ANSI_COLORS[10]),g.ansi[11]=y(L.brightYellow,i.DEFAULT_ANSI_COLORS[11]),g.ansi[12]=y(L.brightBlue,i.DEFAULT_ANSI_COLORS[12]),g.ansi[13]=y(L.brightMagenta,i.DEFAULT_ANSI_COLORS[13]),g.ansi[14]=y(L.brightCyan,i.DEFAULT_ANSI_COLORS[14]),g.ansi[15]=y(L.brightWhite,i.DEFAULT_ANSI_COLORS[15]),L.extendedAnsi){const w=Math.min(g.ansi.length-16,L.extendedAnsi.length);for(let b=0;b<w;b++)g.ansi[b+16]=y(L.extendedAnsi[b],i.DEFAULT_ANSI_COLORS[b+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(L){this._restoreColor(L),this._onChangeColors.fire(this.colors)}_restoreColor(L){if(L!==void 0)switch(L){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[L]=this._restoreColors.ansi[L]}else for(let g=0;g<this._restoreColors.ansi.length;++g)this._colors.ansi[g]=this._restoreColors.ansi[g]}modifyColors(L){L(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function y(L,g){if(L!==void 0)try{return _.css.toColor(L)}catch{}return g}i.ThemeService=S=u([v(0,f.IOptionsService)],S)},6349:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CircularList=void 0;const u=c(8460),v=c(844);class h extends v.Disposable{constructor(E){super(),this._maxLength=E,this.onDeleteEmitter=this.register(new u.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new u.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new u.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(E){if(this._maxLength===E)return;const C=new Array(E);for(let f=0;f<Math.min(E,this.length);f++)C[f]=this._array[this._getCyclicIndex(f)];this._array=C,this._maxLength=E,this._startIndex=0}get length(){return this._length}set length(E){if(E>this._length)for(let C=this._length;C<E;C++)this._array[C]=void 0;this._length=E}get(E){return this._array[this._getCyclicIndex(E)]}set(E,C){this._array[this._getCyclicIndex(E)]=C}push(E){this._array[this._getCyclicIndex(this._length)]=E,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(E,C,...f){if(C){for(let s=E;s<this._length-C;s++)this._array[this._getCyclicIndex(s)]=this._array[this._getCyclicIndex(s+C)];this._length-=C,this.onDeleteEmitter.fire({index:E,amount:C})}for(let s=this._length-1;s>=E;s--)this._array[this._getCyclicIndex(s+f.length)]=this._array[this._getCyclicIndex(s)];for(let s=0;s<f.length;s++)this._array[this._getCyclicIndex(E+s)]=f[s];if(f.length&&this.onInsertEmitter.fire({index:E,amount:f.length}),this._length+f.length>this._maxLength){const s=this._length+f.length-this._maxLength;this._startIndex+=s,this._length=this._maxLength,this.onTrimEmitter.fire(s)}else this._length+=f.length}trimStart(E){E>this._length&&(E=this._length),this._startIndex+=E,this._length-=E,this.onTrimEmitter.fire(E)}shiftElements(E,C,f){if(!(C<=0)){if(E<0||E>=this._length)throw new Error("start argument out of range");if(E+f<0)throw new Error("Cannot shift elements in list beyond index 0");if(f>0){for(let l=C-1;l>=0;l--)this.set(E+l+f,this.get(E+l));const s=E+C+f-this._length;if(s>0)for(this._length+=s;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let s=0;s<C;s++)this.set(E+s+f,this.get(E+s))}}_getCyclicIndex(E){return(this._startIndex+E)%this._maxLength}}i.CircularList=h},1439:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.clone=void 0,i.clone=function c(u,v=5){if(typeof u!="object")return u;const h=Array.isArray(u)?[]:{};for(const _ in u)h[_]=v<=1?u[_]:u[_]&&c(u[_],v-1);return h}},8055:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;const u=c(6114);let v=0,h=0,_=0,E=0;var C,f,s,l,o;function a(S){const y=S.toString(16);return y.length<2?"0"+y:y}function p(S,y){return S<y?(y+.05)/(S+.05):(S+.05)/(y+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},function(S){S.toCss=function(y,L,g,w){return w!==void 0?`#${a(y)}${a(L)}${a(g)}${a(w)}`:`#${a(y)}${a(L)}${a(g)}`},S.toRgba=function(y,L,g,w=255){return(y<<24|L<<16|g<<8|w)>>>0}}(C||(i.channels=C={})),function(S){function y(L,g){return E=Math.round(255*g),[v,h,_]=o.toChannels(L.rgba),{css:C.toCss(v,h,_,E),rgba:C.toRgba(v,h,_,E)}}S.blend=function(L,g){if(E=(255&g.rgba)/255,E===1)return{css:g.css,rgba:g.rgba};const w=g.rgba>>24&255,b=g.rgba>>16&255,M=g.rgba>>8&255,R=L.rgba>>24&255,T=L.rgba>>16&255,B=L.rgba>>8&255;return v=R+Math.round((w-R)*E),h=T+Math.round((b-T)*E),_=B+Math.round((M-B)*E),{css:C.toCss(v,h,_),rgba:C.toRgba(v,h,_)}},S.isOpaque=function(L){return(255&L.rgba)==255},S.ensureContrastRatio=function(L,g,w){const b=o.ensureContrastRatio(L.rgba,g.rgba,w);if(b)return o.toColor(b>>24&255,b>>16&255,b>>8&255)},S.opaque=function(L){const g=(255|L.rgba)>>>0;return[v,h,_]=o.toChannels(g),{css:C.toCss(v,h,_),rgba:g}},S.opacity=y,S.multiplyOpacity=function(L,g){return E=255&L.rgba,y(L,E*g/255)},S.toColorRGB=function(L){return[L.rgba>>24&255,L.rgba>>16&255,L.rgba>>8&255]}}(f||(i.color=f={})),function(S){let y,L;if(!u.isNode){const g=document.createElement("canvas");g.width=1,g.height=1;const w=g.getContext("2d",{willReadFrequently:!0});w&&(y=w,y.globalCompositeOperation="copy",L=y.createLinearGradient(0,0,1,1))}S.toColor=function(g){if(g.match(/#[\da-f]{3,8}/i))switch(g.length){case 4:return v=parseInt(g.slice(1,2).repeat(2),16),h=parseInt(g.slice(2,3).repeat(2),16),_=parseInt(g.slice(3,4).repeat(2),16),o.toColor(v,h,_);case 5:return v=parseInt(g.slice(1,2).repeat(2),16),h=parseInt(g.slice(2,3).repeat(2),16),_=parseInt(g.slice(3,4).repeat(2),16),E=parseInt(g.slice(4,5).repeat(2),16),o.toColor(v,h,_,E);case 7:return{css:g,rgba:(parseInt(g.slice(1),16)<<8|255)>>>0};case 9:return{css:g,rgba:parseInt(g.slice(1),16)>>>0}}const w=g.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(w)return v=parseInt(w[1]),h=parseInt(w[2]),_=parseInt(w[3]),E=Math.round(255*(w[5]===void 0?1:parseFloat(w[5]))),o.toColor(v,h,_,E);if(!y||!L)throw new Error("css.toColor: Unsupported css format");if(y.fillStyle=L,y.fillStyle=g,typeof y.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(y.fillRect(0,0,1,1),[v,h,_,E]=y.getImageData(0,0,1,1).data,E!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:C.toRgba(v,h,_,E),css:g}}}(s||(i.css=s={})),function(S){function y(L,g,w){const b=L/255,M=g/255,R=w/255;return .2126*(b<=.03928?b/12.92:Math.pow((b+.055)/1.055,2.4))+.7152*(M<=.03928?M/12.92:Math.pow((M+.055)/1.055,2.4))+.0722*(R<=.03928?R/12.92:Math.pow((R+.055)/1.055,2.4))}S.relativeLuminance=function(L){return y(L>>16&255,L>>8&255,255&L)},S.relativeLuminance2=y}(l||(i.rgb=l={})),function(S){function y(g,w,b){const M=g>>24&255,R=g>>16&255,T=g>>8&255;let B=w>>24&255,F=w>>16&255,H=w>>8&255,I=p(l.relativeLuminance2(B,F,H),l.relativeLuminance2(M,R,T));for(;I<b&&(B>0||F>0||H>0);)B-=Math.max(0,Math.ceil(.1*B)),F-=Math.max(0,Math.ceil(.1*F)),H-=Math.max(0,Math.ceil(.1*H)),I=p(l.relativeLuminance2(B,F,H),l.relativeLuminance2(M,R,T));return(B<<24|F<<16|H<<8|255)>>>0}function L(g,w,b){const M=g>>24&255,R=g>>16&255,T=g>>8&255;let B=w>>24&255,F=w>>16&255,H=w>>8&255,I=p(l.relativeLuminance2(B,F,H),l.relativeLuminance2(M,R,T));for(;I<b&&(B<255||F<255||H<255);)B=Math.min(255,B+Math.ceil(.1*(255-B))),F=Math.min(255,F+Math.ceil(.1*(255-F))),H=Math.min(255,H+Math.ceil(.1*(255-H))),I=p(l.relativeLuminance2(B,F,H),l.relativeLuminance2(M,R,T));return(B<<24|F<<16|H<<8|255)>>>0}S.ensureContrastRatio=function(g,w,b){const M=l.relativeLuminance(g>>8),R=l.relativeLuminance(w>>8);if(p(M,R)<b){if(R<M){const F=y(g,w,b),H=p(M,l.relativeLuminance(F>>8));if(H<b){const I=L(g,w,b);return H>p(M,l.relativeLuminance(I>>8))?F:I}return F}const T=L(g,w,b),B=p(M,l.relativeLuminance(T>>8));if(B<b){const F=y(g,w,b);return B>p(M,l.relativeLuminance(F>>8))?T:F}return T}},S.reduceLuminance=y,S.increaseLuminance=L,S.toChannels=function(g){return[g>>24&255,g>>16&255,g>>8&255,255&g]},S.toColor=function(g,w,b,M){return{css:C.toCss(g,w,b,M),rgba:C.toRgba(g,w,b,M)}}}(o||(i.rgba=o={})),i.toPaddedHex=a,i.contrastRatio=p},8969:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreTerminal=void 0;const u=c(844),v=c(2585),h=c(4348),_=c(7866),E=c(744),C=c(7302),f=c(6975),s=c(8460),l=c(1753),o=c(1480),a=c(7994),p=c(9282),S=c(5435),y=c(5981),L=c(2660);let g=!1;class w extends u.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new s.EventEmitter),this._onScroll.event(M=>{var R;(R=this._onScrollApi)===null||R===void 0||R.fire(M.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(M){for(const R in M)this.optionsService.options[R]=M[R]}constructor(M){super(),this._windowsWrappingHeuristics=this.register(new u.MutableDisposable),this._onBinary=this.register(new s.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new s.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new s.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new s.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new s.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new s.EventEmitter),this._instantiationService=new h.InstantiationService,this.optionsService=this.register(new C.OptionsService(M)),this._instantiationService.setService(v.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(E.BufferService)),this._instantiationService.setService(v.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(_.LogService)),this._instantiationService.setService(v.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(f.CoreService)),this._instantiationService.setService(v.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(l.CoreMouseService)),this._instantiationService.setService(v.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(o.UnicodeService)),this._instantiationService.setService(v.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(a.CharsetService),this._instantiationService.setService(v.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(L.OscLinkService),this._instantiationService.setService(v.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new S.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,s.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,s.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,s.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,s.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(R=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(R=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new y.WriteBuffer((R,T)=>this._inputHandler.parse(R,T))),this.register((0,s.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(M,R){this._writeBuffer.write(M,R)}writeSync(M,R){this._logService.logLevel<=v.LogLevelEnum.WARN&&!g&&(this._logService.warn("writeSync is unreliable and will be removed soon."),g=!0),this._writeBuffer.writeSync(M,R)}resize(M,R){isNaN(M)||isNaN(R)||(M=Math.max(M,E.MINIMUM_COLS),R=Math.max(R,E.MINIMUM_ROWS),this._bufferService.resize(M,R))}scroll(M,R=!1){this._bufferService.scroll(M,R)}scrollLines(M,R,T){this._bufferService.scrollLines(M,R,T)}scrollPages(M){this.scrollLines(M*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(M){const R=M-this._bufferService.buffer.ydisp;R!==0&&this.scrollLines(R)}registerEscHandler(M,R){return this._inputHandler.registerEscHandler(M,R)}registerDcsHandler(M,R){return this._inputHandler.registerDcsHandler(M,R)}registerCsiHandler(M,R){return this._inputHandler.registerCsiHandler(M,R)}registerOscHandler(M,R){return this._inputHandler.registerOscHandler(M,R)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let M=!1;const R=this.optionsService.rawOptions.windowsPty;R&&R.buildNumber!==void 0&&R.buildNumber!==void 0?M=R.backend==="conpty"&&R.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(M=!0),M?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const M=[];M.push(this.onLineFeed(p.updateWindowsModeWrappedState.bind(null,this._bufferService))),M.push(this.registerCsiHandler({final:"H"},()=>((0,p.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,u.toDisposable)(()=>{for(const R of M)R.dispose()})}}}i.CoreTerminal=w},8460:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=c=>(this._listeners.push(c),{dispose:()=>{if(!this._disposed){for(let u=0;u<this._listeners.length;u++)if(this._listeners[u]===c)return void this._listeners.splice(u,1)}}})),this._event}fire(c,u){const v=[];for(let h=0;h<this._listeners.length;h++)v.push(this._listeners[h]);for(let h=0;h<v.length;h++)v[h].call(void 0,c,u)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},i.forwardEvent=function(c,u){return c(v=>u.fire(v))}},5435:function(x,i,c){var u=this&&this.__decorate||function(I,k,A,P){var O,$=arguments.length,W=$<3?k:P===null?P=Object.getOwnPropertyDescriptor(k,A):P;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")W=Reflect.decorate(I,k,A,P);else for(var j=I.length-1;j>=0;j--)(O=I[j])&&(W=($<3?O(W):$>3?O(k,A,W):O(k,A))||W);return $>3&&W&&Object.defineProperty(k,A,W),W},v=this&&this.__param||function(I,k){return function(A,P){k(A,P,I)}};Object.defineProperty(i,"__esModule",{value:!0}),i.InputHandler=i.WindowsOptionsReportType=void 0;const h=c(2584),_=c(7116),E=c(2015),C=c(844),f=c(482),s=c(8437),l=c(8460),o=c(643),a=c(511),p=c(3734),S=c(2585),y=c(6242),L=c(6351),g=c(5941),w={"(":0,")":1,"*":2,"+":3,"-":1,".":2},b=131072;function M(I,k){if(I>24)return k.setWinLines||!1;switch(I){case 1:return!!k.restoreWin;case 2:return!!k.minimizeWin;case 3:return!!k.setWinPosition;case 4:return!!k.setWinSizePixels;case 5:return!!k.raiseWin;case 6:return!!k.lowerWin;case 7:return!!k.refreshWin;case 8:return!!k.setWinSizeChars;case 9:return!!k.maximizeWin;case 10:return!!k.fullscreenWin;case 11:return!!k.getWinState;case 13:return!!k.getWinPosition;case 14:return!!k.getWinSizePixels;case 15:return!!k.getScreenSizePixels;case 16:return!!k.getCellSizePixels;case 18:return!!k.getWinSizeChars;case 19:return!!k.getScreenSizeChars;case 20:return!!k.getIconTitle;case 21:return!!k.getWinTitle;case 22:return!!k.pushTitle;case 23:return!!k.popTitle;case 24:return!!k.setWinLines}return!1}var R;(function(I){I[I.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",I[I.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(R||(i.WindowsOptionsReportType=R={}));let T=0;class B extends C.Disposable{getAttrData(){return this._curAttrData}constructor(k,A,P,O,$,W,j,K,Y=new E.EscapeSequenceParser){super(),this._bufferService=k,this._charsetService=A,this._coreService=P,this._logService=O,this._optionsService=$,this._oscLinkService=W,this._coreMouseService=j,this._unicodeService=K,this._parser=Y,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new f.StringToUtf32,this._utf8Decoder=new f.Utf8ToUtf32,this._workCell=new a.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=s.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=s.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new l.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new l.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new l.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new l.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new l.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new l.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new l.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new l.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new l.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new l.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new l.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new l.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new l.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new F(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(D=>this._activeBuffer=D.activeBuffer)),this._parser.setCsiHandlerFallback((D,N)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(D),params:N.toArray()})}),this._parser.setEscHandlerFallback(D=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(D)})}),this._parser.setExecuteHandlerFallback(D=>{this._logService.debug("Unknown EXECUTE code: ",{code:D})}),this._parser.setOscHandlerFallback((D,N,z)=>{this._logService.debug("Unknown OSC code: ",{identifier:D,action:N,data:z})}),this._parser.setDcsHandlerFallback((D,N,z)=>{N==="HOOK"&&(z=z.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(D),action:N,payload:z})}),this._parser.setPrintHandler((D,N,z)=>this.print(D,N,z)),this._parser.registerCsiHandler({final:"@"},D=>this.insertChars(D)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},D=>this.scrollLeft(D)),this._parser.registerCsiHandler({final:"A"},D=>this.cursorUp(D)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},D=>this.scrollRight(D)),this._parser.registerCsiHandler({final:"B"},D=>this.cursorDown(D)),this._parser.registerCsiHandler({final:"C"},D=>this.cursorForward(D)),this._parser.registerCsiHandler({final:"D"},D=>this.cursorBackward(D)),this._parser.registerCsiHandler({final:"E"},D=>this.cursorNextLine(D)),this._parser.registerCsiHandler({final:"F"},D=>this.cursorPrecedingLine(D)),this._parser.registerCsiHandler({final:"G"},D=>this.cursorCharAbsolute(D)),this._parser.registerCsiHandler({final:"H"},D=>this.cursorPosition(D)),this._parser.registerCsiHandler({final:"I"},D=>this.cursorForwardTab(D)),this._parser.registerCsiHandler({final:"J"},D=>this.eraseInDisplay(D,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},D=>this.eraseInDisplay(D,!0)),this._parser.registerCsiHandler({final:"K"},D=>this.eraseInLine(D,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},D=>this.eraseInLine(D,!0)),this._parser.registerCsiHandler({final:"L"},D=>this.insertLines(D)),this._parser.registerCsiHandler({final:"M"},D=>this.deleteLines(D)),this._parser.registerCsiHandler({final:"P"},D=>this.deleteChars(D)),this._parser.registerCsiHandler({final:"S"},D=>this.scrollUp(D)),this._parser.registerCsiHandler({final:"T"},D=>this.scrollDown(D)),this._parser.registerCsiHandler({final:"X"},D=>this.eraseChars(D)),this._parser.registerCsiHandler({final:"Z"},D=>this.cursorBackwardTab(D)),this._parser.registerCsiHandler({final:"`"},D=>this.charPosAbsolute(D)),this._parser.registerCsiHandler({final:"a"},D=>this.hPositionRelative(D)),this._parser.registerCsiHandler({final:"b"},D=>this.repeatPrecedingCharacter(D)),this._parser.registerCsiHandler({final:"c"},D=>this.sendDeviceAttributesPrimary(D)),this._parser.registerCsiHandler({prefix:">",final:"c"},D=>this.sendDeviceAttributesSecondary(D)),this._parser.registerCsiHandler({final:"d"},D=>this.linePosAbsolute(D)),this._parser.registerCsiHandler({final:"e"},D=>this.vPositionRelative(D)),this._parser.registerCsiHandler({final:"f"},D=>this.hVPosition(D)),this._parser.registerCsiHandler({final:"g"},D=>this.tabClear(D)),this._parser.registerCsiHandler({final:"h"},D=>this.setMode(D)),this._parser.registerCsiHandler({prefix:"?",final:"h"},D=>this.setModePrivate(D)),this._parser.registerCsiHandler({final:"l"},D=>this.resetMode(D)),this._parser.registerCsiHandler({prefix:"?",final:"l"},D=>this.resetModePrivate(D)),this._parser.registerCsiHandler({final:"m"},D=>this.charAttributes(D)),this._parser.registerCsiHandler({final:"n"},D=>this.deviceStatus(D)),this._parser.registerCsiHandler({prefix:"?",final:"n"},D=>this.deviceStatusPrivate(D)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},D=>this.softReset(D)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},D=>this.setCursorStyle(D)),this._parser.registerCsiHandler({final:"r"},D=>this.setScrollRegion(D)),this._parser.registerCsiHandler({final:"s"},D=>this.saveCursor(D)),this._parser.registerCsiHandler({final:"t"},D=>this.windowOptions(D)),this._parser.registerCsiHandler({final:"u"},D=>this.restoreCursor(D)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},D=>this.insertColumns(D)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},D=>this.deleteColumns(D)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},D=>this.selectProtected(D)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},D=>this.requestMode(D,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},D=>this.requestMode(D,!1)),this._parser.setExecuteHandler(h.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(h.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(h.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(h.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(h.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(h.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(h.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(h.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(h.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(h.C1.IND,()=>this.index()),this._parser.setExecuteHandler(h.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(h.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new y.OscHandler(D=>(this.setTitle(D),this.setIconName(D),!0))),this._parser.registerOscHandler(1,new y.OscHandler(D=>this.setIconName(D))),this._parser.registerOscHandler(2,new y.OscHandler(D=>this.setTitle(D))),this._parser.registerOscHandler(4,new y.OscHandler(D=>this.setOrReportIndexedColor(D))),this._parser.registerOscHandler(8,new y.OscHandler(D=>this.setHyperlink(D))),this._parser.registerOscHandler(10,new y.OscHandler(D=>this.setOrReportFgColor(D))),this._parser.registerOscHandler(11,new y.OscHandler(D=>this.setOrReportBgColor(D))),this._parser.registerOscHandler(12,new y.OscHandler(D=>this.setOrReportCursorColor(D))),this._parser.registerOscHandler(104,new y.OscHandler(D=>this.restoreIndexedColor(D))),this._parser.registerOscHandler(110,new y.OscHandler(D=>this.restoreFgColor(D))),this._parser.registerOscHandler(111,new y.OscHandler(D=>this.restoreBgColor(D))),this._parser.registerOscHandler(112,new y.OscHandler(D=>this.restoreCursorColor(D))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const D in _.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:D},()=>this.selectCharset("("+D)),this._parser.registerEscHandler({intermediates:")",final:D},()=>this.selectCharset(")"+D)),this._parser.registerEscHandler({intermediates:"*",final:D},()=>this.selectCharset("*"+D)),this._parser.registerEscHandler({intermediates:"+",final:D},()=>this.selectCharset("+"+D)),this._parser.registerEscHandler({intermediates:"-",final:D},()=>this.selectCharset("-"+D)),this._parser.registerEscHandler({intermediates:".",final:D},()=>this.selectCharset("."+D)),this._parser.registerEscHandler({intermediates:"/",final:D},()=>this.selectCharset("/"+D));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(D=>(this._logService.error("Parsing error: ",D),D)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new L.DcsHandler((D,N)=>this.requestStatusString(D,N)))}_preserveStack(k,A,P,O){this._parseStack.paused=!0,this._parseStack.cursorStartX=k,this._parseStack.cursorStartY=A,this._parseStack.decodedLength=P,this._parseStack.position=O}_logSlowResolvingAsync(k){this._logService.logLevel<=S.LogLevelEnum.WARN&&Promise.race([k,new Promise((A,P)=>setTimeout(()=>P("#SLOW_TIMEOUT"),5e3))]).catch(A=>{if(A!=="#SLOW_TIMEOUT")throw A;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(k,A){let P,O=this._activeBuffer.x,$=this._activeBuffer.y,W=0;const j=this._parseStack.paused;if(j){if(P=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,A))return this._logSlowResolvingAsync(P),P;O=this._parseStack.cursorStartX,$=this._parseStack.cursorStartY,this._parseStack.paused=!1,k.length>b&&(W=this._parseStack.position+b)}if(this._logService.logLevel<=S.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof k=="string"?` "${k}"`:` "${Array.prototype.map.call(k,K=>String.fromCharCode(K)).join("")}"`),typeof k=="string"?k.split("").map(K=>K.charCodeAt(0)):k),this._parseBuffer.length<k.length&&this._parseBuffer.length<b&&(this._parseBuffer=new Uint32Array(Math.min(k.length,b))),j||this._dirtyRowTracker.clearRange(),k.length>b)for(let K=W;K<k.length;K+=b){const Y=K+b<k.length?K+b:k.length,D=typeof k=="string"?this._stringDecoder.decode(k.substring(K,Y),this._parseBuffer):this._utf8Decoder.decode(k.subarray(K,Y),this._parseBuffer);if(P=this._parser.parse(this._parseBuffer,D))return this._preserveStack(O,$,D,K),this._logSlowResolvingAsync(P),P}else if(!j){const K=typeof k=="string"?this._stringDecoder.decode(k,this._parseBuffer):this._utf8Decoder.decode(k,this._parseBuffer);if(P=this._parser.parse(this._parseBuffer,K))return this._preserveStack(O,$,K,0),this._logSlowResolvingAsync(P),P}this._activeBuffer.x===O&&this._activeBuffer.y===$||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(k,A,P){let O,$;const W=this._charsetService.charset,j=this._optionsService.rawOptions.screenReaderMode,K=this._bufferService.cols,Y=this._coreService.decPrivateModes.wraparound,D=this._coreService.modes.insertMode,N=this._curAttrData;let z=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&P-A>0&&z.getWidth(this._activeBuffer.x-1)===2&&z.setCellFromCodePoint(this._activeBuffer.x-1,0,1,N.fg,N.bg,N.extended);for(let U=A;U<P;++U){if(O=k[U],$=this._unicodeService.wcwidth(O),O<127&&W){const J=W[String.fromCharCode(O)];J&&(O=J.charCodeAt(0))}if(j&&this._onA11yChar.fire((0,f.stringFromCodePoint)(O)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),$||!this._activeBuffer.x){if(this._activeBuffer.x+$-1>=K){if(Y){for(;this._activeBuffer.x<K;)z.setCellFromCodePoint(this._activeBuffer.x++,0,1,N.fg,N.bg,N.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),z=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=K-1,$===2)continue}if(D&&(z.insertCells(this._activeBuffer.x,$,this._activeBuffer.getNullCell(N),N),z.getWidth(K-1)===2&&z.setCellFromCodePoint(K-1,o.NULL_CELL_CODE,o.NULL_CELL_WIDTH,N.fg,N.bg,N.extended)),z.setCellFromCodePoint(this._activeBuffer.x++,O,$,N.fg,N.bg,N.extended),$>0)for(;--$;)z.setCellFromCodePoint(this._activeBuffer.x++,0,0,N.fg,N.bg,N.extended)}else z.getWidth(this._activeBuffer.x-1)?z.addCodepointToCell(this._activeBuffer.x-1,O):z.addCodepointToCell(this._activeBuffer.x-2,O)}P-A>0&&(z.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<K&&P-A>0&&z.getWidth(this._activeBuffer.x)===0&&!z.hasContent(this._activeBuffer.x)&&z.setCellFromCodePoint(this._activeBuffer.x,0,1,N.fg,N.bg,N.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(k,A){return k.final!=="t"||k.prefix||k.intermediates?this._parser.registerCsiHandler(k,A):this._parser.registerCsiHandler(k,P=>!M(P.params[0],this._optionsService.rawOptions.windowOptions)||A(P))}registerDcsHandler(k,A){return this._parser.registerDcsHandler(k,new L.DcsHandler(A))}registerEscHandler(k,A){return this._parser.registerEscHandler(k,A)}registerOscHandler(k,A){return this._parser.registerOscHandler(k,new y.OscHandler(A))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var k;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((k=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||k===void 0)&&k.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);A.hasWidth(this._activeBuffer.x)&&!A.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const k=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-k),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(k=this._bufferService.cols-1){this._activeBuffer.x=Math.min(k,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(k,A){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=k,this._activeBuffer.y=this._activeBuffer.scrollTop+A):(this._activeBuffer.x=k,this._activeBuffer.y=A),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(k,A){this._restrictCursor(),this._setCursor(this._activeBuffer.x+k,this._activeBuffer.y+A)}cursorUp(k){const A=this._activeBuffer.y-this._activeBuffer.scrollTop;return A>=0?this._moveCursor(0,-Math.min(A,k.params[0]||1)):this._moveCursor(0,-(k.params[0]||1)),!0}cursorDown(k){const A=this._activeBuffer.scrollBottom-this._activeBuffer.y;return A>=0?this._moveCursor(0,Math.min(A,k.params[0]||1)):this._moveCursor(0,k.params[0]||1),!0}cursorForward(k){return this._moveCursor(k.params[0]||1,0),!0}cursorBackward(k){return this._moveCursor(-(k.params[0]||1),0),!0}cursorNextLine(k){return this.cursorDown(k),this._activeBuffer.x=0,!0}cursorPrecedingLine(k){return this.cursorUp(k),this._activeBuffer.x=0,!0}cursorCharAbsolute(k){return this._setCursor((k.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(k){return this._setCursor(k.length>=2?(k.params[1]||1)-1:0,(k.params[0]||1)-1),!0}charPosAbsolute(k){return this._setCursor((k.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(k){return this._moveCursor(k.params[0]||1,0),!0}linePosAbsolute(k){return this._setCursor(this._activeBuffer.x,(k.params[0]||1)-1),!0}vPositionRelative(k){return this._moveCursor(0,k.params[0]||1),!0}hVPosition(k){return this.cursorPosition(k),!0}tabClear(k){const A=k.params[0];return A===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:A===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(k){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let A=k.params[0]||1;for(;A--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(k){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let A=k.params[0]||1;for(;A--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(k){const A=k.params[0];return A===1&&(this._curAttrData.bg|=536870912),A!==2&&A!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(k,A,P,O=!1,$=!1){const W=this._activeBuffer.lines.get(this._activeBuffer.ybase+k);W.replaceCells(A,P,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),$),O&&(W.isWrapped=!1)}_resetBufferLine(k,A=!1){const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+k);P&&(P.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),A),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+k),P.isWrapped=!1)}eraseInDisplay(k,A=!1){let P;switch(this._restrictCursor(this._bufferService.cols),k.params[0]){case 0:for(P=this._activeBuffer.y,this._dirtyRowTracker.markDirty(P),this._eraseInBufferLine(P++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,A);P<this._bufferService.rows;P++)this._resetBufferLine(P,A);this._dirtyRowTracker.markDirty(P);break;case 1:for(P=this._activeBuffer.y,this._dirtyRowTracker.markDirty(P),this._eraseInBufferLine(P,0,this._activeBuffer.x+1,!0,A),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(P+1).isWrapped=!1);P--;)this._resetBufferLine(P,A);this._dirtyRowTracker.markDirty(0);break;case 2:for(P=this._bufferService.rows,this._dirtyRowTracker.markDirty(P-1);P--;)this._resetBufferLine(P,A);this._dirtyRowTracker.markDirty(0);break;case 3:const O=this._activeBuffer.lines.length-this._bufferService.rows;O>0&&(this._activeBuffer.lines.trimStart(O),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-O,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-O,0),this._onScroll.fire(0))}return!0}eraseInLine(k,A=!1){switch(this._restrictCursor(this._bufferService.cols),k.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,A);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,A);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,A)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(k){this._restrictCursor();let A=k.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=this._activeBuffer.ybase+this._activeBuffer.y,O=this._bufferService.rows-1-this._activeBuffer.scrollBottom,$=this._bufferService.rows-1+this._activeBuffer.ybase-O+1;for(;A--;)this._activeBuffer.lines.splice($-1,1),this._activeBuffer.lines.splice(P,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(k){this._restrictCursor();let A=k.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=this._activeBuffer.ybase+this._activeBuffer.y;let O;for(O=this._bufferService.rows-1-this._activeBuffer.scrollBottom,O=this._bufferService.rows-1+this._activeBuffer.ybase-O;A--;)this._activeBuffer.lines.splice(P,1),this._activeBuffer.lines.splice(O,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(k){this._restrictCursor();const A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return A&&(A.insertCells(this._activeBuffer.x,k.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(k){this._restrictCursor();const A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return A&&(A.deleteCells(this._activeBuffer.x,k.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(k){let A=k.params[0]||1;for(;A--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(k){let A=k.params[0]||1;for(;A--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(s.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(k){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const A=k.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);O.deleteCells(0,A,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),O.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(k){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const A=k.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);O.insertCells(0,A,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),O.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(k){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const A=k.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);O.insertCells(this._activeBuffer.x,A,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),O.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(k){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const A=k.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);O.deleteCells(this._activeBuffer.x,A,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),O.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(k){this._restrictCursor();const A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return A&&(A.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(k.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(k){if(!this._parser.precedingCodepoint)return!0;const A=k.params[0]||1,P=new Uint32Array(A);for(let O=0;O<A;++O)P[O]=this._parser.precedingCodepoint;return this.print(P,0,P.length),!0}sendDeviceAttributesPrimary(k){return k.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(h.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(h.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(k){return k.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(h.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(h.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(k.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(h.C0.ESC+"[>83;40003;0c")),!0}_is(k){return(this._optionsService.rawOptions.termName+"").indexOf(k)===0}setMode(k){for(let A=0;A<k.length;A++)switch(k.params[A]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(k){for(let A=0;A<k.length;A++)switch(k.params[A]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,_.DEFAULT_CHARSET),this._charsetService.setgCharset(1,_.DEFAULT_CHARSET),this._charsetService.setgCharset(2,_.DEFAULT_CHARSET),this._charsetService.setgCharset(3,_.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(k){for(let A=0;A<k.length;A++)switch(k.params[A]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(k){for(let A=0;A<k.length;A++)switch(k.params[A]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),k.params[A]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(k,A){const P=this._coreService.decPrivateModes,{activeProtocol:O,activeEncoding:$}=this._coreMouseService,W=this._coreService,{buffers:j,cols:K}=this._bufferService,{active:Y,alt:D}=j,N=this._optionsService.rawOptions,z=te=>te?1:2,U=k.params[0];return J=U,q=A?U===2?4:U===4?z(W.modes.insertMode):U===12?3:U===20?z(N.convertEol):0:U===1?z(P.applicationCursorKeys):U===3?N.windowOptions.setWinLines?K===80?2:K===132?1:0:0:U===6?z(P.origin):U===7?z(P.wraparound):U===8?3:U===9?z(O==="X10"):U===12?z(N.cursorBlink):U===25?z(!W.isCursorHidden):U===45?z(P.reverseWraparound):U===66?z(P.applicationKeypad):U===67?4:U===1e3?z(O==="VT200"):U===1002?z(O==="DRAG"):U===1003?z(O==="ANY"):U===1004?z(P.sendFocus):U===1005?4:U===1006?z($==="SGR"):U===1015?4:U===1016?z($==="SGR_PIXELS"):U===1048?1:U===47||U===1047||U===1049?z(Y===D):U===2004?z(P.bracketedPasteMode):0,W.triggerDataEvent(`${h.C0.ESC}[${A?"":"?"}${J};${q}$y`),!0;var J,q}_updateAttrColor(k,A,P,O,$){return A===2?(k|=50331648,k&=-16777216,k|=p.AttributeData.fromColorRGB([P,O,$])):A===5&&(k&=-50331904,k|=33554432|255&P),k}_extractColor(k,A,P){const O=[0,0,-1,0,0,0];let $=0,W=0;do{if(O[W+$]=k.params[A+W],k.hasSubParams(A+W)){const j=k.getSubParams(A+W);let K=0;do O[1]===5&&($=1),O[W+K+1+$]=j[K];while(++K<j.length&&K+W+1+$<O.length);break}if(O[1]===5&&W+$>=2||O[1]===2&&W+$>=5)break;O[1]&&($=1)}while(++W+A<k.length&&W+$<O.length);for(let j=2;j<O.length;++j)O[j]===-1&&(O[j]=0);switch(O[0]){case 38:P.fg=this._updateAttrColor(P.fg,O[1],O[3],O[4],O[5]);break;case 48:P.bg=this._updateAttrColor(P.bg,O[1],O[3],O[4],O[5]);break;case 58:P.extended=P.extended.clone(),P.extended.underlineColor=this._updateAttrColor(P.extended.underlineColor,O[1],O[3],O[4],O[5])}return W}_processUnderline(k,A){A.extended=A.extended.clone(),(!~k||k>5)&&(k=1),A.extended.underlineStyle=k,A.fg|=268435456,k===0&&(A.fg&=-268435457),A.updateExtended()}_processSGR0(k){k.fg=s.DEFAULT_ATTR_DATA.fg,k.bg=s.DEFAULT_ATTR_DATA.bg,k.extended=k.extended.clone(),k.extended.underlineStyle=0,k.extended.underlineColor&=-67108864,k.updateExtended()}charAttributes(k){if(k.length===1&&k.params[0]===0)return this._processSGR0(this._curAttrData),!0;const A=k.length;let P;const O=this._curAttrData;for(let $=0;$<A;$++)P=k.params[$],P>=30&&P<=37?(O.fg&=-50331904,O.fg|=16777216|P-30):P>=40&&P<=47?(O.bg&=-50331904,O.bg|=16777216|P-40):P>=90&&P<=97?(O.fg&=-50331904,O.fg|=16777224|P-90):P>=100&&P<=107?(O.bg&=-50331904,O.bg|=16777224|P-100):P===0?this._processSGR0(O):P===1?O.fg|=134217728:P===3?O.bg|=67108864:P===4?(O.fg|=268435456,this._processUnderline(k.hasSubParams($)?k.getSubParams($)[0]:1,O)):P===5?O.fg|=536870912:P===7?O.fg|=67108864:P===8?O.fg|=1073741824:P===9?O.fg|=2147483648:P===2?O.bg|=134217728:P===21?this._processUnderline(2,O):P===22?(O.fg&=-134217729,O.bg&=-134217729):P===23?O.bg&=-67108865:P===24?(O.fg&=-268435457,this._processUnderline(0,O)):P===25?O.fg&=-536870913:P===27?O.fg&=-67108865:P===28?O.fg&=-1073741825:P===29?O.fg&=2147483647:P===39?(O.fg&=-67108864,O.fg|=16777215&s.DEFAULT_ATTR_DATA.fg):P===49?(O.bg&=-67108864,O.bg|=16777215&s.DEFAULT_ATTR_DATA.bg):P===38||P===48||P===58?$+=this._extractColor(k,$,O):P===53?O.bg|=1073741824:P===55?O.bg&=-1073741825:P===59?(O.extended=O.extended.clone(),O.extended.underlineColor=-1,O.updateExtended()):P===100?(O.fg&=-67108864,O.fg|=16777215&s.DEFAULT_ATTR_DATA.fg,O.bg&=-67108864,O.bg|=16777215&s.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",P);return!0}deviceStatus(k){switch(k.params[0]){case 5:this._coreService.triggerDataEvent(`${h.C0.ESC}[0n`);break;case 6:const A=this._activeBuffer.y+1,P=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${h.C0.ESC}[${A};${P}R`)}return!0}deviceStatusPrivate(k){if(k.params[0]===6){const A=this._activeBuffer.y+1,P=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${h.C0.ESC}[?${A};${P}R`)}return!0}softReset(k){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=s.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(k){const A=k.params[0]||1;switch(A){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const P=A%2==1;return this._optionsService.options.cursorBlink=P,!0}setScrollRegion(k){const A=k.params[0]||1;let P;return(k.length<2||(P=k.params[1])>this._bufferService.rows||P===0)&&(P=this._bufferService.rows),P>A&&(this._activeBuffer.scrollTop=A-1,this._activeBuffer.scrollBottom=P-1,this._setCursor(0,0)),!0}windowOptions(k){if(!M(k.params[0],this._optionsService.rawOptions.windowOptions))return!0;const A=k.length>1?k.params[1]:0;switch(k.params[0]){case 14:A!==2&&this._onRequestWindowsOptionsReport.fire(R.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(R.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${h.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:A!==0&&A!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),A!==0&&A!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:A!==0&&A!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),A!==0&&A!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(k){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(k){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(k){return this._windowTitle=k,this._onTitleChange.fire(k),!0}setIconName(k){return this._iconName=k,!0}setOrReportIndexedColor(k){const A=[],P=k.split(";");for(;P.length>1;){const O=P.shift(),$=P.shift();if(/^\d+$/.exec(O)){const W=parseInt(O);if(H(W))if($==="?")A.push({type:0,index:W});else{const j=(0,g.parseColor)($);j&&A.push({type:1,index:W,color:j})}}}return A.length&&this._onColor.fire(A),!0}setHyperlink(k){const A=k.split(";");return!(A.length<2)&&(A[1]?this._createHyperlink(A[0],A[1]):!A[0]&&this._finishHyperlink())}_createHyperlink(k,A){this._getCurrentLinkId()&&this._finishHyperlink();const P=k.split(":");let O;const $=P.findIndex(W=>W.startsWith("id="));return $!==-1&&(O=P[$].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:O,uri:A}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(k,A){const P=k.split(";");for(let O=0;O<P.length&&!(A>=this._specialColors.length);++O,++A)if(P[O]==="?")this._onColor.fire([{type:0,index:this._specialColors[A]}]);else{const $=(0,g.parseColor)(P[O]);$&&this._onColor.fire([{type:1,index:this._specialColors[A],color:$}])}return!0}setOrReportFgColor(k){return this._setOrReportSpecialColor(k,0)}setOrReportBgColor(k){return this._setOrReportSpecialColor(k,1)}setOrReportCursorColor(k){return this._setOrReportSpecialColor(k,2)}restoreIndexedColor(k){if(!k)return this._onColor.fire([{type:2}]),!0;const A=[],P=k.split(";");for(let O=0;O<P.length;++O)if(/^\d+$/.exec(P[O])){const $=parseInt(P[O]);H($)&&A.push({type:2,index:$})}return A.length&&this._onColor.fire(A),!0}restoreFgColor(k){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(k){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(k){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,_.DEFAULT_CHARSET),!0}selectCharset(k){return k.length!==2?(this.selectDefaultCharset(),!0):(k[0]==="/"||this._charsetService.setgCharset(w[k[0]],_.CHARSETS[k[1]]||_.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const k=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,k,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=s.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=s.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(k){return this._charsetService.setgLevel(k),!0}screenAlignmentPattern(){const k=new a.CellData;k.content=4194373,k.fg=this._curAttrData.fg,k.bg=this._curAttrData.bg,this._setCursor(0,0);for(let A=0;A<this._bufferService.rows;++A){const P=this._activeBuffer.ybase+this._activeBuffer.y+A,O=this._activeBuffer.lines.get(P);O&&(O.fill(k),O.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(k,A){const P=this._bufferService.buffer,O=this._optionsService.rawOptions;return($=>(this._coreService.triggerDataEvent(`${h.C0.ESC}${$}${h.C0.ESC}\\`),!0))(k==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:k==='"p'?'P1$r61;1"p':k==="r"?`P1$r${P.scrollTop+1};${P.scrollBottom+1}r`:k==="m"?"P1$r0m":k===" q"?`P1$r${{block:2,underline:4,bar:6}[O.cursorStyle]-(O.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(k,A){this._dirtyRowTracker.markRangeDirty(k,A)}}i.InputHandler=B;let F=class{constructor(I){this._bufferService=I,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(I){I<this.start?this.start=I:I>this.end&&(this.end=I)}markRangeDirty(I,k){I>k&&(T=I,I=k,k=T),I<this.start&&(this.start=I),k>this.end&&(this.end=k)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function H(I){return 0<=I&&I<256}F=u([v(0,S.IBufferService)],F)},844:(x,i)=>{function c(u){for(const v of u)v.dispose();u.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.MutableDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const u of this._disposables)u.dispose();this._disposables.length=0}register(u){return this._disposables.push(u),u}unregister(u){const v=this._disposables.indexOf(u);v!==-1&&this._disposables.splice(v,1)}},i.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(u){var v;this._isDisposed||u===this._value||((v=this._value)===null||v===void 0||v.dispose(),this._value=u)}clear(){this.value=void 0}dispose(){var u;this._isDisposed=!0,(u=this._value)===null||u===void 0||u.dispose(),this._value=void 0}},i.toDisposable=function(u){return{dispose:u}},i.disposeArray=c,i.getDisposeArrayDisposable=function(u){return{dispose:()=>c(u)}}},1505:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class c{constructor(){this._data={}}set(v,h,_){this._data[v]||(this._data[v]={}),this._data[v][h]=_}get(v,h){return this._data[v]?this._data[v][h]:void 0}clear(){this._data={}}}i.TwoKeyMap=c,i.FourKeyMap=class{constructor(){this._data=new c}set(u,v,h,_,E){this._data.get(u,v)||this._data.set(u,v,new c),this._data.get(u,v).set(h,_,E)}get(u,v,h,_){var E;return(E=this._data.get(u,v))===null||E===void 0?void 0:E.get(h,_)}clear(){this._data.clear()}}},6114:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof navigator>"u";const c=i.isNode?"node":navigator.userAgent,u=i.isNode?"node":navigator.platform;i.isFirefox=c.includes("Firefox"),i.isLegacyEdge=c.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(c),i.getSafariVersion=function(){if(!i.isSafari)return 0;const v=c.match(/Version\/(\d+)/);return v===null||v.length<2?0:parseInt(v[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(u),i.isIpad=u==="iPad",i.isIphone=u==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(u),i.isLinux=u.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(c)},6106:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SortedList=void 0;let c=0;i.SortedList=class{constructor(u){this._getKey=u,this._array=[]}clear(){this._array.length=0}insert(u){this._array.length!==0?(c=this._search(this._getKey(u)),this._array.splice(c,0,u)):this._array.push(u)}delete(u){if(this._array.length===0)return!1;const v=this._getKey(u);if(v===void 0||(c=this._search(v),c===-1)||this._getKey(this._array[c])!==v)return!1;do if(this._array[c]===u)return this._array.splice(c,1),!0;while(++c<this._array.length&&this._getKey(this._array[c])===v);return!1}*getKeyIterator(u){if(this._array.length!==0&&(c=this._search(u),!(c<0||c>=this._array.length)&&this._getKey(this._array[c])===u))do yield this._array[c];while(++c<this._array.length&&this._getKey(this._array[c])===u)}forEachByKey(u,v){if(this._array.length!==0&&(c=this._search(u),!(c<0||c>=this._array.length)&&this._getKey(this._array[c])===u))do v(this._array[c]);while(++c<this._array.length&&this._getKey(this._array[c])===u)}values(){return[...this._array].values()}_search(u){let v=0,h=this._array.length-1;for(;h>=v;){let _=v+h>>1;const E=this._getKey(this._array[_]);if(E>u)h=_-1;else{if(!(E<u)){for(;_>0&&this._getKey(this._array[_-1])===u;)_--;return _}v=_+1}}return v}}},7226:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;const u=c(6114);class v{constructor(){this._tasks=[],this._i=0}enqueue(E){this._tasks.push(E),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(E){this._idleCallback=void 0;let C=0,f=0,s=E.timeRemaining(),l=0;for(;this._i<this._tasks.length;){if(C=Date.now(),this._tasks[this._i]()||this._i++,C=Math.max(1,Date.now()-C),f=Math.max(C,f),l=E.timeRemaining(),1.5*f>l)return s-C<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(s-C))}ms`),void this._start();s=l}this.clear()}}class h extends v{_requestCallback(E){return setTimeout(()=>E(this._createDeadline(16)))}_cancelCallback(E){clearTimeout(E)}_createDeadline(E){const C=Date.now()+E;return{timeRemaining:()=>Math.max(0,C-Date.now())}}}i.PriorityTaskQueue=h,i.IdleTaskQueue=!u.isNode&&"requestIdleCallback"in window?class extends v{_requestCallback(_){return requestIdleCallback(_)}_cancelCallback(_){cancelIdleCallback(_)}}:h,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(_){this._queue.clear(),this._queue.enqueue(_)}flush(){this._queue.flush()}}},9282:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.updateWindowsModeWrappedState=void 0;const u=c(643);i.updateWindowsModeWrappedState=function(v){const h=v.buffer.lines.get(v.buffer.ybase+v.buffer.y-1),_=h==null?void 0:h.get(v.cols-1),E=v.buffer.lines.get(v.buffer.ybase+v.buffer.y);E&&_&&(E.isWrapped=_[u.CHAR_DATA_CODE_INDEX]!==u.NULL_CELL_CODE&&_[u.CHAR_DATA_CODE_INDEX]!==u.WHITESPACE_CELL_CODE)}},3734:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class c{constructor(){this.fg=0,this.bg=0,this.extended=new u}static toColorRGB(h){return[h>>>16&255,h>>>8&255,255&h]}static fromColorRGB(h){return(255&h[0])<<16|(255&h[1])<<8|255&h[2]}clone(){const h=new c;return h.fg=this.fg,h.bg=this.bg,h.extended=this.extended.clone(),h}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}i.AttributeData=c;class u{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(h){this._ext=h}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(h){this._ext&=-469762049,this._ext|=h<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(h){this._ext&=-67108864,this._ext|=67108863&h}get urlId(){return this._urlId}set urlId(h){this._urlId=h}constructor(h=0,_=0){this._ext=0,this._urlId=0,this._ext=h,this._urlId=_}clone(){return new u(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=u},9092:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Buffer=i.MAX_BUFFER_SIZE=void 0;const u=c(6349),v=c(7226),h=c(3734),_=c(8437),E=c(4634),C=c(511),f=c(643),s=c(4863),l=c(7116);i.MAX_BUFFER_SIZE=4294967295,i.Buffer=class{constructor(o,a,p){this._hasScrollback=o,this._optionsService=a,this._bufferService=p,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=_.DEFAULT_ATTR_DATA.clone(),this.savedCharset=l.DEFAULT_CHARSET,this.markers=[],this._nullCell=C.CellData.fromCharData([0,f.NULL_CELL_CHAR,f.NULL_CELL_WIDTH,f.NULL_CELL_CODE]),this._whitespaceCell=C.CellData.fromCharData([0,f.WHITESPACE_CELL_CHAR,f.WHITESPACE_CELL_WIDTH,f.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new v.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new u.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(o){return o?(this._nullCell.fg=o.fg,this._nullCell.bg=o.bg,this._nullCell.extended=o.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new h.ExtendedAttrs),this._nullCell}getWhitespaceCell(o){return o?(this._whitespaceCell.fg=o.fg,this._whitespaceCell.bg=o.bg,this._whitespaceCell.extended=o.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new h.ExtendedAttrs),this._whitespaceCell}getBlankLine(o,a){return new _.BufferLine(this._bufferService.cols,this.getNullCell(o),a)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const o=this.ybase+this.y-this.ydisp;return o>=0&&o<this._rows}_getCorrectBufferLength(o){if(!this._hasScrollback)return o;const a=o+this._optionsService.rawOptions.scrollback;return a>i.MAX_BUFFER_SIZE?i.MAX_BUFFER_SIZE:a}fillViewportRows(o){if(this.lines.length===0){o===void 0&&(o=_.DEFAULT_ATTR_DATA);let a=this._rows;for(;a--;)this.lines.push(this.getBlankLine(o))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new u.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(o,a){const p=this.getNullCell(_.DEFAULT_ATTR_DATA);let S=0;const y=this._getCorrectBufferLength(a);if(y>this.lines.maxLength&&(this.lines.maxLength=y),this.lines.length>0){if(this._cols<o)for(let g=0;g<this.lines.length;g++)S+=+this.lines.get(g).resize(o,p);let L=0;if(this._rows<a)for(let g=this._rows;g<a;g++)this.lines.length<a+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new _.BufferLine(o,p)):this.ybase>0&&this.lines.length<=this.ybase+this.y+L+1?(this.ybase--,L++,this.ydisp>0&&this.ydisp--):this.lines.push(new _.BufferLine(o,p)));else for(let g=this._rows;g>a;g--)this.lines.length>a+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(y<this.lines.maxLength){const g=this.lines.length-y;g>0&&(this.lines.trimStart(g),this.ybase=Math.max(this.ybase-g,0),this.ydisp=Math.max(this.ydisp-g,0),this.savedY=Math.max(this.savedY-g,0)),this.lines.maxLength=y}this.x=Math.min(this.x,o-1),this.y=Math.min(this.y,a-1),L&&(this.y+=L),this.savedX=Math.min(this.savedX,o-1),this.scrollTop=0}if(this.scrollBottom=a-1,this._isReflowEnabled&&(this._reflow(o,a),this._cols>o))for(let L=0;L<this.lines.length;L++)S+=+this.lines.get(L).resize(o,p);this._cols=o,this._rows=a,this._memoryCleanupQueue.clear(),S>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let o=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,o=!1);let a=0;for(;this._memoryCleanupPosition<this.lines.length;)if(a+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),a>100)return!0;return o}get _isReflowEnabled(){const o=this._optionsService.rawOptions.windowsPty;return o&&o.buildNumber?this._hasScrollback&&o.backend==="conpty"&&o.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(o,a){this._cols!==o&&(o>this._cols?this._reflowLarger(o,a):this._reflowSmaller(o,a))}_reflowLarger(o,a){const p=(0,E.reflowLargerGetLinesToRemove)(this.lines,this._cols,o,this.ybase+this.y,this.getNullCell(_.DEFAULT_ATTR_DATA));if(p.length>0){const S=(0,E.reflowLargerCreateNewLayout)(this.lines,p);(0,E.reflowLargerApplyNewLayout)(this.lines,S.layout),this._reflowLargerAdjustViewport(o,a,S.countRemoved)}}_reflowLargerAdjustViewport(o,a,p){const S=this.getNullCell(_.DEFAULT_ATTR_DATA);let y=p;for(;y-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<a&&this.lines.push(new _.BufferLine(o,S))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-p,0)}_reflowSmaller(o,a){const p=this.getNullCell(_.DEFAULT_ATTR_DATA),S=[];let y=0;for(let L=this.lines.length-1;L>=0;L--){let g=this.lines.get(L);if(!g||!g.isWrapped&&g.getTrimmedLength()<=o)continue;const w=[g];for(;g.isWrapped&&L>0;)g=this.lines.get(--L),w.unshift(g);const b=this.ybase+this.y;if(b>=L&&b<L+w.length)continue;const M=w[w.length-1].getTrimmedLength(),R=(0,E.reflowSmallerGetNewLineLengths)(w,this._cols,o),T=R.length-w.length;let B;B=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+T):Math.max(0,this.lines.length-this.lines.maxLength+T);const F=[];for(let O=0;O<T;O++){const $=this.getBlankLine(_.DEFAULT_ATTR_DATA,!0);F.push($)}F.length>0&&(S.push({start:L+w.length+y,newLines:F}),y+=F.length),w.push(...F);let H=R.length-1,I=R[H];I===0&&(H--,I=R[H]);let k=w.length-T-1,A=M;for(;k>=0;){const O=Math.min(A,I);if(w[H]===void 0)break;if(w[H].copyCellsFrom(w[k],A-O,I-O,O,!0),I-=O,I===0&&(H--,I=R[H]),A-=O,A===0){k--;const $=Math.max(k,0);A=(0,E.getWrappedLineTrimmedLength)(w,$,this._cols)}}for(let O=0;O<w.length;O++)R[O]<o&&w[O].setCell(R[O],p);let P=T-B;for(;P-- >0;)this.ybase===0?this.y<a-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+y)-a&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+T,this.ybase+a-1)}if(S.length>0){const L=[],g=[];for(let H=0;H<this.lines.length;H++)g.push(this.lines.get(H));const w=this.lines.length;let b=w-1,M=0,R=S[M];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+y);let T=0;for(let H=Math.min(this.lines.maxLength-1,w+y-1);H>=0;H--)if(R&&R.start>b+T){for(let I=R.newLines.length-1;I>=0;I--)this.lines.set(H--,R.newLines[I]);H++,L.push({index:b+1,amount:R.newLines.length}),T+=R.newLines.length,R=S[++M]}else this.lines.set(H,g[b--]);let B=0;for(let H=L.length-1;H>=0;H--)L[H].index+=B,this.lines.onInsertEmitter.fire(L[H]),B+=L[H].amount;const F=Math.max(0,w+y-this.lines.maxLength);F>0&&this.lines.onTrimEmitter.fire(F)}}translateBufferLineToString(o,a,p=0,S){const y=this.lines.get(o);return y?y.translateToString(a,p,S):""}getWrappedRangeForLine(o){let a=o,p=o;for(;a>0&&this.lines.get(a).isWrapped;)a--;for(;p+1<this.lines.length&&this.lines.get(p+1).isWrapped;)p++;return{first:a,last:p}}setupTabStops(o){for(o!=null?this.tabs[o]||(o=this.prevStop(o)):(this.tabs={},o=0);o<this._cols;o+=this._optionsService.rawOptions.tabStopWidth)this.tabs[o]=!0}prevStop(o){for(o==null&&(o=this.x);!this.tabs[--o]&&o>0;);return o>=this._cols?this._cols-1:o<0?0:o}nextStop(o){for(o==null&&(o=this.x);!this.tabs[++o]&&o<this._cols;);return o>=this._cols?this._cols-1:o<0?0:o}clearMarkers(o){this._isClearing=!0;for(let a=0;a<this.markers.length;a++)this.markers[a].line===o&&(this.markers[a].dispose(),this.markers.splice(a--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let o=0;o<this.markers.length;o++)this.markers[o].dispose(),this.markers.splice(o--,1);this._isClearing=!1}addMarker(o){const a=new s.Marker(o);return this.markers.push(a),a.register(this.lines.onTrim(p=>{a.line-=p,a.line<0&&a.dispose()})),a.register(this.lines.onInsert(p=>{a.line>=p.index&&(a.line+=p.amount)})),a.register(this.lines.onDelete(p=>{a.line>=p.index&&a.line<p.index+p.amount&&a.dispose(),a.line>p.index&&(a.line-=p.amount)})),a.register(a.onDispose(()=>this._removeMarker(a))),a}_removeMarker(o){this._isClearing||this.markers.splice(this.markers.indexOf(o),1)}}},8437:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLine=i.DEFAULT_ATTR_DATA=void 0;const u=c(3734),v=c(511),h=c(643),_=c(482);i.DEFAULT_ATTR_DATA=Object.freeze(new u.AttributeData);let E=0;class C{constructor(s,l,o=!1){this.isWrapped=o,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*s);const a=l||v.CellData.fromCharData([0,h.NULL_CELL_CHAR,h.NULL_CELL_WIDTH,h.NULL_CELL_CODE]);for(let p=0;p<s;++p)this.setCell(p,a);this.length=s}get(s){const l=this._data[3*s+0],o=2097151&l;return[this._data[3*s+1],2097152&l?this._combined[s]:o?(0,_.stringFromCodePoint)(o):"",l>>22,2097152&l?this._combined[s].charCodeAt(this._combined[s].length-1):o]}set(s,l){this._data[3*s+1]=l[h.CHAR_DATA_ATTR_INDEX],l[h.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[s]=l[1],this._data[3*s+0]=2097152|s|l[h.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*s+0]=l[h.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|l[h.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(s){return this._data[3*s+0]>>22}hasWidth(s){return 12582912&this._data[3*s+0]}getFg(s){return this._data[3*s+1]}getBg(s){return this._data[3*s+2]}hasContent(s){return 4194303&this._data[3*s+0]}getCodePoint(s){const l=this._data[3*s+0];return 2097152&l?this._combined[s].charCodeAt(this._combined[s].length-1):2097151&l}isCombined(s){return 2097152&this._data[3*s+0]}getString(s){const l=this._data[3*s+0];return 2097152&l?this._combined[s]:2097151&l?(0,_.stringFromCodePoint)(2097151&l):""}isProtected(s){return 536870912&this._data[3*s+2]}loadCell(s,l){return E=3*s,l.content=this._data[E+0],l.fg=this._data[E+1],l.bg=this._data[E+2],2097152&l.content&&(l.combinedData=this._combined[s]),268435456&l.bg&&(l.extended=this._extendedAttrs[s]),l}setCell(s,l){2097152&l.content&&(this._combined[s]=l.combinedData),268435456&l.bg&&(this._extendedAttrs[s]=l.extended),this._data[3*s+0]=l.content,this._data[3*s+1]=l.fg,this._data[3*s+2]=l.bg}setCellFromCodePoint(s,l,o,a,p,S){268435456&p&&(this._extendedAttrs[s]=S),this._data[3*s+0]=l|o<<22,this._data[3*s+1]=a,this._data[3*s+2]=p}addCodepointToCell(s,l){let o=this._data[3*s+0];2097152&o?this._combined[s]+=(0,_.stringFromCodePoint)(l):(2097151&o?(this._combined[s]=(0,_.stringFromCodePoint)(2097151&o)+(0,_.stringFromCodePoint)(l),o&=-2097152,o|=2097152):o=l|4194304,this._data[3*s+0]=o)}insertCells(s,l,o,a){if((s%=this.length)&&this.getWidth(s-1)===2&&this.setCellFromCodePoint(s-1,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new u.ExtendedAttrs),l<this.length-s){const p=new v.CellData;for(let S=this.length-s-l-1;S>=0;--S)this.setCell(s+l+S,this.loadCell(s+S,p));for(let S=0;S<l;++S)this.setCell(s+S,o)}else for(let p=s;p<this.length;++p)this.setCell(p,o);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new u.ExtendedAttrs)}deleteCells(s,l,o,a){if(s%=this.length,l<this.length-s){const p=new v.CellData;for(let S=0;S<this.length-s-l;++S)this.setCell(s+S,this.loadCell(s+l+S,p));for(let S=this.length-l;S<this.length;++S)this.setCell(S,o)}else for(let p=s;p<this.length;++p)this.setCell(p,o);s&&this.getWidth(s-1)===2&&this.setCellFromCodePoint(s-1,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new u.ExtendedAttrs),this.getWidth(s)!==0||this.hasContent(s)||this.setCellFromCodePoint(s,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new u.ExtendedAttrs)}replaceCells(s,l,o,a,p=!1){if(p)for(s&&this.getWidth(s-1)===2&&!this.isProtected(s-1)&&this.setCellFromCodePoint(s-1,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new u.ExtendedAttrs),l<this.length&&this.getWidth(l-1)===2&&!this.isProtected(l)&&this.setCellFromCodePoint(l,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new u.ExtendedAttrs);s<l&&s<this.length;)this.isProtected(s)||this.setCell(s,o),s++;else for(s&&this.getWidth(s-1)===2&&this.setCellFromCodePoint(s-1,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new u.ExtendedAttrs),l<this.length&&this.getWidth(l-1)===2&&this.setCellFromCodePoint(l,0,1,(a==null?void 0:a.fg)||0,(a==null?void 0:a.bg)||0,(a==null?void 0:a.extended)||new u.ExtendedAttrs);s<l&&s<this.length;)this.setCell(s++,o)}resize(s,l){if(s===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const o=3*s;if(s>this.length){if(this._data.buffer.byteLength>=4*o)this._data=new Uint32Array(this._data.buffer,0,o);else{const a=new Uint32Array(o);a.set(this._data),this._data=a}for(let a=this.length;a<s;++a)this.setCell(a,l)}else{this._data=this._data.subarray(0,o);const a=Object.keys(this._combined);for(let S=0;S<a.length;S++){const y=parseInt(a[S],10);y>=s&&delete this._combined[y]}const p=Object.keys(this._extendedAttrs);for(let S=0;S<p.length;S++){const y=parseInt(p[S],10);y>=s&&delete this._extendedAttrs[y]}}return this.length=s,4*o*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const s=new Uint32Array(this._data.length);return s.set(this._data),this._data=s,1}return 0}fill(s,l=!1){if(l)for(let o=0;o<this.length;++o)this.isProtected(o)||this.setCell(o,s);else{this._combined={},this._extendedAttrs={};for(let o=0;o<this.length;++o)this.setCell(o,s)}}copyFrom(s){this.length!==s.length?this._data=new Uint32Array(s._data):this._data.set(s._data),this.length=s.length,this._combined={};for(const l in s._combined)this._combined[l]=s._combined[l];this._extendedAttrs={};for(const l in s._extendedAttrs)this._extendedAttrs[l]=s._extendedAttrs[l];this.isWrapped=s.isWrapped}clone(){const s=new C(0);s._data=new Uint32Array(this._data),s.length=this.length;for(const l in this._combined)s._combined[l]=this._combined[l];for(const l in this._extendedAttrs)s._extendedAttrs[l]=this._extendedAttrs[l];return s.isWrapped=this.isWrapped,s}getTrimmedLength(){for(let s=this.length-1;s>=0;--s)if(4194303&this._data[3*s+0])return s+(this._data[3*s+0]>>22);return 0}getNoBgTrimmedLength(){for(let s=this.length-1;s>=0;--s)if(4194303&this._data[3*s+0]||50331648&this._data[3*s+2])return s+(this._data[3*s+0]>>22);return 0}copyCellsFrom(s,l,o,a,p){const S=s._data;if(p)for(let L=a-1;L>=0;L--){for(let g=0;g<3;g++)this._data[3*(o+L)+g]=S[3*(l+L)+g];268435456&S[3*(l+L)+2]&&(this._extendedAttrs[o+L]=s._extendedAttrs[l+L])}else for(let L=0;L<a;L++){for(let g=0;g<3;g++)this._data[3*(o+L)+g]=S[3*(l+L)+g];268435456&S[3*(l+L)+2]&&(this._extendedAttrs[o+L]=s._extendedAttrs[l+L])}const y=Object.keys(s._combined);for(let L=0;L<y.length;L++){const g=parseInt(y[L],10);g>=l&&(this._combined[g-l+o]=s._combined[g])}}translateToString(s=!1,l=0,o=this.length){s&&(o=Math.min(o,this.getTrimmedLength()));let a="";for(;l<o;){const p=this._data[3*l+0],S=2097151&p;a+=2097152&p?this._combined[l]:S?(0,_.stringFromCodePoint)(S):h.WHITESPACE_CELL_CHAR,l+=p>>22||1}return a}}i.BufferLine=C},4841:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getRangeLength=void 0,i.getRangeLength=function(c,u){if(c.start.y>c.end.y)throw new Error(`Buffer range end (${c.end.x}, ${c.end.y}) cannot be before start (${c.start.x}, ${c.start.y})`);return u*(c.end.y-c.start.y)+(c.end.x-c.start.x+1)}},4634:(x,i)=>{function c(u,v,h){if(v===u.length-1)return u[v].getTrimmedLength();const _=!u[v].hasContent(h-1)&&u[v].getWidth(h-1)===1,E=u[v+1].getWidth(0)===2;return _&&E?h-1:h}Object.defineProperty(i,"__esModule",{value:!0}),i.getWrappedLineTrimmedLength=i.reflowSmallerGetNewLineLengths=i.reflowLargerApplyNewLayout=i.reflowLargerCreateNewLayout=i.reflowLargerGetLinesToRemove=void 0,i.reflowLargerGetLinesToRemove=function(u,v,h,_,E){const C=[];for(let f=0;f<u.length-1;f++){let s=f,l=u.get(++s);if(!l.isWrapped)continue;const o=[u.get(f)];for(;s<u.length&&l.isWrapped;)o.push(l),l=u.get(++s);if(_>=f&&_<s){f+=o.length-1;continue}let a=0,p=c(o,a,v),S=1,y=0;for(;S<o.length;){const g=c(o,S,v),w=g-y,b=h-p,M=Math.min(w,b);o[a].copyCellsFrom(o[S],y,p,M,!1),p+=M,p===h&&(a++,p=0),y+=M,y===g&&(S++,y=0),p===0&&a!==0&&o[a-1].getWidth(h-1)===2&&(o[a].copyCellsFrom(o[a-1],h-1,p++,1,!1),o[a-1].setCell(h-1,E))}o[a].replaceCells(p,h,E);let L=0;for(let g=o.length-1;g>0&&(g>a||o[g].getTrimmedLength()===0);g--)L++;L>0&&(C.push(f+o.length-L),C.push(L)),f+=o.length-1}return C},i.reflowLargerCreateNewLayout=function(u,v){const h=[];let _=0,E=v[_],C=0;for(let f=0;f<u.length;f++)if(E===f){const s=v[++_];u.onDeleteEmitter.fire({index:f-C,amount:s}),f+=s-1,C+=s,E=v[++_]}else h.push(f);return{layout:h,countRemoved:C}},i.reflowLargerApplyNewLayout=function(u,v){const h=[];for(let _=0;_<v.length;_++)h.push(u.get(v[_]));for(let _=0;_<h.length;_++)u.set(_,h[_]);u.length=v.length},i.reflowSmallerGetNewLineLengths=function(u,v,h){const _=[],E=u.map((l,o)=>c(u,o,v)).reduce((l,o)=>l+o);let C=0,f=0,s=0;for(;s<E;){if(E-s<h){_.push(E-s);break}C+=h;const l=c(u,f,v);C>l&&(C-=l,f++);const o=u[f].getWidth(C-1)===2;o&&C--;const a=o?h-1:h;_.push(a),s+=a}return _},i.getWrappedLineTrimmedLength=c},5295:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferSet=void 0;const u=c(8460),v=c(844),h=c(9092);class _ extends v.Disposable{constructor(C,f){super(),this._optionsService=C,this._bufferService=f,this._onBufferActivate=this.register(new u.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new h.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new h.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(C){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(C),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(C,f){this._normal.resize(C,f),this._alt.resize(C,f),this.setupTabStops(C)}setupTabStops(C){this._normal.setupTabStops(C),this._alt.setupTabStops(C)}}i.BufferSet=_},511:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;const u=c(482),v=c(643),h=c(3734);class _ extends h.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new h.ExtendedAttrs,this.combinedData=""}static fromCharData(C){const f=new _;return f.setFromCharData(C),f}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,u.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(C){this.fg=C[v.CHAR_DATA_ATTR_INDEX],this.bg=0;let f=!1;if(C[v.CHAR_DATA_CHAR_INDEX].length>2)f=!0;else if(C[v.CHAR_DATA_CHAR_INDEX].length===2){const s=C[v.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=s&&s<=56319){const l=C[v.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=l&&l<=57343?this.content=1024*(s-55296)+l-56320+65536|C[v.CHAR_DATA_WIDTH_INDEX]<<22:f=!0}else f=!0}else this.content=C[v.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|C[v.CHAR_DATA_WIDTH_INDEX]<<22;f&&(this.combinedData=C[v.CHAR_DATA_CHAR_INDEX],this.content=2097152|C[v.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=_},643:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},4863:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Marker=void 0;const u=c(8460),v=c(844);class h{get id(){return this._id}constructor(E){this.line=E,this.isDisposed=!1,this._disposables=[],this._id=h._nextId++,this._onDispose=this.register(new u.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,v.disposeArray)(this._disposables),this._disposables.length=0)}register(E){return this._disposables.push(E),E}}i.Marker=h,h._nextId=1},7116:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DEFAULT_CHARSET=i.CHARSETS=void 0,i.CHARSETS={},i.DEFAULT_CHARSET=i.CHARSETS.B,i.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},i.CHARSETS.A={"#":""},i.CHARSETS.B=void 0,i.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},i.CHARSETS.C=i.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},i.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},i.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.E=i.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},i.CHARSETS.H=i.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(x,i)=>{var c,u,v;Object.defineProperty(i,"__esModule",{value:!0}),i.C1_ESCAPED=i.C1=i.C0=void 0,function(h){h.NUL="\0",h.SOH="",h.STX="",h.ETX="",h.EOT="",h.ENQ="",h.ACK="",h.BEL="\x07",h.BS="\b",h.HT="	",h.LF=`
`,h.VT="\v",h.FF="\f",h.CR="\r",h.SO="",h.SI="",h.DLE="",h.DC1="",h.DC2="",h.DC3="",h.DC4="",h.NAK="",h.SYN="",h.ETB="",h.CAN="",h.EM="",h.SUB="",h.ESC="\x1B",h.FS="",h.GS="",h.RS="",h.US="",h.SP=" ",h.DEL=""}(c||(i.C0=c={})),function(h){h.PAD="",h.HOP="",h.BPH="",h.NBH="",h.IND="",h.NEL="",h.SSA="",h.ESA="",h.HTS="",h.HTJ="",h.VTS="",h.PLD="",h.PLU="",h.RI="",h.SS2="",h.SS3="",h.DCS="",h.PU1="",h.PU2="",h.STS="",h.CCH="",h.MW="",h.SPA="",h.EPA="",h.SOS="",h.SGCI="",h.SCI="",h.CSI="",h.ST="",h.OSC="",h.PM="",h.APC=""}(u||(i.C1=u={})),function(h){h.ST=`${c.ESC}\\`}(v||(i.C1_ESCAPED=v={}))},7399:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.evaluateKeyboardEvent=void 0;const u=c(2584),v={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};i.evaluateKeyboardEvent=function(h,_,E,C){const f={type:0,cancel:!1,key:void 0},s=(h.shiftKey?1:0)|(h.altKey?2:0)|(h.ctrlKey?4:0)|(h.metaKey?8:0);switch(h.keyCode){case 0:h.key==="UIKeyInputUpArrow"?f.key=_?u.C0.ESC+"OA":u.C0.ESC+"[A":h.key==="UIKeyInputLeftArrow"?f.key=_?u.C0.ESC+"OD":u.C0.ESC+"[D":h.key==="UIKeyInputRightArrow"?f.key=_?u.C0.ESC+"OC":u.C0.ESC+"[C":h.key==="UIKeyInputDownArrow"&&(f.key=_?u.C0.ESC+"OB":u.C0.ESC+"[B");break;case 8:if(h.altKey){f.key=u.C0.ESC+u.C0.DEL;break}f.key=u.C0.DEL;break;case 9:if(h.shiftKey){f.key=u.C0.ESC+"[Z";break}f.key=u.C0.HT,f.cancel=!0;break;case 13:f.key=h.altKey?u.C0.ESC+u.C0.CR:u.C0.CR,f.cancel=!0;break;case 27:f.key=u.C0.ESC,h.altKey&&(f.key=u.C0.ESC+u.C0.ESC),f.cancel=!0;break;case 37:if(h.metaKey)break;s?(f.key=u.C0.ESC+"[1;"+(s+1)+"D",f.key===u.C0.ESC+"[1;3D"&&(f.key=u.C0.ESC+(E?"b":"[1;5D"))):f.key=_?u.C0.ESC+"OD":u.C0.ESC+"[D";break;case 39:if(h.metaKey)break;s?(f.key=u.C0.ESC+"[1;"+(s+1)+"C",f.key===u.C0.ESC+"[1;3C"&&(f.key=u.C0.ESC+(E?"f":"[1;5C"))):f.key=_?u.C0.ESC+"OC":u.C0.ESC+"[C";break;case 38:if(h.metaKey)break;s?(f.key=u.C0.ESC+"[1;"+(s+1)+"A",E||f.key!==u.C0.ESC+"[1;3A"||(f.key=u.C0.ESC+"[1;5A")):f.key=_?u.C0.ESC+"OA":u.C0.ESC+"[A";break;case 40:if(h.metaKey)break;s?(f.key=u.C0.ESC+"[1;"+(s+1)+"B",E||f.key!==u.C0.ESC+"[1;3B"||(f.key=u.C0.ESC+"[1;5B")):f.key=_?u.C0.ESC+"OB":u.C0.ESC+"[B";break;case 45:h.shiftKey||h.ctrlKey||(f.key=u.C0.ESC+"[2~");break;case 46:f.key=s?u.C0.ESC+"[3;"+(s+1)+"~":u.C0.ESC+"[3~";break;case 36:f.key=s?u.C0.ESC+"[1;"+(s+1)+"H":_?u.C0.ESC+"OH":u.C0.ESC+"[H";break;case 35:f.key=s?u.C0.ESC+"[1;"+(s+1)+"F":_?u.C0.ESC+"OF":u.C0.ESC+"[F";break;case 33:h.shiftKey?f.type=2:h.ctrlKey?f.key=u.C0.ESC+"[5;"+(s+1)+"~":f.key=u.C0.ESC+"[5~";break;case 34:h.shiftKey?f.type=3:h.ctrlKey?f.key=u.C0.ESC+"[6;"+(s+1)+"~":f.key=u.C0.ESC+"[6~";break;case 112:f.key=s?u.C0.ESC+"[1;"+(s+1)+"P":u.C0.ESC+"OP";break;case 113:f.key=s?u.C0.ESC+"[1;"+(s+1)+"Q":u.C0.ESC+"OQ";break;case 114:f.key=s?u.C0.ESC+"[1;"+(s+1)+"R":u.C0.ESC+"OR";break;case 115:f.key=s?u.C0.ESC+"[1;"+(s+1)+"S":u.C0.ESC+"OS";break;case 116:f.key=s?u.C0.ESC+"[15;"+(s+1)+"~":u.C0.ESC+"[15~";break;case 117:f.key=s?u.C0.ESC+"[17;"+(s+1)+"~":u.C0.ESC+"[17~";break;case 118:f.key=s?u.C0.ESC+"[18;"+(s+1)+"~":u.C0.ESC+"[18~";break;case 119:f.key=s?u.C0.ESC+"[19;"+(s+1)+"~":u.C0.ESC+"[19~";break;case 120:f.key=s?u.C0.ESC+"[20;"+(s+1)+"~":u.C0.ESC+"[20~";break;case 121:f.key=s?u.C0.ESC+"[21;"+(s+1)+"~":u.C0.ESC+"[21~";break;case 122:f.key=s?u.C0.ESC+"[23;"+(s+1)+"~":u.C0.ESC+"[23~";break;case 123:f.key=s?u.C0.ESC+"[24;"+(s+1)+"~":u.C0.ESC+"[24~";break;default:if(!h.ctrlKey||h.shiftKey||h.altKey||h.metaKey)if(E&&!C||!h.altKey||h.metaKey)!E||h.altKey||h.ctrlKey||h.shiftKey||!h.metaKey?h.key&&!h.ctrlKey&&!h.altKey&&!h.metaKey&&h.keyCode>=48&&h.key.length===1?f.key=h.key:h.key&&h.ctrlKey&&(h.key==="_"&&(f.key=u.C0.US),h.key==="@"&&(f.key=u.C0.NUL)):h.keyCode===65&&(f.type=1);else{const l=v[h.keyCode],o=l==null?void 0:l[h.shiftKey?1:0];if(o)f.key=u.C0.ESC+o;else if(h.keyCode>=65&&h.keyCode<=90){const a=h.ctrlKey?h.keyCode-64:h.keyCode+32;let p=String.fromCharCode(a);h.shiftKey&&(p=p.toUpperCase()),f.key=u.C0.ESC+p}else if(h.keyCode===32)f.key=u.C0.ESC+(h.ctrlKey?u.C0.NUL:" ");else if(h.key==="Dead"&&h.code.startsWith("Key")){let a=h.code.slice(3,4);h.shiftKey||(a=a.toLowerCase()),f.key=u.C0.ESC+a,f.cancel=!0}}else h.keyCode>=65&&h.keyCode<=90?f.key=String.fromCharCode(h.keyCode-64):h.keyCode===32?f.key=u.C0.NUL:h.keyCode>=51&&h.keyCode<=55?f.key=String.fromCharCode(h.keyCode-51+27):h.keyCode===56?f.key=u.C0.DEL:h.keyCode===219?f.key=u.C0.ESC:h.keyCode===220?f.key=u.C0.FS:h.keyCode===221&&(f.key=u.C0.GS)}return f}},482:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(c){return c>65535?(c-=65536,String.fromCharCode(55296+(c>>10))+String.fromCharCode(c%1024+56320)):String.fromCharCode(c)},i.utf32ToString=function(c,u=0,v=c.length){let h="";for(let _=u;_<v;++_){let E=c[_];E>65535?(E-=65536,h+=String.fromCharCode(55296+(E>>10))+String.fromCharCode(E%1024+56320)):h+=String.fromCharCode(E)}return h},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(c,u){const v=c.length;if(!v)return 0;let h=0,_=0;if(this._interim){const E=c.charCodeAt(_++);56320<=E&&E<=57343?u[h++]=1024*(this._interim-55296)+E-56320+65536:(u[h++]=this._interim,u[h++]=E),this._interim=0}for(let E=_;E<v;++E){const C=c.charCodeAt(E);if(55296<=C&&C<=56319){if(++E>=v)return this._interim=C,h;const f=c.charCodeAt(E);56320<=f&&f<=57343?u[h++]=1024*(C-55296)+f-56320+65536:(u[h++]=C,u[h++]=f)}else C!==65279&&(u[h++]=C)}return h}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(c,u){const v=c.length;if(!v)return 0;let h,_,E,C,f=0,s=0,l=0;if(this.interim[0]){let p=!1,S=this.interim[0];S&=(224&S)==192?31:(240&S)==224?15:7;let y,L=0;for(;(y=63&this.interim[++L])&&L<4;)S<<=6,S|=y;const g=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,w=g-L;for(;l<w;){if(l>=v)return 0;if(y=c[l++],(192&y)!=128){l--,p=!0;break}this.interim[L++]=y,S<<=6,S|=63&y}p||(g===2?S<128?l--:u[f++]=S:g===3?S<2048||S>=55296&&S<=57343||S===65279||(u[f++]=S):S<65536||S>1114111||(u[f++]=S)),this.interim.fill(0)}const o=v-4;let a=l;for(;a<v;){for(;!(!(a<o)||128&(h=c[a])||128&(_=c[a+1])||128&(E=c[a+2])||128&(C=c[a+3]));)u[f++]=h,u[f++]=_,u[f++]=E,u[f++]=C,a+=4;if(h=c[a++],h<128)u[f++]=h;else if((224&h)==192){if(a>=v)return this.interim[0]=h,f;if(_=c[a++],(192&_)!=128){a--;continue}if(s=(31&h)<<6|63&_,s<128){a--;continue}u[f++]=s}else if((240&h)==224){if(a>=v)return this.interim[0]=h,f;if(_=c[a++],(192&_)!=128){a--;continue}if(a>=v)return this.interim[0]=h,this.interim[1]=_,f;if(E=c[a++],(192&E)!=128){a--;continue}if(s=(15&h)<<12|(63&_)<<6|63&E,s<2048||s>=55296&&s<=57343||s===65279)continue;u[f++]=s}else if((248&h)==240){if(a>=v)return this.interim[0]=h,f;if(_=c[a++],(192&_)!=128){a--;continue}if(a>=v)return this.interim[0]=h,this.interim[1]=_,f;if(E=c[a++],(192&E)!=128){a--;continue}if(a>=v)return this.interim[0]=h,this.interim[1]=_,this.interim[2]=E,f;if(C=c[a++],(192&C)!=128){a--;continue}if(s=(7&h)<<18|(63&_)<<12|(63&E)<<6|63&C,s<65536||s>1114111)continue;u[f++]=s}}return f}}},225:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeV6=void 0;const c=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],u=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let v;i.UnicodeV6=class{constructor(){if(this.version="6",!v){v=new Uint8Array(65536),v.fill(1),v[0]=0,v.fill(0,1,32),v.fill(0,127,160),v.fill(2,4352,4448),v[9001]=2,v[9002]=2,v.fill(2,11904,42192),v[12351]=1,v.fill(2,44032,55204),v.fill(2,63744,64256),v.fill(2,65040,65050),v.fill(2,65072,65136),v.fill(2,65280,65377),v.fill(2,65504,65511);for(let h=0;h<c.length;++h)v.fill(0,c[h][0],c[h][1]+1)}}wcwidth(h){return h<32?0:h<127?1:h<65536?v[h]:function(_,E){let C,f=0,s=E.length-1;if(_<E[0][0]||_>E[s][1])return!1;for(;s>=f;)if(C=f+s>>1,_>E[C][1])f=C+1;else{if(!(_<E[C][0]))return!0;s=C-1}return!1}(h,u)?0:h>=131072&&h<=196605||h>=196608&&h<=262141?2:1}}},5981:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WriteBuffer=void 0;const u=c(8460),v=c(844);class h extends v.Disposable{constructor(E){super(),this._action=E,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new u.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(E,C){if(C!==void 0&&this._syncCalls>C)return void(this._syncCalls=0);if(this._pendingData+=E.length,this._writeBuffer.push(E),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let f;for(this._isSyncWriting=!0;f=this._writeBuffer.shift();){this._action(f);const s=this._callbacks.shift();s&&s()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(E,C){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=E.length,this._writeBuffer.push(E),this._callbacks.push(C),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=E.length,this._writeBuffer.push(E),this._callbacks.push(C)}_innerWrite(E=0,C=!0){const f=E||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const s=this._writeBuffer[this._bufferOffset],l=this._action(s,C);if(l){const a=p=>Date.now()-f>=12?setTimeout(()=>this._innerWrite(0,p)):this._innerWrite(f,p);return void l.catch(p=>(queueMicrotask(()=>{throw p}),Promise.resolve(!1))).then(a)}const o=this._callbacks[this._bufferOffset];if(o&&o(),this._bufferOffset++,this._pendingData-=s.length,Date.now()-f>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}i.WriteBuffer=h},5941:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.toRgbString=i.parseColor=void 0;const c=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,u=/^[\da-f]+$/;function v(h,_){const E=h.toString(16),C=E.length<2?"0"+E:E;switch(_){case 4:return E[0];case 8:return C;case 12:return(C+C).slice(0,3);default:return C+C}}i.parseColor=function(h){if(!h)return;let _=h.toLowerCase();if(_.indexOf("rgb:")===0){_=_.slice(4);const E=c.exec(_);if(E){const C=E[1]?15:E[4]?255:E[7]?4095:65535;return[Math.round(parseInt(E[1]||E[4]||E[7]||E[10],16)/C*255),Math.round(parseInt(E[2]||E[5]||E[8]||E[11],16)/C*255),Math.round(parseInt(E[3]||E[6]||E[9]||E[12],16)/C*255)]}}else if(_.indexOf("#")===0&&(_=_.slice(1),u.exec(_)&&[3,6,9,12].includes(_.length))){const E=_.length/3,C=[0,0,0];for(let f=0;f<3;++f){const s=parseInt(_.slice(E*f,E*f+E),16);C[f]=E===1?s<<4:E===2?s:E===3?s>>4:s>>8}return C}},i.toRgbString=function(h,_=16){const[E,C,f]=h;return`rgb:${v(E,_)}/${v(C,_)}/${v(f,_)}`}},5770:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PAYLOAD_LIMIT=void 0,i.PAYLOAD_LIMIT=1e7},6351:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DcsHandler=i.DcsParser=void 0;const u=c(482),v=c(8742),h=c(5770),_=[];i.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=_,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=_}registerHandler(C,f){this._handlers[C]===void 0&&(this._handlers[C]=[]);const s=this._handlers[C];return s.push(f),{dispose:()=>{const l=s.indexOf(f);l!==-1&&s.splice(l,1)}}}clearHandler(C){this._handlers[C]&&delete this._handlers[C]}setHandlerFallback(C){this._handlerFb=C}reset(){if(this._active.length)for(let C=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;C>=0;--C)this._active[C].unhook(!1);this._stack.paused=!1,this._active=_,this._ident=0}hook(C,f){if(this.reset(),this._ident=C,this._active=this._handlers[C]||_,this._active.length)for(let s=this._active.length-1;s>=0;s--)this._active[s].hook(f);else this._handlerFb(this._ident,"HOOK",f)}put(C,f,s){if(this._active.length)for(let l=this._active.length-1;l>=0;l--)this._active[l].put(C,f,s);else this._handlerFb(this._ident,"PUT",(0,u.utf32ToString)(C,f,s))}unhook(C,f=!0){if(this._active.length){let s=!1,l=this._active.length-1,o=!1;if(this._stack.paused&&(l=this._stack.loopPosition-1,s=f,o=this._stack.fallThrough,this._stack.paused=!1),!o&&s===!1){for(;l>=0&&(s=this._active[l].unhook(C),s!==!0);l--)if(s instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=l,this._stack.fallThrough=!1,s;l--}for(;l>=0;l--)if(s=this._active[l].unhook(!1),s instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=l,this._stack.fallThrough=!0,s}else this._handlerFb(this._ident,"UNHOOK",C);this._active=_,this._ident=0}};const E=new v.Params;E.addParam(0),i.DcsHandler=class{constructor(C){this._handler=C,this._data="",this._params=E,this._hitLimit=!1}hook(C){this._params=C.length>1||C.params[0]?C.clone():E,this._data="",this._hitLimit=!1}put(C,f,s){this._hitLimit||(this._data+=(0,u.utf32ToString)(C,f,s),this._data.length>h.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(C){let f=!1;if(this._hitLimit)f=!1;else if(C&&(f=this._handler(this._data,this._params),f instanceof Promise))return f.then(s=>(this._params=E,this._data="",this._hitLimit=!1,s));return this._params=E,this._data="",this._hitLimit=!1,f}}},2015:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.EscapeSequenceParser=i.VT500_TRANSITION_TABLE=i.TransitionTable=void 0;const u=c(844),v=c(8742),h=c(6242),_=c(6351);class E{constructor(l){this.table=new Uint8Array(l)}setDefault(l,o){this.table.fill(l<<4|o)}add(l,o,a,p){this.table[o<<8|l]=a<<4|p}addMany(l,o,a,p){for(let S=0;S<l.length;S++)this.table[o<<8|l[S]]=a<<4|p}}i.TransitionTable=E;const C=160;i.VT500_TRANSITION_TABLE=function(){const s=new E(4095),l=Array.apply(null,Array(256)).map((L,g)=>g),o=(L,g)=>l.slice(L,g),a=o(32,127),p=o(0,24);p.push(25),p.push.apply(p,o(28,32));const S=o(0,14);let y;for(y in s.setDefault(1,0),s.addMany(a,0,2,0),S)s.addMany([24,26,153,154],y,3,0),s.addMany(o(128,144),y,3,0),s.addMany(o(144,152),y,3,0),s.add(156,y,0,0),s.add(27,y,11,1),s.add(157,y,4,8),s.addMany([152,158,159],y,0,7),s.add(155,y,11,3),s.add(144,y,11,9);return s.addMany(p,0,3,0),s.addMany(p,1,3,1),s.add(127,1,0,1),s.addMany(p,8,0,8),s.addMany(p,3,3,3),s.add(127,3,0,3),s.addMany(p,4,3,4),s.add(127,4,0,4),s.addMany(p,6,3,6),s.addMany(p,5,3,5),s.add(127,5,0,5),s.addMany(p,2,3,2),s.add(127,2,0,2),s.add(93,1,4,8),s.addMany(a,8,5,8),s.add(127,8,5,8),s.addMany([156,27,24,26,7],8,6,0),s.addMany(o(28,32),8,0,8),s.addMany([88,94,95],1,0,7),s.addMany(a,7,0,7),s.addMany(p,7,0,7),s.add(156,7,0,0),s.add(127,7,0,7),s.add(91,1,11,3),s.addMany(o(64,127),3,7,0),s.addMany(o(48,60),3,8,4),s.addMany([60,61,62,63],3,9,4),s.addMany(o(48,60),4,8,4),s.addMany(o(64,127),4,7,0),s.addMany([60,61,62,63],4,0,6),s.addMany(o(32,64),6,0,6),s.add(127,6,0,6),s.addMany(o(64,127),6,0,0),s.addMany(o(32,48),3,9,5),s.addMany(o(32,48),5,9,5),s.addMany(o(48,64),5,0,6),s.addMany(o(64,127),5,7,0),s.addMany(o(32,48),4,9,5),s.addMany(o(32,48),1,9,2),s.addMany(o(32,48),2,9,2),s.addMany(o(48,127),2,10,0),s.addMany(o(48,80),1,10,0),s.addMany(o(81,88),1,10,0),s.addMany([89,90,92],1,10,0),s.addMany(o(96,127),1,10,0),s.add(80,1,11,9),s.addMany(p,9,0,9),s.add(127,9,0,9),s.addMany(o(28,32),9,0,9),s.addMany(o(32,48),9,9,12),s.addMany(o(48,60),9,8,10),s.addMany([60,61,62,63],9,9,10),s.addMany(p,11,0,11),s.addMany(o(32,128),11,0,11),s.addMany(o(28,32),11,0,11),s.addMany(p,10,0,10),s.add(127,10,0,10),s.addMany(o(28,32),10,0,10),s.addMany(o(48,60),10,8,10),s.addMany([60,61,62,63],10,0,11),s.addMany(o(32,48),10,9,12),s.addMany(p,12,0,12),s.add(127,12,0,12),s.addMany(o(28,32),12,0,12),s.addMany(o(32,48),12,9,12),s.addMany(o(48,64),12,0,11),s.addMany(o(64,127),12,12,13),s.addMany(o(64,127),10,12,13),s.addMany(o(64,127),9,12,13),s.addMany(p,13,13,13),s.addMany(a,13,13,13),s.add(127,13,0,13),s.addMany([27,156,24,26],13,14,0),s.add(C,0,2,0),s.add(C,8,5,8),s.add(C,6,0,6),s.add(C,11,0,11),s.add(C,13,13,13),s}();class f extends u.Disposable{constructor(l=i.VT500_TRANSITION_TABLE){super(),this._transitions=l,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new v.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(o,a,p)=>{},this._executeHandlerFb=o=>{},this._csiHandlerFb=(o,a)=>{},this._escHandlerFb=o=>{},this._errorHandlerFb=o=>o,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,u.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new h.OscParser),this._dcsParser=this.register(new _.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(l,o=[64,126]){let a=0;if(l.prefix){if(l.prefix.length>1)throw new Error("only one byte as prefix supported");if(a=l.prefix.charCodeAt(0),a&&60>a||a>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(l.intermediates){if(l.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let S=0;S<l.intermediates.length;++S){const y=l.intermediates.charCodeAt(S);if(32>y||y>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");a<<=8,a|=y}}if(l.final.length!==1)throw new Error("final must be a single byte");const p=l.final.charCodeAt(0);if(o[0]>p||p>o[1])throw new Error(`final must be in range ${o[0]} .. ${o[1]}`);return a<<=8,a|=p,a}identToString(l){const o=[];for(;l;)o.push(String.fromCharCode(255&l)),l>>=8;return o.reverse().join("")}setPrintHandler(l){this._printHandler=l}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(l,o){const a=this._identifier(l,[48,126]);this._escHandlers[a]===void 0&&(this._escHandlers[a]=[]);const p=this._escHandlers[a];return p.push(o),{dispose:()=>{const S=p.indexOf(o);S!==-1&&p.splice(S,1)}}}clearEscHandler(l){this._escHandlers[this._identifier(l,[48,126])]&&delete this._escHandlers[this._identifier(l,[48,126])]}setEscHandlerFallback(l){this._escHandlerFb=l}setExecuteHandler(l,o){this._executeHandlers[l.charCodeAt(0)]=o}clearExecuteHandler(l){this._executeHandlers[l.charCodeAt(0)]&&delete this._executeHandlers[l.charCodeAt(0)]}setExecuteHandlerFallback(l){this._executeHandlerFb=l}registerCsiHandler(l,o){const a=this._identifier(l);this._csiHandlers[a]===void 0&&(this._csiHandlers[a]=[]);const p=this._csiHandlers[a];return p.push(o),{dispose:()=>{const S=p.indexOf(o);S!==-1&&p.splice(S,1)}}}clearCsiHandler(l){this._csiHandlers[this._identifier(l)]&&delete this._csiHandlers[this._identifier(l)]}setCsiHandlerFallback(l){this._csiHandlerFb=l}registerDcsHandler(l,o){return this._dcsParser.registerHandler(this._identifier(l),o)}clearDcsHandler(l){this._dcsParser.clearHandler(this._identifier(l))}setDcsHandlerFallback(l){this._dcsParser.setHandlerFallback(l)}registerOscHandler(l,o){return this._oscParser.registerHandler(l,o)}clearOscHandler(l){this._oscParser.clearHandler(l)}setOscHandlerFallback(l){this._oscParser.setHandlerFallback(l)}setErrorHandler(l){this._errorHandler=l}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(l,o,a,p,S){this._parseStack.state=l,this._parseStack.handlers=o,this._parseStack.handlerPos=a,this._parseStack.transition=p,this._parseStack.chunkPos=S}parse(l,o,a){let p,S=0,y=0,L=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,L=this._parseStack.chunkPos+1;else{if(a===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const g=this._parseStack.handlers;let w=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(a===!1&&w>-1){for(;w>=0&&(p=g[w](this._params),p!==!0);w--)if(p instanceof Promise)return this._parseStack.handlerPos=w,p}this._parseStack.handlers=[];break;case 4:if(a===!1&&w>-1){for(;w>=0&&(p=g[w](),p!==!0);w--)if(p instanceof Promise)return this._parseStack.handlerPos=w,p}this._parseStack.handlers=[];break;case 6:if(S=l[this._parseStack.chunkPos],p=this._dcsParser.unhook(S!==24&&S!==26,a),p)return p;S===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(S=l[this._parseStack.chunkPos],p=this._oscParser.end(S!==24&&S!==26,a),p)return p;S===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,L=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let g=L;g<o;++g){switch(S=l[g],y=this._transitions.table[this.currentState<<8|(S<160?S:C)],y>>4){case 2:for(let T=g+1;;++T){if(T>=o||(S=l[T])<32||S>126&&S<C){this._printHandler(l,g,T),g=T-1;break}if(++T>=o||(S=l[T])<32||S>126&&S<C){this._printHandler(l,g,T),g=T-1;break}if(++T>=o||(S=l[T])<32||S>126&&S<C){this._printHandler(l,g,T),g=T-1;break}if(++T>=o||(S=l[T])<32||S>126&&S<C){this._printHandler(l,g,T),g=T-1;break}}break;case 3:this._executeHandlers[S]?this._executeHandlers[S]():this._executeHandlerFb(S),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:g,code:S,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const w=this._csiHandlers[this._collect<<8|S];let b=w?w.length-1:-1;for(;b>=0&&(p=w[b](this._params),p!==!0);b--)if(p instanceof Promise)return this._preserveStack(3,w,b,y,g),p;b<0&&this._csiHandlerFb(this._collect<<8|S,this._params),this.precedingCodepoint=0;break;case 8:do switch(S){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(S-48)}while(++g<o&&(S=l[g])>47&&S<60);g--;break;case 9:this._collect<<=8,this._collect|=S;break;case 10:const M=this._escHandlers[this._collect<<8|S];let R=M?M.length-1:-1;for(;R>=0&&(p=M[R](),p!==!0);R--)if(p instanceof Promise)return this._preserveStack(4,M,R,y,g),p;R<0&&this._escHandlerFb(this._collect<<8|S),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|S,this._params);break;case 13:for(let T=g+1;;++T)if(T>=o||(S=l[T])===24||S===26||S===27||S>127&&S<C){this._dcsParser.put(l,g,T),g=T-1;break}break;case 14:if(p=this._dcsParser.unhook(S!==24&&S!==26),p)return this._preserveStack(6,[],0,y,g),p;S===27&&(y|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let T=g+1;;T++)if(T>=o||(S=l[T])<32||S>127&&S<C){this._oscParser.put(l,g,T),g=T-1;break}break;case 6:if(p=this._oscParser.end(S!==24&&S!==26),p)return this._preserveStack(5,[],0,y,g),p;S===27&&(y|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&y}}}i.EscapeSequenceParser=f},6242:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OscHandler=i.OscParser=void 0;const u=c(5770),v=c(482),h=[];i.OscParser=class{constructor(){this._state=0,this._active=h,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(_,E){this._handlers[_]===void 0&&(this._handlers[_]=[]);const C=this._handlers[_];return C.push(E),{dispose:()=>{const f=C.indexOf(E);f!==-1&&C.splice(f,1)}}}clearHandler(_){this._handlers[_]&&delete this._handlers[_]}setHandlerFallback(_){this._handlerFb=_}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=h}reset(){if(this._state===2)for(let _=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;_>=0;--_)this._active[_].end(!1);this._stack.paused=!1,this._active=h,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||h,this._active.length)for(let _=this._active.length-1;_>=0;_--)this._active[_].start();else this._handlerFb(this._id,"START")}_put(_,E,C){if(this._active.length)for(let f=this._active.length-1;f>=0;f--)this._active[f].put(_,E,C);else this._handlerFb(this._id,"PUT",(0,v.utf32ToString)(_,E,C))}start(){this.reset(),this._state=1}put(_,E,C){if(this._state!==3){if(this._state===1)for(;E<C;){const f=_[E++];if(f===59){this._state=2,this._start();break}if(f<48||57<f)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+f-48}this._state===2&&C-E>0&&this._put(_,E,C)}}end(_,E=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let C=!1,f=this._active.length-1,s=!1;if(this._stack.paused&&(f=this._stack.loopPosition-1,C=E,s=this._stack.fallThrough,this._stack.paused=!1),!s&&C===!1){for(;f>=0&&(C=this._active[f].end(_),C!==!0);f--)if(C instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=f,this._stack.fallThrough=!1,C;f--}for(;f>=0;f--)if(C=this._active[f].end(!1),C instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=f,this._stack.fallThrough=!0,C}else this._handlerFb(this._id,"END",_);this._active=h,this._id=-1,this._state=0}}},i.OscHandler=class{constructor(_){this._handler=_,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(_,E,C){this._hitLimit||(this._data+=(0,v.utf32ToString)(_,E,C),this._data.length>u.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(_){let E=!1;if(this._hitLimit)E=!1;else if(_&&(E=this._handler(this._data),E instanceof Promise))return E.then(C=>(this._data="",this._hitLimit=!1,C));return this._data="",this._hitLimit=!1,E}}},8742:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Params=void 0;const c=2147483647;class u{static fromArray(h){const _=new u;if(!h.length)return _;for(let E=Array.isArray(h[0])?1:0;E<h.length;++E){const C=h[E];if(Array.isArray(C))for(let f=0;f<C.length;++f)_.addSubParam(C[f]);else _.addParam(C)}return _}constructor(h=32,_=32){if(this.maxLength=h,this.maxSubParamsLength=_,_>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(h),this.length=0,this._subParams=new Int32Array(_),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(h),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const h=new u(this.maxLength,this.maxSubParamsLength);return h.params.set(this.params),h.length=this.length,h._subParams.set(this._subParams),h._subParamsLength=this._subParamsLength,h._subParamsIdx.set(this._subParamsIdx),h._rejectDigits=this._rejectDigits,h._rejectSubDigits=this._rejectSubDigits,h._digitIsSub=this._digitIsSub,h}toArray(){const h=[];for(let _=0;_<this.length;++_){h.push(this.params[_]);const E=this._subParamsIdx[_]>>8,C=255&this._subParamsIdx[_];C-E>0&&h.push(Array.prototype.slice.call(this._subParams,E,C))}return h}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(h){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(h<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=h>c?c:h}}addSubParam(h){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(h<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=h>c?c:h,this._subParamsIdx[this.length-1]++}}hasSubParams(h){return(255&this._subParamsIdx[h])-(this._subParamsIdx[h]>>8)>0}getSubParams(h){const _=this._subParamsIdx[h]>>8,E=255&this._subParamsIdx[h];return E-_>0?this._subParams.subarray(_,E):null}getSubParamsAll(){const h={};for(let _=0;_<this.length;++_){const E=this._subParamsIdx[_]>>8,C=255&this._subParamsIdx[_];C-E>0&&(h[_]=this._subParams.slice(E,C))}return h}addDigit(h){let _;if(this._rejectDigits||!(_=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const E=this._digitIsSub?this._subParams:this.params,C=E[_-1];E[_-1]=~C?Math.min(10*C+h,c):h}}i.Params=u},5741:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AddonManager=void 0,i.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let c=this._addons.length-1;c>=0;c--)this._addons[c].instance.dispose()}loadAddon(c,u){const v={instance:u,dispose:u.dispose,isDisposed:!1};this._addons.push(v),u.dispose=()=>this._wrappedAddonDispose(v),u.activate(c)}_wrappedAddonDispose(c){if(c.isDisposed)return;let u=-1;for(let v=0;v<this._addons.length;v++)if(this._addons[v]===c){u=v;break}if(u===-1)throw new Error("Could not dispose an addon that has not been loaded");c.isDisposed=!0,c.dispose.apply(c.instance),this._addons.splice(u,1)}}},8771:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferApiView=void 0;const u=c(3785),v=c(511);i.BufferApiView=class{constructor(h,_){this._buffer=h,this.type=_}init(h){return this._buffer=h,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(h){const _=this._buffer.lines.get(h);if(_)return new u.BufferLineApiView(_)}getNullCell(){return new v.CellData}}},3785:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLineApiView=void 0;const u=c(511);i.BufferLineApiView=class{constructor(v){this._line=v}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(v,h){if(!(v<0||v>=this._line.length))return h?(this._line.loadCell(v,h),h):this._line.loadCell(v,new u.CellData)}translateToString(v,h,_){return this._line.translateToString(v,h,_)}}},8285:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferNamespaceApi=void 0;const u=c(8771),v=c(8460),h=c(844);class _ extends h.Disposable{constructor(C){super(),this._core=C,this._onBufferChange=this.register(new v.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new u.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new u.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}i.BufferNamespaceApi=_},7975:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ParserApi=void 0,i.ParserApi=class{constructor(c){this._core=c}registerCsiHandler(c,u){return this._core.registerCsiHandler(c,v=>u(v.toArray()))}addCsiHandler(c,u){return this.registerCsiHandler(c,u)}registerDcsHandler(c,u){return this._core.registerDcsHandler(c,(v,h)=>u(v,h.toArray()))}addDcsHandler(c,u){return this.registerDcsHandler(c,u)}registerEscHandler(c,u){return this._core.registerEscHandler(c,u)}addEscHandler(c,u){return this.registerEscHandler(c,u)}registerOscHandler(c,u){return this._core.registerOscHandler(c,u)}addOscHandler(c,u){return this.registerOscHandler(c,u)}}},7090:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeApi=void 0,i.UnicodeApi=class{constructor(c){this._core=c}register(c){this._core.unicodeService.register(c)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(c){this._core.unicodeService.activeVersion=c}}},744:function(x,i,c){var u=this&&this.__decorate||function(s,l,o,a){var p,S=arguments.length,y=S<3?l:a===null?a=Object.getOwnPropertyDescriptor(l,o):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(s,l,o,a);else for(var L=s.length-1;L>=0;L--)(p=s[L])&&(y=(S<3?p(y):S>3?p(l,o,y):p(l,o))||y);return S>3&&y&&Object.defineProperty(l,o,y),y},v=this&&this.__param||function(s,l){return function(o,a){l(o,a,s)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferService=i.MINIMUM_ROWS=i.MINIMUM_COLS=void 0;const h=c(8460),_=c(844),E=c(5295),C=c(2585);i.MINIMUM_COLS=2,i.MINIMUM_ROWS=1;let f=i.BufferService=class extends _.Disposable{get buffer(){return this.buffers.active}constructor(s){super(),this.isUserScrolling=!1,this._onResize=this.register(new h.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new h.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(s.rawOptions.cols||0,i.MINIMUM_COLS),this.rows=Math.max(s.rawOptions.rows||0,i.MINIMUM_ROWS),this.buffers=this.register(new E.BufferSet(s,this))}resize(s,l){this.cols=s,this.rows=l,this.buffers.resize(s,l),this._onResize.fire({cols:s,rows:l})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(s,l=!1){const o=this.buffer;let a;a=this._cachedBlankLine,a&&a.length===this.cols&&a.getFg(0)===s.fg&&a.getBg(0)===s.bg||(a=o.getBlankLine(s,l),this._cachedBlankLine=a),a.isWrapped=l;const p=o.ybase+o.scrollTop,S=o.ybase+o.scrollBottom;if(o.scrollTop===0){const y=o.lines.isFull;S===o.lines.length-1?y?o.lines.recycle().copyFrom(a):o.lines.push(a.clone()):o.lines.splice(S+1,0,a.clone()),y?this.isUserScrolling&&(o.ydisp=Math.max(o.ydisp-1,0)):(o.ybase++,this.isUserScrolling||o.ydisp++)}else{const y=S-p+1;o.lines.shiftElements(p+1,y-1,-1),o.lines.set(S,a.clone())}this.isUserScrolling||(o.ydisp=o.ybase),this._onScroll.fire(o.ydisp)}scrollLines(s,l,o){const a=this.buffer;if(s<0){if(a.ydisp===0)return;this.isUserScrolling=!0}else s+a.ydisp>=a.ybase&&(this.isUserScrolling=!1);const p=a.ydisp;a.ydisp=Math.max(Math.min(a.ydisp+s,a.ybase),0),p!==a.ydisp&&(l||this._onScroll.fire(a.ydisp))}};i.BufferService=f=u([v(0,C.IOptionsService)],f)},7994:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CharsetService=void 0,i.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(c){this.glevel=c,this.charset=this._charsets[c]}setgCharset(c,u){this._charsets[c]=u,this.glevel===c&&(this.charset=u)}}},1753:function(x,i,c){var u=this&&this.__decorate||function(a,p,S,y){var L,g=arguments.length,w=g<3?p:y===null?y=Object.getOwnPropertyDescriptor(p,S):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(a,p,S,y);else for(var b=a.length-1;b>=0;b--)(L=a[b])&&(w=(g<3?L(w):g>3?L(p,S,w):L(p,S))||w);return g>3&&w&&Object.defineProperty(p,S,w),w},v=this&&this.__param||function(a,p){return function(S,y){p(S,y,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreMouseService=void 0;const h=c(2585),_=c(8460),E=c(844),C={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:a=>a.button!==4&&a.action===1&&(a.ctrl=!1,a.alt=!1,a.shift=!1,!0)},VT200:{events:19,restrict:a=>a.action!==32},DRAG:{events:23,restrict:a=>a.action!==32||a.button!==3},ANY:{events:31,restrict:a=>!0}};function f(a,p){let S=(a.ctrl?16:0)|(a.shift?4:0)|(a.alt?8:0);return a.button===4?(S|=64,S|=a.action):(S|=3&a.button,4&a.button&&(S|=64),8&a.button&&(S|=128),a.action===32?S|=32:a.action!==0||p||(S|=3)),S}const s=String.fromCharCode,l={DEFAULT:a=>{const p=[f(a,!1)+32,a.col+32,a.row+32];return p[0]>255||p[1]>255||p[2]>255?"":`\x1B[M${s(p[0])}${s(p[1])}${s(p[2])}`},SGR:a=>{const p=a.action===0&&a.button!==4?"m":"M";return`\x1B[<${f(a,!0)};${a.col};${a.row}${p}`},SGR_PIXELS:a=>{const p=a.action===0&&a.button!==4?"m":"M";return`\x1B[<${f(a,!0)};${a.x};${a.y}${p}`}};let o=i.CoreMouseService=class extends E.Disposable{constructor(a,p){super(),this._bufferService=a,this._coreService=p,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new _.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const S of Object.keys(C))this.addProtocol(S,C[S]);for(const S of Object.keys(l))this.addEncoding(S,l[S]);this.reset()}addProtocol(a,p){this._protocols[a]=p}addEncoding(a,p){this._encodings[a]=p}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(a){if(!this._protocols[a])throw new Error(`unknown protocol "${a}"`);this._activeProtocol=a,this._onProtocolChange.fire(this._protocols[a].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(a){if(!this._encodings[a])throw new Error(`unknown encoding "${a}"`);this._activeEncoding=a}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(a){if(a.col<0||a.col>=this._bufferService.cols||a.row<0||a.row>=this._bufferService.rows||a.button===4&&a.action===32||a.button===3&&a.action!==32||a.button!==4&&(a.action===2||a.action===3)||(a.col++,a.row++,a.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,a,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(a))return!1;const p=this._encodings[this._activeEncoding](a);return p&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(p):this._coreService.triggerDataEvent(p,!0)),this._lastEvent=a,!0}explainEvents(a){return{down:!!(1&a),up:!!(2&a),drag:!!(4&a),move:!!(8&a),wheel:!!(16&a)}}_equalEvents(a,p,S){if(S){if(a.x!==p.x||a.y!==p.y)return!1}else if(a.col!==p.col||a.row!==p.row)return!1;return a.button===p.button&&a.action===p.action&&a.ctrl===p.ctrl&&a.alt===p.alt&&a.shift===p.shift}};i.CoreMouseService=o=u([v(0,h.IBufferService),v(1,h.ICoreService)],o)},6975:function(x,i,c){var u=this&&this.__decorate||function(o,a,p,S){var y,L=arguments.length,g=L<3?a:S===null?S=Object.getOwnPropertyDescriptor(a,p):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(o,a,p,S);else for(var w=o.length-1;w>=0;w--)(y=o[w])&&(g=(L<3?y(g):L>3?y(a,p,g):y(a,p))||g);return L>3&&g&&Object.defineProperty(a,p,g),g},v=this&&this.__param||function(o,a){return function(p,S){a(p,S,o)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreService=void 0;const h=c(1439),_=c(8460),E=c(844),C=c(2585),f=Object.freeze({insertMode:!1}),s=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let l=i.CoreService=class extends E.Disposable{constructor(o,a,p){super(),this._bufferService=o,this._logService=a,this._optionsService=p,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new _.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new _.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new _.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new _.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,h.clone)(f),this.decPrivateModes=(0,h.clone)(s)}reset(){this.modes=(0,h.clone)(f),this.decPrivateModes=(0,h.clone)(s)}triggerDataEvent(o,a=!1){if(this._optionsService.rawOptions.disableStdin)return;const p=this._bufferService.buffer;a&&this._optionsService.rawOptions.scrollOnUserInput&&p.ybase!==p.ydisp&&this._onRequestScrollToBottom.fire(),a&&this._onUserInput.fire(),this._logService.debug(`sending data "${o}"`,()=>o.split("").map(S=>S.charCodeAt(0))),this._onData.fire(o)}triggerBinaryEvent(o){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${o}"`,()=>o.split("").map(a=>a.charCodeAt(0))),this._onBinary.fire(o))}};i.CoreService=l=u([v(0,C.IBufferService),v(1,C.ILogService),v(2,C.IOptionsService)],l)},9074:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DecorationService=void 0;const u=c(8055),v=c(8460),h=c(844),_=c(6106);let E=0,C=0;class f extends h.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new _.SortedList(o=>o==null?void 0:o.marker.line),this._onDecorationRegistered=this.register(new v.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new v.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,h.toDisposable)(()=>this.reset()))}registerDecoration(o){if(o.marker.isDisposed)return;const a=new s(o);if(a){const p=a.marker.onDispose(()=>a.dispose());a.onDispose(()=>{a&&(this._decorations.delete(a)&&this._onDecorationRemoved.fire(a),p.dispose())}),this._decorations.insert(a),this._onDecorationRegistered.fire(a)}return a}reset(){for(const o of this._decorations.values())o.dispose();this._decorations.clear()}*getDecorationsAtCell(o,a,p){var S,y,L;let g=0,w=0;for(const b of this._decorations.getKeyIterator(a))g=(S=b.options.x)!==null&&S!==void 0?S:0,w=g+((y=b.options.width)!==null&&y!==void 0?y:1),o>=g&&o<w&&(!p||((L=b.options.layer)!==null&&L!==void 0?L:"bottom")===p)&&(yield b)}forEachDecorationAtCell(o,a,p,S){this._decorations.forEachByKey(a,y=>{var L,g,w;E=(L=y.options.x)!==null&&L!==void 0?L:0,C=E+((g=y.options.width)!==null&&g!==void 0?g:1),o>=E&&o<C&&(!p||((w=y.options.layer)!==null&&w!==void 0?w:"bottom")===p)&&S(y)})}}i.DecorationService=f;class s extends h.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=u.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=u.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(o){super(),this.options=o,this.onRenderEmitter=this.register(new v.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new v.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=o.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.InstantiationService=i.ServiceCollection=void 0;const u=c(2585),v=c(8343);class h{constructor(...E){this._entries=new Map;for(const[C,f]of E)this.set(C,f)}set(E,C){const f=this._entries.get(E);return this._entries.set(E,C),f}forEach(E){for(const[C,f]of this._entries.entries())E(C,f)}has(E){return this._entries.has(E)}get(E){return this._entries.get(E)}}i.ServiceCollection=h,i.InstantiationService=class{constructor(){this._services=new h,this._services.set(u.IInstantiationService,this)}setService(_,E){this._services.set(_,E)}getService(_){return this._services.get(_)}createInstance(_,...E){const C=(0,v.getServiceDependencies)(_).sort((l,o)=>l.index-o.index),f=[];for(const l of C){const o=this._services.get(l.id);if(!o)throw new Error(`[createInstance] ${_.name} depends on UNKNOWN service ${l.id}.`);f.push(o)}const s=C.length>0?C[0].index:E.length;if(E.length!==s)throw new Error(`[createInstance] First service dependency of ${_.name} at position ${s+1} conflicts with ${E.length} static arguments`);return new _(...E,...f)}}},7866:function(x,i,c){var u=this&&this.__decorate||function(s,l,o,a){var p,S=arguments.length,y=S<3?l:a===null?a=Object.getOwnPropertyDescriptor(l,o):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(s,l,o,a);else for(var L=s.length-1;L>=0;L--)(p=s[L])&&(y=(S<3?p(y):S>3?p(l,o,y):p(l,o))||y);return S>3&&y&&Object.defineProperty(l,o,y),y},v=this&&this.__param||function(s,l){return function(o,a){l(o,a,s)}};Object.defineProperty(i,"__esModule",{value:!0}),i.traceCall=i.setTraceLogger=i.LogService=void 0;const h=c(844),_=c(2585),E={trace:_.LogLevelEnum.TRACE,debug:_.LogLevelEnum.DEBUG,info:_.LogLevelEnum.INFO,warn:_.LogLevelEnum.WARN,error:_.LogLevelEnum.ERROR,off:_.LogLevelEnum.OFF};let C,f=i.LogService=class extends h.Disposable{get logLevel(){return this._logLevel}constructor(s){super(),this._optionsService=s,this._logLevel=_.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),C=this}_updateLogLevel(){this._logLevel=E[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(s){for(let l=0;l<s.length;l++)typeof s[l]=="function"&&(s[l]=s[l]())}_log(s,l,o){this._evalLazyOptionalParams(o),s.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+l,...o)}trace(s,...l){var o,a;this._logLevel<=_.LogLevelEnum.TRACE&&this._log((a=(o=this._optionsService.options.logger)===null||o===void 0?void 0:o.trace.bind(this._optionsService.options.logger))!==null&&a!==void 0?a:console.log,s,l)}debug(s,...l){var o,a;this._logLevel<=_.LogLevelEnum.DEBUG&&this._log((a=(o=this._optionsService.options.logger)===null||o===void 0?void 0:o.debug.bind(this._optionsService.options.logger))!==null&&a!==void 0?a:console.log,s,l)}info(s,...l){var o,a;this._logLevel<=_.LogLevelEnum.INFO&&this._log((a=(o=this._optionsService.options.logger)===null||o===void 0?void 0:o.info.bind(this._optionsService.options.logger))!==null&&a!==void 0?a:console.info,s,l)}warn(s,...l){var o,a;this._logLevel<=_.LogLevelEnum.WARN&&this._log((a=(o=this._optionsService.options.logger)===null||o===void 0?void 0:o.warn.bind(this._optionsService.options.logger))!==null&&a!==void 0?a:console.warn,s,l)}error(s,...l){var o,a;this._logLevel<=_.LogLevelEnum.ERROR&&this._log((a=(o=this._optionsService.options.logger)===null||o===void 0?void 0:o.error.bind(this._optionsService.options.logger))!==null&&a!==void 0?a:console.error,s,l)}};i.LogService=f=u([v(0,_.IOptionsService)],f),i.setTraceLogger=function(s){C=s},i.traceCall=function(s,l,o){if(typeof o.value!="function")throw new Error("not supported");const a=o.value;o.value=function(...p){if(C.logLevel!==_.LogLevelEnum.TRACE)return a.apply(this,p);C.trace(`GlyphRenderer#${a.name}(${p.map(y=>JSON.stringify(y)).join(", ")})`);const S=a.apply(this,p);return C.trace(`GlyphRenderer#${a.name} return`,S),S}}},7302:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OptionsService=i.DEFAULT_OPTIONS=void 0;const u=c(8460),v=c(844),h=c(6114);i.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:h.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const _=["normal","bold","100","200","300","400","500","600","700","800","900"];class E extends v.Disposable{constructor(f){super(),this._onOptionChange=this.register(new u.EventEmitter),this.onOptionChange=this._onOptionChange.event;const s=Object.assign({},i.DEFAULT_OPTIONS);for(const l in f)if(l in s)try{const o=f[l];s[l]=this._sanitizeAndValidateOption(l,o)}catch(o){console.error(o)}this.rawOptions=s,this.options=Object.assign({},s),this._setupOptions()}onSpecificOptionChange(f,s){return this.onOptionChange(l=>{l===f&&s(this.rawOptions[f])})}onMultipleOptionChange(f,s){return this.onOptionChange(l=>{f.indexOf(l)!==-1&&s()})}_setupOptions(){const f=l=>{if(!(l in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${l}"`);return this.rawOptions[l]},s=(l,o)=>{if(!(l in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${l}"`);o=this._sanitizeAndValidateOption(l,o),this.rawOptions[l]!==o&&(this.rawOptions[l]=o,this._onOptionChange.fire(l))};for(const l in this.rawOptions){const o={get:f.bind(this,l),set:s.bind(this,l)};Object.defineProperty(this.options,l,o)}}_sanitizeAndValidateOption(f,s){switch(f){case"cursorStyle":if(s||(s=i.DEFAULT_OPTIONS[f]),!function(l){return l==="block"||l==="underline"||l==="bar"}(s))throw new Error(`"${s}" is not a valid value for ${f}`);break;case"wordSeparator":s||(s=i.DEFAULT_OPTIONS[f]);break;case"fontWeight":case"fontWeightBold":if(typeof s=="number"&&1<=s&&s<=1e3)break;s=_.includes(s)?s:i.DEFAULT_OPTIONS[f];break;case"cursorWidth":s=Math.floor(s);case"lineHeight":case"tabStopWidth":if(s<1)throw new Error(`${f} cannot be less than 1, value: ${s}`);break;case"minimumContrastRatio":s=Math.max(1,Math.min(21,Math.round(10*s)/10));break;case"scrollback":if((s=Math.min(s,4294967295))<0)throw new Error(`${f} cannot be less than 0, value: ${s}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(s<=0)throw new Error(`${f} cannot be less than or equal to 0, value: ${s}`);break;case"rows":case"cols":if(!s&&s!==0)throw new Error(`${f} must be numeric, value: ${s}`);break;case"windowsPty":s=s??{}}return s}}i.OptionsService=E},2660:function(x,i,c){var u=this&&this.__decorate||function(E,C,f,s){var l,o=arguments.length,a=o<3?C:s===null?s=Object.getOwnPropertyDescriptor(C,f):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(E,C,f,s);else for(var p=E.length-1;p>=0;p--)(l=E[p])&&(a=(o<3?l(a):o>3?l(C,f,a):l(C,f))||a);return o>3&&a&&Object.defineProperty(C,f,a),a},v=this&&this.__param||function(E,C){return function(f,s){C(f,s,E)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkService=void 0;const h=c(2585);let _=i.OscLinkService=class{constructor(E){this._bufferService=E,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(E){const C=this._bufferService.buffer;if(E.id===void 0){const p=C.addMarker(C.ybase+C.y),S={data:E,id:this._nextId++,lines:[p]};return p.onDispose(()=>this._removeMarkerFromLink(S,p)),this._dataByLinkId.set(S.id,S),S.id}const f=E,s=this._getEntryIdKey(f),l=this._entriesWithId.get(s);if(l)return this.addLineToLink(l.id,C.ybase+C.y),l.id;const o=C.addMarker(C.ybase+C.y),a={id:this._nextId++,key:this._getEntryIdKey(f),data:f,lines:[o]};return o.onDispose(()=>this._removeMarkerFromLink(a,o)),this._entriesWithId.set(a.key,a),this._dataByLinkId.set(a.id,a),a.id}addLineToLink(E,C){const f=this._dataByLinkId.get(E);if(f&&f.lines.every(s=>s.line!==C)){const s=this._bufferService.buffer.addMarker(C);f.lines.push(s),s.onDispose(()=>this._removeMarkerFromLink(f,s))}}getLinkData(E){var C;return(C=this._dataByLinkId.get(E))===null||C===void 0?void 0:C.data}_getEntryIdKey(E){return`${E.id};;${E.uri}`}_removeMarkerFromLink(E,C){const f=E.lines.indexOf(C);f!==-1&&(E.lines.splice(f,1),E.lines.length===0&&(E.data.id!==void 0&&this._entriesWithId.delete(E.key),this._dataByLinkId.delete(E.id)))}};i.OscLinkService=_=u([v(0,h.IBufferService)],_)},8343:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0;const c="di$target",u="di$dependencies";i.serviceRegistry=new Map,i.getServiceDependencies=function(v){return v[u]||[]},i.createDecorator=function(v){if(i.serviceRegistry.has(v))return i.serviceRegistry.get(v);const h=function(_,E,C){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(f,s,l){s[c]===s?s[u].push({id:f,index:l}):(s[u]=[{id:f,index:l}],s[c]=s)})(h,_,C)};return h.toString=()=>v,i.serviceRegistry.set(v,h),h}},2585:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;const u=c(8343);var v;i.IBufferService=(0,u.createDecorator)("BufferService"),i.ICoreMouseService=(0,u.createDecorator)("CoreMouseService"),i.ICoreService=(0,u.createDecorator)("CoreService"),i.ICharsetService=(0,u.createDecorator)("CharsetService"),i.IInstantiationService=(0,u.createDecorator)("InstantiationService"),function(h){h[h.TRACE=0]="TRACE",h[h.DEBUG=1]="DEBUG",h[h.INFO=2]="INFO",h[h.WARN=3]="WARN",h[h.ERROR=4]="ERROR",h[h.OFF=5]="OFF"}(v||(i.LogLevelEnum=v={})),i.ILogService=(0,u.createDecorator)("LogService"),i.IOptionsService=(0,u.createDecorator)("OptionsService"),i.IOscLinkService=(0,u.createDecorator)("OscLinkService"),i.IUnicodeService=(0,u.createDecorator)("UnicodeService"),i.IDecorationService=(0,u.createDecorator)("DecorationService")},1480:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeService=void 0;const u=c(8460),v=c(225);i.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new u.EventEmitter,this.onChange=this._onChange.event;const h=new v.UnicodeV6;this.register(h),this._active=h.version,this._activeProvider=h}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(h){if(!this._providers[h])throw new Error(`unknown Unicode version "${h}"`);this._active=h,this._activeProvider=this._providers[h],this._onChange.fire(h)}register(h){this._providers[h.version]=h}wcwidth(h){return this._activeProvider.wcwidth(h)}getStringCellWidth(h){let _=0;const E=h.length;for(let C=0;C<E;++C){let f=h.charCodeAt(C);if(55296<=f&&f<=56319){if(++C>=E)return _+this.wcwidth(f);const s=h.charCodeAt(C);56320<=s&&s<=57343?f=1024*(f-55296)+s-56320+65536:_+=this.wcwidth(s)}_+=this.wcwidth(f)}return _}}}},n={};function d(x){var i=n[x];if(i!==void 0)return i.exports;var c=n[x]={exports:{}};return r[x].call(c.exports,c,c.exports,d),c.exports}var m={};return(()=>{var x=m;Object.defineProperty(x,"__esModule",{value:!0}),x.Terminal=void 0;const i=d(9042),c=d(3236),u=d(844),v=d(5741),h=d(8285),_=d(7975),E=d(7090),C=["cols","rows"];class f extends u.Disposable{constructor(l){super(),this._core=this.register(new c.Terminal(l)),this._addonManager=this.register(new v.AddonManager),this._publicOptions=Object.assign({},this._core.options);const o=p=>this._core.options[p],a=(p,S)=>{this._checkReadonlyOptions(p),this._core.options[p]=S};for(const p in this._core.options){const S={get:o.bind(this,p),set:a.bind(this,p)};Object.defineProperty(this._publicOptions,p,S)}}_checkReadonlyOptions(l){if(C.includes(l))throw new Error(`Option "${l}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new _.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new E.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new h.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const l=this._core.coreService.decPrivateModes;let o="none";switch(this._core.coreMouseService.activeProtocol){case"X10":o="x10";break;case"VT200":o="vt200";break;case"DRAG":o="drag";break;case"ANY":o="any"}return{applicationCursorKeysMode:l.applicationCursorKeys,applicationKeypadMode:l.applicationKeypad,bracketedPasteMode:l.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:o,originMode:l.origin,reverseWraparoundMode:l.reverseWraparound,sendFocusMode:l.sendFocus,wraparoundMode:l.wraparound}}get options(){return this._publicOptions}set options(l){for(const o in l)this._publicOptions[o]=l[o]}blur(){this._core.blur()}focus(){this._core.focus()}resize(l,o){this._verifyIntegers(l,o),this._core.resize(l,o)}open(l){this._core.open(l)}attachCustomKeyEventHandler(l){this._core.attachCustomKeyEventHandler(l)}registerLinkProvider(l){return this._core.registerLinkProvider(l)}registerCharacterJoiner(l){return this._checkProposedApi(),this._core.registerCharacterJoiner(l)}deregisterCharacterJoiner(l){this._checkProposedApi(),this._core.deregisterCharacterJoiner(l)}registerMarker(l=0){return this._verifyIntegers(l),this._core.registerMarker(l)}registerDecoration(l){var o,a,p;return this._checkProposedApi(),this._verifyPositiveIntegers((o=l.x)!==null&&o!==void 0?o:0,(a=l.width)!==null&&a!==void 0?a:0,(p=l.height)!==null&&p!==void 0?p:0),this._core.registerDecoration(l)}hasSelection(){return this._core.hasSelection()}select(l,o,a){this._verifyIntegers(l,o,a),this._core.select(l,o,a)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(l,o){this._verifyIntegers(l,o),this._core.selectLines(l,o)}dispose(){super.dispose()}scrollLines(l){this._verifyIntegers(l),this._core.scrollLines(l)}scrollPages(l){this._verifyIntegers(l),this._core.scrollPages(l)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(l){this._verifyIntegers(l),this._core.scrollToLine(l)}clear(){this._core.clear()}write(l,o){this._core.write(l,o)}writeln(l,o){this._core.write(l),this._core.write(`\r
`,o)}paste(l){this._core.paste(l)}refresh(l,o){this._verifyIntegers(l,o),this._core.refresh(l,o)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(l){this._addonManager.loadAddon(this,l)}static get strings(){return i}_verifyIntegers(...l){for(const o of l)if(o===1/0||isNaN(o)||o%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...l){for(const o of l)if(o&&(o===1/0||isNaN(o)||o%1!=0||o<0))throw new Error("This API only accepts positive integers")}}x.Terminal=f})(),m})())})(Hh);var wf=Hh.exports,$h={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(self,()=>(()=>{var r={};return(()=>{var n=r;Object.defineProperty(n,"__esModule",{value:!0}),n.FitAddon=void 0,n.FitAddon=class{activate(d){this._terminal=d}dispose(){}fit(){const d=this.proposeDimensions();if(!d||!this._terminal||isNaN(d.cols)||isNaN(d.rows))return;const m=this._terminal._core;this._terminal.rows===d.rows&&this._terminal.cols===d.cols||(m._renderService.clear(),this._terminal.resize(d.cols,d.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const d=this._terminal._core,m=d._renderService.dimensions;if(m.css.cell.width===0||m.css.cell.height===0)return;const x=this._terminal.options.scrollback===0?0:d.viewport.scrollBarWidth,i=window.getComputedStyle(this._terminal.element.parentElement),c=parseInt(i.getPropertyValue("height")),u=Math.max(0,parseInt(i.getPropertyValue("width"))),v=window.getComputedStyle(this._terminal.element),h=c-(parseInt(v.getPropertyValue("padding-top"))+parseInt(v.getPropertyValue("padding-bottom"))),_=u-(parseInt(v.getPropertyValue("padding-right"))+parseInt(v.getPropertyValue("padding-left")))-x;return{cols:Math.max(2,Math.floor(_/m.css.cell.width)),rows:Math.max(1,Math.floor(h/m.css.cell.height))}}}})(),r})())})($h);var Ef=$h.exports,zh={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(self,()=>(()=>{var r={965:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.GlyphRenderer=void 0;const u=c(374),v=c(509),h=c(855),_=c(859),E=c(381),C=11,f=C*Float32Array.BYTES_PER_ELEMENT;let s,l=0,o=0,a=0;class p extends _.Disposable{constructor(y,L,g,w){super(),this._terminal=y,this._gl=L,this._dimensions=g,this._optionsService=w,this._activeBuffer=0,this._vertices={count:0,attributes:new Float32Array(0),attributesBuffers:[new Float32Array(0),new Float32Array(0)]};const b=this._gl;v.TextureAtlas.maxAtlasPages===void 0&&(v.TextureAtlas.maxAtlasPages=Math.min(32,(0,u.throwIfFalsy)(b.getParameter(b.MAX_TEXTURE_IMAGE_UNITS))),v.TextureAtlas.maxTextureSize=(0,u.throwIfFalsy)(b.getParameter(b.MAX_TEXTURE_SIZE))),this._program=(0,u.throwIfFalsy)((0,E.createProgram)(b,`#version 300 es
layout (location = 0) in vec2 a_unitquad;
layout (location = 1) in vec2 a_cellpos;
layout (location = 2) in vec2 a_offset;
layout (location = 3) in vec2 a_size;
layout (location = 4) in float a_texpage;
layout (location = 5) in vec2 a_texcoord;
layout (location = 6) in vec2 a_texsize;

uniform mat4 u_projection;
uniform vec2 u_resolution;

out vec2 v_texcoord;
flat out int v_texpage;

void main() {
  vec2 zeroToOne = (a_offset / u_resolution) + a_cellpos + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_texpage = int(a_texpage);
  v_texcoord = a_texcoord + a_unitquad * a_texsize;
}`,function(H){let I="";for(let k=1;k<H;k++)I+=` else if (v_texpage == ${k}) { outColor = texture(u_texture[${k}], v_texcoord); }`;return`#version 300 es
precision lowp float;

in vec2 v_texcoord;
flat in int v_texpage;

uniform sampler2D u_texture[${H}];

out vec4 outColor;

void main() {
  if (v_texpage == 0) {
    outColor = texture(u_texture[0], v_texcoord);
  } ${I}
}`}(v.TextureAtlas.maxAtlasPages))),this.register((0,_.toDisposable)(()=>b.deleteProgram(this._program))),this._projectionLocation=(0,u.throwIfFalsy)(b.getUniformLocation(this._program,"u_projection")),this._resolutionLocation=(0,u.throwIfFalsy)(b.getUniformLocation(this._program,"u_resolution")),this._textureLocation=(0,u.throwIfFalsy)(b.getUniformLocation(this._program,"u_texture")),this._vertexArrayObject=b.createVertexArray(),b.bindVertexArray(this._vertexArrayObject);const M=new Float32Array([0,0,1,0,0,1,1,1]),R=b.createBuffer();this.register((0,_.toDisposable)(()=>b.deleteBuffer(R))),b.bindBuffer(b.ARRAY_BUFFER,R),b.bufferData(b.ARRAY_BUFFER,M,b.STATIC_DRAW),b.enableVertexAttribArray(0),b.vertexAttribPointer(0,2,this._gl.FLOAT,!1,0,0);const T=new Uint8Array([0,1,2,3]),B=b.createBuffer();this.register((0,_.toDisposable)(()=>b.deleteBuffer(B))),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,B),b.bufferData(b.ELEMENT_ARRAY_BUFFER,T,b.STATIC_DRAW),this._attributesBuffer=(0,u.throwIfFalsy)(b.createBuffer()),this.register((0,_.toDisposable)(()=>b.deleteBuffer(this._attributesBuffer))),b.bindBuffer(b.ARRAY_BUFFER,this._attributesBuffer),b.enableVertexAttribArray(2),b.vertexAttribPointer(2,2,b.FLOAT,!1,f,0),b.vertexAttribDivisor(2,1),b.enableVertexAttribArray(3),b.vertexAttribPointer(3,2,b.FLOAT,!1,f,2*Float32Array.BYTES_PER_ELEMENT),b.vertexAttribDivisor(3,1),b.enableVertexAttribArray(4),b.vertexAttribPointer(4,1,b.FLOAT,!1,f,4*Float32Array.BYTES_PER_ELEMENT),b.vertexAttribDivisor(4,1),b.enableVertexAttribArray(5),b.vertexAttribPointer(5,2,b.FLOAT,!1,f,5*Float32Array.BYTES_PER_ELEMENT),b.vertexAttribDivisor(5,1),b.enableVertexAttribArray(6),b.vertexAttribPointer(6,2,b.FLOAT,!1,f,7*Float32Array.BYTES_PER_ELEMENT),b.vertexAttribDivisor(6,1),b.enableVertexAttribArray(1),b.vertexAttribPointer(1,2,b.FLOAT,!1,f,9*Float32Array.BYTES_PER_ELEMENT),b.vertexAttribDivisor(1,1),b.useProgram(this._program);const F=new Int32Array(v.TextureAtlas.maxAtlasPages);for(let H=0;H<v.TextureAtlas.maxAtlasPages;H++)F[H]=H;b.uniform1iv(this._textureLocation,F),b.uniformMatrix4fv(this._projectionLocation,!1,E.PROJECTION_MATRIX),this._atlasTextures=[];for(let H=0;H<v.TextureAtlas.maxAtlasPages;H++){const I=new E.GLTexture((0,u.throwIfFalsy)(b.createTexture()));this.register((0,_.toDisposable)(()=>b.deleteTexture(I.texture))),b.activeTexture(b.TEXTURE0+H),b.bindTexture(b.TEXTURE_2D,I.texture),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,1,1,0,b.RGBA,b.UNSIGNED_BYTE,new Uint8Array([255,0,0,255])),this._atlasTextures[H]=I}b.enable(b.BLEND),b.blendFunc(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA),this.handleResize()}beginFrame(){return!this._atlas||this._atlas.beginFrame()}updateCell(y,L,g,w,b,M,R,T,B){this._updateCell(this._vertices.attributes,y,L,g,w,b,M,R,T,B)}_updateCell(y,L,g,w,b,M,R,T,B,F){l=(g*this._terminal.cols+L)*C,w!==h.NULL_CELL_CODE&&w!==void 0?this._atlas&&(s=T&&T.length>1?this._atlas.getRasterizedGlyphCombinedChar(T,b,M,R,!1):this._atlas.getRasterizedGlyph(w,b,M,R,!1),o=Math.floor((this._dimensions.device.cell.width-this._dimensions.device.char.width)/2),b!==F&&s.offset.x>o?(a=s.offset.x-o,y[l]=-(s.offset.x-a)+this._dimensions.device.char.left,y[l+1]=-s.offset.y+this._dimensions.device.char.top,y[l+2]=(s.size.x-a)/this._dimensions.device.canvas.width,y[l+3]=s.size.y/this._dimensions.device.canvas.height,y[l+4]=s.texturePage,y[l+5]=s.texturePositionClipSpace.x+a/this._atlas.pages[s.texturePage].canvas.width,y[l+6]=s.texturePositionClipSpace.y,y[l+7]=s.sizeClipSpace.x-a/this._atlas.pages[s.texturePage].canvas.width,y[l+8]=s.sizeClipSpace.y):(y[l]=-s.offset.x+this._dimensions.device.char.left,y[l+1]=-s.offset.y+this._dimensions.device.char.top,y[l+2]=s.size.x/this._dimensions.device.canvas.width,y[l+3]=s.size.y/this._dimensions.device.canvas.height,y[l+4]=s.texturePage,y[l+5]=s.texturePositionClipSpace.x,y[l+6]=s.texturePositionClipSpace.y,y[l+7]=s.sizeClipSpace.x,y[l+8]=s.sizeClipSpace.y),this._optionsService.rawOptions.rescaleOverlappingGlyphs&&(0,u.allowRescaling)(w,B,s.size.x,this._dimensions.device.cell.width)&&(y[l+2]=(this._dimensions.device.cell.width-1)/this._dimensions.device.canvas.width)):y.fill(0,l,l+C-1-2)}clear(){const y=this._terminal,L=y.cols*y.rows*C;this._vertices.count!==L?this._vertices.attributes=new Float32Array(L):this._vertices.attributes.fill(0);let g=0;for(;g<this._vertices.attributesBuffers.length;g++)this._vertices.count!==L?this._vertices.attributesBuffers[g]=new Float32Array(L):this._vertices.attributesBuffers[g].fill(0);this._vertices.count=L,g=0;for(let w=0;w<y.rows;w++)for(let b=0;b<y.cols;b++)this._vertices.attributes[g+9]=b/y.cols,this._vertices.attributes[g+10]=w/y.rows,g+=C}handleResize(){const y=this._gl;y.useProgram(this._program),y.viewport(0,0,y.canvas.width,y.canvas.height),y.uniform2f(this._resolutionLocation,y.canvas.width,y.canvas.height),this.clear()}render(y){if(!this._atlas)return;const L=this._gl;L.useProgram(this._program),L.bindVertexArray(this._vertexArrayObject),this._activeBuffer=(this._activeBuffer+1)%2;const g=this._vertices.attributesBuffers[this._activeBuffer];let w=0;for(let b=0;b<y.lineLengths.length;b++){const M=b*this._terminal.cols*C,R=this._vertices.attributes.subarray(M,M+y.lineLengths[b]*C);g.set(R,w),w+=R.length}L.bindBuffer(L.ARRAY_BUFFER,this._attributesBuffer),L.bufferData(L.ARRAY_BUFFER,g.subarray(0,w),L.STREAM_DRAW);for(let b=0;b<this._atlas.pages.length;b++)this._atlas.pages[b].version!==this._atlasTextures[b].version&&this._bindAtlasPageTexture(L,this._atlas,b);L.drawElementsInstanced(L.TRIANGLE_STRIP,4,L.UNSIGNED_BYTE,0,w/C)}setAtlas(y){this._atlas=y;for(const L of this._atlasTextures)L.version=-1}_bindAtlasPageTexture(y,L,g){y.activeTexture(y.TEXTURE0+g),y.bindTexture(y.TEXTURE_2D,this._atlasTextures[g].texture),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE),y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,L.pages[g].canvas),y.generateMipmap(y.TEXTURE_2D),this._atlasTextures[g].version=L.pages[g].version}setDimensions(y){this._dimensions=y}}i.GlyphRenderer=p},742:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RectangleRenderer=void 0;const u=c(374),v=c(859),h=c(310),_=c(381),E=8*Float32Array.BYTES_PER_ELEMENT;class C{constructor(){this.attributes=new Float32Array(160),this.count=0}}let f=0,s=0,l=0,o=0,a=0,p=0,S=0;class y extends v.Disposable{constructor(g,w,b,M){super(),this._terminal=g,this._gl=w,this._dimensions=b,this._themeService=M,this._vertices=new C,this._verticesCursor=new C;const R=this._gl;this._program=(0,u.throwIfFalsy)((0,_.createProgram)(R,`#version 300 es
layout (location = 0) in vec2 a_position;
layout (location = 1) in vec2 a_size;
layout (location = 2) in vec4 a_color;
layout (location = 3) in vec2 a_unitquad;

uniform mat4 u_projection;

out vec4 v_color;

void main() {
  vec2 zeroToOne = a_position + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_color = a_color;
}`,`#version 300 es
precision lowp float;

in vec4 v_color;

out vec4 outColor;

void main() {
  outColor = v_color;
}`)),this.register((0,v.toDisposable)(()=>R.deleteProgram(this._program))),this._projectionLocation=(0,u.throwIfFalsy)(R.getUniformLocation(this._program,"u_projection")),this._vertexArrayObject=R.createVertexArray(),R.bindVertexArray(this._vertexArrayObject);const T=new Float32Array([0,0,1,0,0,1,1,1]),B=R.createBuffer();this.register((0,v.toDisposable)(()=>R.deleteBuffer(B))),R.bindBuffer(R.ARRAY_BUFFER,B),R.bufferData(R.ARRAY_BUFFER,T,R.STATIC_DRAW),R.enableVertexAttribArray(3),R.vertexAttribPointer(3,2,this._gl.FLOAT,!1,0,0);const F=new Uint8Array([0,1,2,3]),H=R.createBuffer();this.register((0,v.toDisposable)(()=>R.deleteBuffer(H))),R.bindBuffer(R.ELEMENT_ARRAY_BUFFER,H),R.bufferData(R.ELEMENT_ARRAY_BUFFER,F,R.STATIC_DRAW),this._attributesBuffer=(0,u.throwIfFalsy)(R.createBuffer()),this.register((0,v.toDisposable)(()=>R.deleteBuffer(this._attributesBuffer))),R.bindBuffer(R.ARRAY_BUFFER,this._attributesBuffer),R.enableVertexAttribArray(0),R.vertexAttribPointer(0,2,R.FLOAT,!1,E,0),R.vertexAttribDivisor(0,1),R.enableVertexAttribArray(1),R.vertexAttribPointer(1,2,R.FLOAT,!1,E,2*Float32Array.BYTES_PER_ELEMENT),R.vertexAttribDivisor(1,1),R.enableVertexAttribArray(2),R.vertexAttribPointer(2,4,R.FLOAT,!1,E,4*Float32Array.BYTES_PER_ELEMENT),R.vertexAttribDivisor(2,1),this._updateCachedColors(M.colors),this.register(this._themeService.onChangeColors(I=>{this._updateCachedColors(I),this._updateViewportRectangle()}))}renderBackgrounds(){this._renderVertices(this._vertices)}renderCursor(){this._renderVertices(this._verticesCursor)}_renderVertices(g){const w=this._gl;w.useProgram(this._program),w.bindVertexArray(this._vertexArrayObject),w.uniformMatrix4fv(this._projectionLocation,!1,_.PROJECTION_MATRIX),w.bindBuffer(w.ARRAY_BUFFER,this._attributesBuffer),w.bufferData(w.ARRAY_BUFFER,g.attributes,w.DYNAMIC_DRAW),w.drawElementsInstanced(this._gl.TRIANGLE_STRIP,4,w.UNSIGNED_BYTE,0,g.count)}handleResize(){this._updateViewportRectangle()}setDimensions(g){this._dimensions=g}_updateCachedColors(g){this._bgFloat=this._colorToFloat32Array(g.background),this._cursorFloat=this._colorToFloat32Array(g.cursor)}_updateViewportRectangle(){this._addRectangleFloat(this._vertices.attributes,0,0,0,this._terminal.cols*this._dimensions.device.cell.width,this._terminal.rows*this._dimensions.device.cell.height,this._bgFloat)}updateBackgrounds(g){const w=this._terminal,b=this._vertices;let M,R,T,B,F,H,I,k,A,P,O,$=1;for(M=0;M<w.rows;M++){for(T=-1,B=0,F=0,H=!1,R=0;R<w.cols;R++)I=(M*w.cols+R)*h.RENDER_MODEL_INDICIES_PER_CELL,k=g.cells[I+h.RENDER_MODEL_BG_OFFSET],A=g.cells[I+h.RENDER_MODEL_FG_OFFSET],P=!!(67108864&A),(k!==B||A!==F&&(H||P))&&((B!==0||H&&F!==0)&&(O=8*$++,this._updateRectangle(b,O,F,B,T,R,M)),T=R,B=k,F=A,H=P);(B!==0||H&&F!==0)&&(O=8*$++,this._updateRectangle(b,O,F,B,T,w.cols,M))}b.count=$}updateCursor(g){const w=this._verticesCursor,b=g.cursor;if(!b||b.style==="block")return void(w.count=0);let M,R=0;b.style!=="bar"&&b.style!=="outline"||(M=8*R++,this._addRectangleFloat(w.attributes,M,b.x*this._dimensions.device.cell.width,b.y*this._dimensions.device.cell.height,b.style==="bar"?b.dpr*b.cursorWidth:b.dpr,this._dimensions.device.cell.height,this._cursorFloat)),b.style!=="underline"&&b.style!=="outline"||(M=8*R++,this._addRectangleFloat(w.attributes,M,b.x*this._dimensions.device.cell.width,(b.y+1)*this._dimensions.device.cell.height-b.dpr,b.width*this._dimensions.device.cell.width,b.dpr,this._cursorFloat)),b.style==="outline"&&(M=8*R++,this._addRectangleFloat(w.attributes,M,b.x*this._dimensions.device.cell.width,b.y*this._dimensions.device.cell.height,b.width*this._dimensions.device.cell.width,b.dpr,this._cursorFloat),M=8*R++,this._addRectangleFloat(w.attributes,M,(b.x+b.width)*this._dimensions.device.cell.width-b.dpr,b.y*this._dimensions.device.cell.height,b.dpr,this._dimensions.device.cell.height,this._cursorFloat)),w.count=R}_updateRectangle(g,w,b,M,R,T,B){if(67108864&b)switch(50331648&b){case 16777216:case 33554432:f=this._themeService.colors.ansi[255&b].rgba;break;case 50331648:f=(16777215&b)<<8;break;default:f=this._themeService.colors.foreground.rgba}else switch(50331648&M){case 16777216:case 33554432:f=this._themeService.colors.ansi[255&M].rgba;break;case 50331648:f=(16777215&M)<<8;break;default:f=this._themeService.colors.background.rgba}g.attributes.length<w+4&&(g.attributes=(0,_.expandFloat32Array)(g.attributes,this._terminal.rows*this._terminal.cols*8)),s=R*this._dimensions.device.cell.width,l=B*this._dimensions.device.cell.height,o=(f>>24&255)/255,a=(f>>16&255)/255,p=(f>>8&255)/255,S=1,this._addRectangle(g.attributes,w,s,l,(T-R)*this._dimensions.device.cell.width,this._dimensions.device.cell.height,o,a,p,S)}_addRectangle(g,w,b,M,R,T,B,F,H,I){g[w]=b/this._dimensions.device.canvas.width,g[w+1]=M/this._dimensions.device.canvas.height,g[w+2]=R/this._dimensions.device.canvas.width,g[w+3]=T/this._dimensions.device.canvas.height,g[w+4]=B,g[w+5]=F,g[w+6]=H,g[w+7]=I}_addRectangleFloat(g,w,b,M,R,T,B){g[w]=b/this._dimensions.device.canvas.width,g[w+1]=M/this._dimensions.device.canvas.height,g[w+2]=R/this._dimensions.device.canvas.width,g[w+3]=T/this._dimensions.device.canvas.height,g[w+4]=B[0],g[w+5]=B[1],g[w+6]=B[2],g[w+7]=B[3]}_colorToFloat32Array(g){return new Float32Array([(g.rgba>>24&255)/255,(g.rgba>>16&255)/255,(g.rgba>>8&255)/255,(255&g.rgba)/255])}}i.RectangleRenderer=y},310:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RenderModel=i.COMBINED_CHAR_BIT_MASK=i.RENDER_MODEL_EXT_OFFSET=i.RENDER_MODEL_FG_OFFSET=i.RENDER_MODEL_BG_OFFSET=i.RENDER_MODEL_INDICIES_PER_CELL=void 0;const u=c(296);i.RENDER_MODEL_INDICIES_PER_CELL=4,i.RENDER_MODEL_BG_OFFSET=1,i.RENDER_MODEL_FG_OFFSET=2,i.RENDER_MODEL_EXT_OFFSET=3,i.COMBINED_CHAR_BIT_MASK=2147483648,i.RenderModel=class{constructor(){this.cells=new Uint32Array(0),this.lineLengths=new Uint32Array(0),this.selection=(0,u.createSelectionRenderModel)()}resize(v,h){const _=v*h*i.RENDER_MODEL_INDICIES_PER_CELL;_!==this.cells.length&&(this.cells=new Uint32Array(_),this.lineLengths=new Uint32Array(h))}clear(){this.cells.fill(0,0),this.lineLengths.fill(0,0)}}},666:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.JoinedCellData=i.WebglRenderer=void 0;const u=c(820),v=c(274),h=c(627),_=c(457),E=c(56),C=c(374),f=c(345),s=c(859),l=c(147),o=c(782),a=c(855),p=c(965),S=c(742),y=c(310),L=c(733);class g extends s.Disposable{constructor(R,T,B,F,H,I,k,A,P){super(),this._terminal=R,this._characterJoinerService=T,this._charSizeService=B,this._coreBrowserService=F,this._coreService=H,this._decorationService=I,this._optionsService=k,this._themeService=A,this._cursorBlinkStateManager=new s.MutableDisposable,this._charAtlasDisposable=this.register(new s.MutableDisposable),this._observerDisposable=this.register(new s.MutableDisposable),this._model=new y.RenderModel,this._workCell=new o.CellData,this._workCell2=new o.CellData,this._rectangleRenderer=this.register(new s.MutableDisposable),this._glyphRenderer=this.register(new s.MutableDisposable),this._onChangeTextureAtlas=this.register(new f.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new f.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new f.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onRequestRedraw=this.register(new f.EventEmitter),this.onRequestRedraw=this._onRequestRedraw.event,this._onContextLoss=this.register(new f.EventEmitter),this.onContextLoss=this._onContextLoss.event,this.register(this._themeService.onChangeColors(()=>this._handleColorChange())),this._cellColorResolver=new v.CellColorResolver(this._terminal,this._optionsService,this._model.selection,this._decorationService,this._coreBrowserService,this._themeService),this._core=this._terminal._core,this._renderLayers=[new L.LinkRenderLayer(this._core.screenElement,2,this._terminal,this._core.linkifier,this._coreBrowserService,k,this._themeService)],this.dimensions=(0,C.createRenderDimensions)(),this._devicePixelRatio=this._coreBrowserService.dpr,this._updateDimensions(),this._updateCursorBlink(),this.register(k.onOptionChange(()=>this._handleOptionsChanged())),this._canvas=this._coreBrowserService.mainDocument.createElement("canvas");const O={antialias:!1,depth:!1,preserveDrawingBuffer:P};if(this._gl=this._canvas.getContext("webgl2",O),!this._gl)throw new Error("WebGL2 not supported "+this._gl);this.register((0,u.addDisposableDomListener)(this._canvas,"webglcontextlost",$=>{console.log("webglcontextlost event received"),$.preventDefault(),this._contextRestorationTimeout=setTimeout(()=>{this._contextRestorationTimeout=void 0,console.warn("webgl context not restored; firing onContextLoss"),this._onContextLoss.fire($)},3e3)})),this.register((0,u.addDisposableDomListener)(this._canvas,"webglcontextrestored",$=>{console.warn("webglcontextrestored event received"),clearTimeout(this._contextRestorationTimeout),this._contextRestorationTimeout=void 0,(0,h.removeTerminalFromCache)(this._terminal),this._initializeWebGLState(),this._requestRedrawViewport()})),this._observerDisposable.value=(0,E.observeDevicePixelDimensions)(this._canvas,this._coreBrowserService.window,($,W)=>this._setCanvasDevicePixelDimensions($,W)),this.register(this._coreBrowserService.onWindowChange($=>{this._observerDisposable.value=(0,E.observeDevicePixelDimensions)(this._canvas,$,(W,j)=>this._setCanvasDevicePixelDimensions(W,j))})),this._core.screenElement.appendChild(this._canvas),[this._rectangleRenderer.value,this._glyphRenderer.value]=this._initializeWebGLState(),this._isAttached=this._coreBrowserService.window.document.body.contains(this._core.screenElement),this.register((0,s.toDisposable)(()=>{var $;for(const W of this._renderLayers)W.dispose();($=this._canvas.parentElement)==null||$.removeChild(this._canvas),(0,h.removeTerminalFromCache)(this._terminal)}))}get textureAtlas(){var R;return(R=this._charAtlas)==null?void 0:R.pages[0].canvas}_handleColorChange(){this._refreshCharAtlas(),this._clearModel(!0)}handleDevicePixelRatioChange(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._terminal.cols,this._terminal.rows))}handleResize(R,T){var B,F,H,I;this._updateDimensions(),this._model.resize(this._terminal.cols,this._terminal.rows);for(const k of this._renderLayers)k.resize(this._terminal,this.dimensions);this._canvas.width=this.dimensions.device.canvas.width,this._canvas.height=this.dimensions.device.canvas.height,this._canvas.style.width=`${this.dimensions.css.canvas.width}px`,this._canvas.style.height=`${this.dimensions.css.canvas.height}px`,this._core.screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._core.screenElement.style.height=`${this.dimensions.css.canvas.height}px`,(B=this._rectangleRenderer.value)==null||B.setDimensions(this.dimensions),(F=this._rectangleRenderer.value)==null||F.handleResize(),(H=this._glyphRenderer.value)==null||H.setDimensions(this.dimensions),(I=this._glyphRenderer.value)==null||I.handleResize(),this._refreshCharAtlas(),this._clearModel(!1)}handleCharSizeChanged(){this.handleResize(this._terminal.cols,this._terminal.rows)}handleBlur(){var R;for(const T of this._renderLayers)T.handleBlur(this._terminal);(R=this._cursorBlinkStateManager.value)==null||R.pause(),this._requestRedrawViewport()}handleFocus(){var R;for(const T of this._renderLayers)T.handleFocus(this._terminal);(R=this._cursorBlinkStateManager.value)==null||R.resume(),this._requestRedrawViewport()}handleSelectionChanged(R,T,B){for(const F of this._renderLayers)F.handleSelectionChanged(this._terminal,R,T,B);this._model.selection.update(this._core,R,T,B),this._requestRedrawViewport()}handleCursorMove(){var R;for(const T of this._renderLayers)T.handleCursorMove(this._terminal);(R=this._cursorBlinkStateManager.value)==null||R.restartBlinkAnimation()}_handleOptionsChanged(){this._updateDimensions(),this._refreshCharAtlas(),this._updateCursorBlink()}_initializeWebGLState(){return this._rectangleRenderer.value=new S.RectangleRenderer(this._terminal,this._gl,this.dimensions,this._themeService),this._glyphRenderer.value=new p.GlyphRenderer(this._terminal,this._gl,this.dimensions,this._optionsService),this.handleCharSizeChanged(),[this._rectangleRenderer.value,this._glyphRenderer.value]}_refreshCharAtlas(){var T;if(this.dimensions.device.char.width<=0&&this.dimensions.device.char.height<=0)return void(this._isAttached=!1);const R=(0,h.acquireTextureAtlas)(this._terminal,this._optionsService.rawOptions,this._themeService.colors,this.dimensions.device.cell.width,this.dimensions.device.cell.height,this.dimensions.device.char.width,this.dimensions.device.char.height,this._coreBrowserService.dpr);this._charAtlas!==R&&(this._onChangeTextureAtlas.fire(R.pages[0].canvas),this._charAtlasDisposable.value=(0,s.getDisposeArrayDisposable)([(0,f.forwardEvent)(R.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),(0,f.forwardEvent)(R.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)])),this._charAtlas=R,this._charAtlas.warmUp(),(T=this._glyphRenderer.value)==null||T.setAtlas(this._charAtlas)}_clearModel(R){var T;this._model.clear(),R&&((T=this._glyphRenderer.value)==null||T.clear())}clearTextureAtlas(){var R;(R=this._charAtlas)==null||R.clearTexture(),this._clearModel(!0),this._requestRedrawViewport()}clear(){var R;this._clearModel(!0);for(const T of this._renderLayers)T.reset(this._terminal);(R=this._cursorBlinkStateManager.value)==null||R.restartBlinkAnimation(),this._updateCursorBlink()}registerCharacterJoiner(R){return-1}deregisterCharacterJoiner(R){return!1}renderRows(R,T){if(!this._isAttached){if(!(this._coreBrowserService.window.document.body.contains(this._core.screenElement)&&this._charSizeService.width&&this._charSizeService.height))return;this._updateDimensions(),this._refreshCharAtlas(),this._isAttached=!0}for(const B of this._renderLayers)B.handleGridChanged(this._terminal,R,T);this._glyphRenderer.value&&this._rectangleRenderer.value&&(this._glyphRenderer.value.beginFrame()?(this._clearModel(!0),this._updateModel(0,this._terminal.rows-1)):this._updateModel(R,T),this._rectangleRenderer.value.renderBackgrounds(),this._glyphRenderer.value.render(this._model),this._cursorBlinkStateManager.value&&!this._cursorBlinkStateManager.value.isCursorVisible||this._rectangleRenderer.value.renderCursor())}_updateCursorBlink(){this._terminal.options.cursorBlink?this._cursorBlinkStateManager.value=new _.CursorBlinkStateManager(()=>{this._requestRedrawCursor()},this._coreBrowserService):this._cursorBlinkStateManager.clear(),this._requestRedrawCursor()}_updateModel(R,T){const B=this._core;let F,H,I,k,A,P,O,$,W,j,K,Y,D,N,z=this._workCell;R=b(R,B.rows-1,0),T=b(T,B.rows-1,0);const U=this._terminal.buffer.active.baseY+this._terminal.buffer.active.cursorY,J=U-B.buffer.ydisp,q=Math.min(this._terminal.buffer.active.cursorX,B.cols-1);let te=-1;const Z=this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden&&(!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isCursorVisible);this._model.cursor=void 0;let ye=!1;for(H=R;H<=T;H++)for(I=H+B.buffer.ydisp,k=B.buffer.lines.get(I),this._model.lineLengths[H]=0,A=this._characterJoinerService.getJoinedCharacters(I),D=0;D<B.cols;D++)if(F=this._cellColorResolver.result.bg,k.loadCell(D,z),D===0&&(F=this._cellColorResolver.result.bg),P=!1,O=D,A.length>0&&D===A[0][0]&&(P=!0,$=A.shift(),z=new w(z,k.translateToString(!0,$[0],$[1]),$[1]-$[0]),O=$[1]-1),W=z.getChars(),j=z.getCode(),Y=(H*B.cols+D)*y.RENDER_MODEL_INDICIES_PER_CELL,this._cellColorResolver.resolve(z,D,I,this.dimensions.device.cell.width),Z&&I===U&&(D===q&&(this._model.cursor={x:q,y:J,width:z.getWidth(),style:this._coreBrowserService.isFocused?B.options.cursorStyle||"block":B.options.cursorInactiveStyle,cursorWidth:B.options.cursorWidth,dpr:this._devicePixelRatio},te=q+z.getWidth()-1),D>=q&&D<=te&&(this._coreBrowserService.isFocused&&(B.options.cursorStyle||"block")==="block"||this._coreBrowserService.isFocused===!1&&B.options.cursorInactiveStyle==="block")&&(this._cellColorResolver.result.fg=50331648|this._themeService.colors.cursorAccent.rgba>>8&16777215,this._cellColorResolver.result.bg=50331648|this._themeService.colors.cursor.rgba>>8&16777215)),j!==a.NULL_CELL_CODE&&(this._model.lineLengths[H]=D+1),(this._model.cells[Y]!==j||this._model.cells[Y+y.RENDER_MODEL_BG_OFFSET]!==this._cellColorResolver.result.bg||this._model.cells[Y+y.RENDER_MODEL_FG_OFFSET]!==this._cellColorResolver.result.fg||this._model.cells[Y+y.RENDER_MODEL_EXT_OFFSET]!==this._cellColorResolver.result.ext)&&(ye=!0,W.length>1&&(j|=y.COMBINED_CHAR_BIT_MASK),this._model.cells[Y]=j,this._model.cells[Y+y.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[Y+y.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[Y+y.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext,K=z.getWidth(),this._glyphRenderer.value.updateCell(D,H,j,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,W,K,F),P))for(z=this._workCell,D++;D<O;D++)N=(H*B.cols+D)*y.RENDER_MODEL_INDICIES_PER_CELL,this._glyphRenderer.value.updateCell(D,H,a.NULL_CELL_CODE,0,0,0,a.NULL_CELL_CHAR,0,0),this._model.cells[N]=a.NULL_CELL_CODE,this._model.cells[N+y.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[N+y.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[N+y.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext;ye&&this._rectangleRenderer.value.updateBackgrounds(this._model),this._rectangleRenderer.value.updateCursor(this._model)}_updateDimensions(){this._charSizeService.width&&this._charSizeService.height&&(this.dimensions.device.char.width=Math.floor(this._charSizeService.width*this._devicePixelRatio),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*this._devicePixelRatio),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._terminal.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._terminal.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/this._devicePixelRatio),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/this._devicePixelRatio),this.dimensions.css.cell.height=this.dimensions.device.cell.height/this._devicePixelRatio,this.dimensions.css.cell.width=this.dimensions.device.cell.width/this._devicePixelRatio)}_setCanvasDevicePixelDimensions(R,T){this._canvas.width===R&&this._canvas.height===T||(this._canvas.width=R,this._canvas.height=T,this._requestRedrawViewport())}_requestRedrawViewport(){this._onRequestRedraw.fire({start:0,end:this._terminal.rows-1})}_requestRedrawCursor(){const R=this._terminal.buffer.active.cursorY;this._onRequestRedraw.fire({start:R,end:R})}}i.WebglRenderer=g;class w extends l.AttributeData{constructor(R,T,B){super(),this.content=0,this.combinedData="",this.fg=R.fg,this.bg=R.bg,this.combinedData=T,this._width=B}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(R){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}function b(M,R,T=0){return Math.max(Math.min(M,R),T)}i.JoinedCellData=w},381:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.GLTexture=i.expandFloat32Array=i.createShader=i.createProgram=i.PROJECTION_MATRIX=void 0;const u=c(374);function v(h,_,E){const C=(0,u.throwIfFalsy)(h.createShader(_));if(h.shaderSource(C,E),h.compileShader(C),h.getShaderParameter(C,h.COMPILE_STATUS))return C;console.error(h.getShaderInfoLog(C)),h.deleteShader(C)}i.PROJECTION_MATRIX=new Float32Array([2,0,0,0,0,-2,0,0,0,0,1,0,-1,1,0,1]),i.createProgram=function(h,_,E){const C=(0,u.throwIfFalsy)(h.createProgram());if(h.attachShader(C,(0,u.throwIfFalsy)(v(h,h.VERTEX_SHADER,_))),h.attachShader(C,(0,u.throwIfFalsy)(v(h,h.FRAGMENT_SHADER,E))),h.linkProgram(C),h.getProgramParameter(C,h.LINK_STATUS))return C;console.error(h.getProgramInfoLog(C)),h.deleteProgram(C)},i.createShader=v,i.expandFloat32Array=function(h,_){const E=Math.min(2*h.length,_),C=new Float32Array(E);for(let f=0;f<h.length;f++)C[f]=h[f];return C},i.GLTexture=class{constructor(h){this.texture=h,this.version=-1}}},592:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BaseRenderLayer=void 0;const u=c(627),v=c(237),h=c(374),_=c(859);class E extends _.Disposable{constructor(f,s,l,o,a,p,S,y){super(),this._container=s,this._alpha=a,this._coreBrowserService=p,this._optionsService=S,this._themeService=y,this._deviceCharWidth=0,this._deviceCharHeight=0,this._deviceCellWidth=0,this._deviceCellHeight=0,this._deviceCharLeft=0,this._deviceCharTop=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add(`xterm-${l}-layer`),this._canvas.style.zIndex=o.toString(),this._initCanvas(),this._container.appendChild(this._canvas),this.register(this._themeService.onChangeColors(L=>{this._refreshCharAtlas(f,L),this.reset(f)})),this.register((0,_.toDisposable)(()=>{this._canvas.remove()}))}_initCanvas(){this._ctx=(0,h.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}handleBlur(f){}handleFocus(f){}handleCursorMove(f){}handleGridChanged(f,s,l){}handleSelectionChanged(f,s,l,o=!1){}_setTransparency(f,s){if(s===this._alpha)return;const l=this._canvas;this._alpha=s,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,l),this._refreshCharAtlas(f,this._themeService.colors),this.handleGridChanged(f,0,f.rows-1)}_refreshCharAtlas(f,s){this._deviceCharWidth<=0&&this._deviceCharHeight<=0||(this._charAtlas=(0,u.acquireTextureAtlas)(f,this._optionsService.rawOptions,s,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr),this._charAtlas.warmUp())}resize(f,s){this._deviceCellWidth=s.device.cell.width,this._deviceCellHeight=s.device.cell.height,this._deviceCharWidth=s.device.char.width,this._deviceCharHeight=s.device.char.height,this._deviceCharLeft=s.device.char.left,this._deviceCharTop=s.device.char.top,this._canvas.width=s.device.canvas.width,this._canvas.height=s.device.canvas.height,this._canvas.style.width=`${s.css.canvas.width}px`,this._canvas.style.height=`${s.css.canvas.height}px`,this._alpha||this._clearAll(),this._refreshCharAtlas(f,this._themeService.colors)}_fillBottomLineAtCells(f,s,l=1){this._ctx.fillRect(f*this._deviceCellWidth,(s+1)*this._deviceCellHeight-this._coreBrowserService.dpr-1,l*this._deviceCellWidth,this._coreBrowserService.dpr)}_clearAll(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}_clearCells(f,s,l,o){this._alpha?this._ctx.clearRect(f*this._deviceCellWidth,s*this._deviceCellHeight,l*this._deviceCellWidth,o*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(f*this._deviceCellWidth,s*this._deviceCellHeight,l*this._deviceCellWidth,o*this._deviceCellHeight))}_fillCharTrueColor(f,s,l,o){this._ctx.font=this._getFont(f,!1,!1),this._ctx.textBaseline=v.TEXT_BASELINE,this._clipCell(l,o,s.getWidth()),this._ctx.fillText(s.getChars(),l*this._deviceCellWidth+this._deviceCharLeft,o*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}_clipCell(f,s,l){this._ctx.beginPath(),this._ctx.rect(f*this._deviceCellWidth,s*this._deviceCellHeight,l*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}_getFont(f,s,l){return`${l?"italic":""} ${s?f.options.fontWeightBold:f.options.fontWeight} ${f.options.fontSize*this._coreBrowserService.dpr}px ${f.options.fontFamily}`}}i.BaseRenderLayer=E},733:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.LinkRenderLayer=void 0;const u=c(197),v=c(237),h=c(592);class _ extends h.BaseRenderLayer{constructor(C,f,s,l,o,a,p){super(s,C,"link",f,!0,o,a,p),this.register(l.onShowLinkUnderline(S=>this._handleShowLinkUnderline(S))),this.register(l.onHideLinkUnderline(S=>this._handleHideLinkUnderline(S)))}resize(C,f){super.resize(C,f),this._state=void 0}reset(C){this._clearCurrentLink()}_clearCurrentLink(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);const C=this._state.y2-this._state.y1-1;C>0&&this._clearCells(0,this._state.y1+1,this._state.cols,C),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}_handleShowLinkUnderline(C){if(C.fg===v.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._themeService.colors.background.css:C.fg!==void 0&&(0,u.is256Color)(C.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[C.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,C.y1===C.y2)this._fillBottomLineAtCells(C.x1,C.y1,C.x2-C.x1);else{this._fillBottomLineAtCells(C.x1,C.y1,C.cols-C.x1);for(let f=C.y1+1;f<C.y2;f++)this._fillBottomLineAtCells(0,f,C.cols);this._fillBottomLineAtCells(0,C.y2,C.x2)}this._state=C}_handleHideLinkUnderline(C){this._clearCurrentLink()}}i.LinkRenderLayer=_},820:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.addDisposableDomListener=void 0,i.addDisposableDomListener=function(c,u,v,h){c.addEventListener(u,v,h);let _=!1;return{dispose:()=>{_||(_=!0,c.removeEventListener(u,v,h))}}}},274:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellColorResolver=void 0;const u=c(855),v=c(160),h=c(374);let _,E=0,C=0,f=!1,s=!1,l=!1,o=0;i.CellColorResolver=class{constructor(a,p,S,y,L,g){this._terminal=a,this._optionService=p,this._selectionRenderModel=S,this._decorationService=y,this._coreBrowserService=L,this._themeService=g,this.result={fg:0,bg:0,ext:0}}resolve(a,p,S,y){if(this.result.bg=a.bg,this.result.fg=a.fg,this.result.ext=268435456&a.bg?a.extended.ext:0,C=0,E=0,s=!1,f=!1,l=!1,_=this._themeService.colors,o=0,a.getCode()!==u.NULL_CELL_CODE&&a.extended.underlineStyle===4){const L=Math.max(1,Math.floor(this._optionService.rawOptions.fontSize*this._coreBrowserService.dpr/15));o=p*y%(2*Math.round(L))}if(this._decorationService.forEachDecorationAtCell(p,S,"bottom",L=>{L.backgroundColorRGB&&(C=L.backgroundColorRGB.rgba>>8&16777215,s=!0),L.foregroundColorRGB&&(E=L.foregroundColorRGB.rgba>>8&16777215,f=!0)}),l=this._selectionRenderModel.isCellSelected(this._terminal,p,S),l){if(67108864&this.result.fg||50331648&this.result.bg){if(67108864&this.result.fg)switch(50331648&this.result.fg){case 16777216:case 33554432:C=this._themeService.colors.ansi[255&this.result.fg].rgba;break;case 50331648:C=(16777215&this.result.fg)<<8|255;break;default:C=this._themeService.colors.foreground.rgba}else switch(50331648&this.result.bg){case 16777216:case 33554432:C=this._themeService.colors.ansi[255&this.result.bg].rgba;break;case 50331648:C=(16777215&this.result.bg)<<8|255}C=v.rgba.blend(C,4294967040&(this._coreBrowserService.isFocused?_.selectionBackgroundOpaque:_.selectionInactiveBackgroundOpaque).rgba|128)>>8&16777215}else C=(this._coreBrowserService.isFocused?_.selectionBackgroundOpaque:_.selectionInactiveBackgroundOpaque).rgba>>8&16777215;if(s=!0,_.selectionForeground&&(E=_.selectionForeground.rgba>>8&16777215,f=!0),(0,h.treatGlyphAsBackgroundColor)(a.getCode())){if(67108864&this.result.fg&&!(50331648&this.result.bg))E=(this._coreBrowserService.isFocused?_.selectionBackgroundOpaque:_.selectionInactiveBackgroundOpaque).rgba>>8&16777215;else{if(67108864&this.result.fg)switch(50331648&this.result.bg){case 16777216:case 33554432:E=this._themeService.colors.ansi[255&this.result.bg].rgba;break;case 50331648:E=(16777215&this.result.bg)<<8|255}else switch(50331648&this.result.fg){case 16777216:case 33554432:E=this._themeService.colors.ansi[255&this.result.fg].rgba;break;case 50331648:E=(16777215&this.result.fg)<<8|255;break;default:E=this._themeService.colors.foreground.rgba}E=v.rgba.blend(E,4294967040&(this._coreBrowserService.isFocused?_.selectionBackgroundOpaque:_.selectionInactiveBackgroundOpaque).rgba|128)>>8&16777215}f=!0}}this._decorationService.forEachDecorationAtCell(p,S,"top",L=>{L.backgroundColorRGB&&(C=L.backgroundColorRGB.rgba>>8&16777215,s=!0),L.foregroundColorRGB&&(E=L.foregroundColorRGB.rgba>>8&16777215,f=!0)}),s&&(C=l?-16777216&a.bg&-134217729|C|50331648:-16777216&a.bg|C|50331648),f&&(E=-16777216&a.fg&-67108865|E|50331648),67108864&this.result.fg&&(s&&!f&&(E=50331648&this.result.bg?-134217728&this.result.fg|67108863&this.result.bg:-134217728&this.result.fg|16777215&_.background.rgba>>8|50331648,f=!0),!s&&f&&(C=50331648&this.result.fg?-67108864&this.result.bg|67108863&this.result.fg:-67108864&this.result.bg|16777215&_.foreground.rgba>>8|50331648,s=!0)),_=void 0,this.result.bg=s?C:this.result.bg,this.result.fg=f?E:this.result.fg,this.result.ext&=536870911,this.result.ext|=o<<29&3758096384}}},627:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.removeTerminalFromCache=i.acquireTextureAtlas=void 0;const u=c(509),v=c(197),h=[];i.acquireTextureAtlas=function(_,E,C,f,s,l,o,a){const p=(0,v.generateConfig)(f,s,l,o,E,C,a);for(let L=0;L<h.length;L++){const g=h[L],w=g.ownedBy.indexOf(_);if(w>=0){if((0,v.configEquals)(g.config,p))return g.atlas;g.ownedBy.length===1?(g.atlas.dispose(),h.splice(L,1)):g.ownedBy.splice(w,1);break}}for(let L=0;L<h.length;L++){const g=h[L];if((0,v.configEquals)(g.config,p))return g.ownedBy.push(_),g.atlas}const S=_._core,y={atlas:new u.TextureAtlas(document,p,S.unicodeService),config:p,ownedBy:[_]};return h.push(y),y.atlas},i.removeTerminalFromCache=function(_){for(let E=0;E<h.length;E++){const C=h[E].ownedBy.indexOf(_);if(C!==-1){h[E].ownedBy.length===1?(h[E].atlas.dispose(),h.splice(E,1)):h[E].ownedBy.splice(C,1);break}}}},197:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.is256Color=i.configEquals=i.generateConfig=void 0;const u=c(160);i.generateConfig=function(v,h,_,E,C,f,s){const l={foreground:f.foreground,background:f.background,cursor:u.NULL_COLOR,cursorAccent:u.NULL_COLOR,selectionForeground:u.NULL_COLOR,selectionBackgroundTransparent:u.NULL_COLOR,selectionBackgroundOpaque:u.NULL_COLOR,selectionInactiveBackgroundTransparent:u.NULL_COLOR,selectionInactiveBackgroundOpaque:u.NULL_COLOR,ansi:f.ansi.slice(),contrastCache:f.contrastCache,halfContrastCache:f.halfContrastCache};return{customGlyphs:C.customGlyphs,devicePixelRatio:s,letterSpacing:C.letterSpacing,lineHeight:C.lineHeight,deviceCellWidth:v,deviceCellHeight:h,deviceCharWidth:_,deviceCharHeight:E,fontFamily:C.fontFamily,fontSize:C.fontSize,fontWeight:C.fontWeight,fontWeightBold:C.fontWeightBold,allowTransparency:C.allowTransparency,drawBoldTextInBrightColors:C.drawBoldTextInBrightColors,minimumContrastRatio:C.minimumContrastRatio,colors:l}},i.configEquals=function(v,h){for(let _=0;_<v.colors.ansi.length;_++)if(v.colors.ansi[_].rgba!==h.colors.ansi[_].rgba)return!1;return v.devicePixelRatio===h.devicePixelRatio&&v.customGlyphs===h.customGlyphs&&v.lineHeight===h.lineHeight&&v.letterSpacing===h.letterSpacing&&v.fontFamily===h.fontFamily&&v.fontSize===h.fontSize&&v.fontWeight===h.fontWeight&&v.fontWeightBold===h.fontWeightBold&&v.allowTransparency===h.allowTransparency&&v.deviceCharWidth===h.deviceCharWidth&&v.deviceCharHeight===h.deviceCharHeight&&v.drawBoldTextInBrightColors===h.drawBoldTextInBrightColors&&v.minimumContrastRatio===h.minimumContrastRatio&&v.colors.foreground.rgba===h.colors.foreground.rgba&&v.colors.background.rgba===h.colors.background.rgba},i.is256Color=function(v){return(50331648&v)==16777216||(50331648&v)==33554432}},237:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;const u=c(399);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=u.isFirefox||u.isLegacyEdge?"bottom":"ideographic"},457:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CursorBlinkStateManager=void 0,i.CursorBlinkStateManager=class{constructor(c,u){this._renderCallback=c,this._coreBrowserService=u,this.isCursorVisible=!0,this._coreBrowserService.isFocused&&this._restartInterval()}get isPaused(){return!(this._blinkStartTimeout||this._blinkInterval)}dispose(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}restartBlinkAnimation(){this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})))}_restartInterval(c=600){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout(()=>{if(this._animationTimeRestarted){const u=600-(Date.now()-this._animationTimeRestarted);if(this._animationTimeRestarted=void 0,u>0)return void this._restartInterval(u)}this.isCursorVisible=!1,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0}),this._blinkInterval=this._coreBrowserService.window.setInterval(()=>{if(this._animationTimeRestarted){const u=600-(Date.now()-this._animationTimeRestarted);return this._animationTimeRestarted=void 0,void this._restartInterval(u)}this.isCursorVisible=!this.isCursorVisible,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})},600)},c)}pause(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}resume(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()}}},860:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tryDrawCustomChar=i.powerlineDefinitions=i.boxDrawingDefinitions=i.blockElementDefinitions=void 0;const u=c(374);i.blockElementDefinitions={"":[{x:0,y:0,w:8,h:4}],"":[{x:0,y:7,w:8,h:1}],"":[{x:0,y:6,w:8,h:2}],"":[{x:0,y:5,w:8,h:3}],"":[{x:0,y:4,w:8,h:4}],"":[{x:0,y:3,w:8,h:5}],"":[{x:0,y:2,w:8,h:6}],"":[{x:0,y:1,w:8,h:7}],"":[{x:0,y:0,w:8,h:8}],"":[{x:0,y:0,w:7,h:8}],"":[{x:0,y:0,w:6,h:8}],"":[{x:0,y:0,w:5,h:8}],"":[{x:0,y:0,w:4,h:8}],"":[{x:0,y:0,w:3,h:8}],"":[{x:0,y:0,w:2,h:8}],"":[{x:0,y:0,w:1,h:8}],"":[{x:4,y:0,w:4,h:8}],"":[{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8}],"":[{x:0,y:4,w:4,h:4}],"":[{x:4,y:4,w:4,h:4}],"":[{x:0,y:0,w:4,h:4}],"":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"":[{x:4,y:0,w:4,h:4}],"":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"":[{x:1,y:0,w:1,h:8}],"":[{x:2,y:0,w:1,h:8}],"":[{x:3,y:0,w:1,h:8}],"":[{x:4,y:0,w:1,h:8}],"":[{x:5,y:0,w:1,h:8}],"":[{x:6,y:0,w:1,h:8}],"":[{x:0,y:1,w:8,h:1}],"":[{x:0,y:2,w:8,h:1}],"":[{x:0,y:3,w:8,h:1}],"":[{x:0,y:4,w:8,h:1}],"":[{x:0,y:5,w:8,h:1}],"":[{x:0,y:6,w:8,h:1}],"":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:2}],"":[{x:0,y:0,w:8,h:3}],"":[{x:0,y:0,w:8,h:5}],"":[{x:0,y:0,w:8,h:6}],"":[{x:0,y:0,w:8,h:7}],"":[{x:6,y:0,w:2,h:8}],"":[{x:5,y:0,w:3,h:8}],"":[{x:3,y:0,w:5,h:8}],"":[{x:2,y:0,w:6,h:8}],"":[{x:1,y:0,w:7,h:8}],"":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};const v={"":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"":[[1,0],[0,0],[0,1],[0,0]],"":[[0,1],[1,1],[1,0],[1,1]]};i.boxDrawingDefinitions={"":{1:"M0,.5 L1,.5"},"":{3:"M0,.5 L1,.5"},"":{1:"M.5,0 L.5,1"},"":{3:"M.5,0 L.5,1"},"":{1:"M0.5,1 L.5,.5 L1,.5"},"":{3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M0,.5 L.5,.5 L.5,1"},"":{3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M.5,0 L.5,.5 L1,.5"},"":{3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,.5 L0,.5"},"":{3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"":{1:"M.5,.5 L0,.5"},"":{3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L.5,0"},"":{3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L1,.5"},"":{3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,1"},"":{3:"M.5,.5 L.5,1"},"":{1:(f,s)=>`M0,${.5-s} L1,${.5-s} M0,${.5+s} L1,${.5+s}`},"":{1:(f,s)=>`M${.5-f},0 L${.5-f},1 M${.5+f},0 L${.5+f},1`},"":{1:(f,s)=>`M.5,1 L.5,${.5-s} L1,${.5-s} M.5,${.5+s} L1,${.5+s}`},"":{1:(f,s)=>`M${.5-f},1 L${.5-f},.5 L1,.5 M${.5+f},.5 L${.5+f},1`},"":{1:(f,s)=>`M1,${.5-s} L${.5-f},${.5-s} L${.5-f},1 M1,${.5+s} L${.5+f},${.5+s} L${.5+f},1`},"":{1:(f,s)=>`M0,${.5-s} L.5,${.5-s} L.5,1 M0,${.5+s} L.5,${.5+s}`},"":{1:(f,s)=>`M${.5+f},1 L${.5+f},.5 L0,.5 M${.5-f},.5 L${.5-f},1`},"":{1:(f,s)=>`M0,${.5+s} L${.5-f},${.5+s} L${.5-f},1 M0,${.5-s} L${.5+f},${.5-s} L${.5+f},1`},"":{1:(f,s)=>`M.5,0 L.5,${.5+s} L1,${.5+s} M.5,${.5-s} L1,${.5-s}`},"":{1:(f,s)=>`M1,.5 L${.5-f},.5 L${.5-f},0 M${.5+f},.5 L${.5+f},0`},"":{1:(f,s)=>`M1,${.5-s} L${.5+f},${.5-s} L${.5+f},0 M1,${.5+s} L${.5-f},${.5+s} L${.5-f},0`},"":{1:(f,s)=>`M0,${.5+s} L.5,${.5+s} L.5,0 M0,${.5-s} L.5,${.5-s}`},"":{1:(f,s)=>`M0,.5 L${.5+f},.5 L${.5+f},0 M${.5-f},.5 L${.5-f},0`},"":{1:(f,s)=>`M0,${.5-s} L${.5-f},${.5-s} L${.5-f},0 M0,${.5+s} L${.5+f},${.5+s} L${.5+f},0`},"":{1:(f,s)=>`M.5,0 L.5,1 M.5,${.5-s} L1,${.5-s} M.5,${.5+s} L1,${.5+s}`},"":{1:(f,s)=>`M${.5-f},0 L${.5-f},1 M${.5+f},0 L${.5+f},1 M${.5+f},.5 L1,.5`},"":{1:(f,s)=>`M${.5-f},0 L${.5-f},1 M1,${.5+s} L${.5+f},${.5+s} L${.5+f},1 M1,${.5-s} L${.5+f},${.5-s} L${.5+f},0`},"":{1:(f,s)=>`M.5,0 L.5,1 M0,${.5-s} L.5,${.5-s} M0,${.5+s} L.5,${.5+s}`},"":{1:(f,s)=>`M0,.5 L${.5-f},.5 M${.5-f},0 L${.5-f},1 M${.5+f},0 L${.5+f},1`},"":{1:(f,s)=>`M${.5+f},0 L${.5+f},1 M0,${.5+s} L${.5-f},${.5+s} L${.5-f},1 M0,${.5-s} L${.5-f},${.5-s} L${.5-f},0`},"":{1:(f,s)=>`M0,${.5-s} L1,${.5-s} M0,${.5+s} L1,${.5+s} M.5,${.5+s} L.5,1`},"":{1:(f,s)=>`M0,.5 L1,.5 M${.5-f},.5 L${.5-f},1 M${.5+f},.5 L${.5+f},1`},"":{1:(f,s)=>`M0,${.5-s} L1,${.5-s} M0,${.5+s} L${.5-f},${.5+s} L${.5-f},1 M1,${.5+s} L${.5+f},${.5+s} L${.5+f},1`},"":{1:(f,s)=>`M.5,0 L.5,${.5-s} M0,${.5-s} L1,${.5-s} M0,${.5+s} L1,${.5+s}`},"":{1:(f,s)=>`M0,.5 L1,.5 M${.5-f},.5 L${.5-f},0 M${.5+f},.5 L${.5+f},0`},"":{1:(f,s)=>`M0,${.5+s} L1,${.5+s} M0,${.5-s} L${.5-f},${.5-s} L${.5-f},0 M1,${.5-s} L${.5+f},${.5-s} L${.5+f},0`},"":{1:(f,s)=>`M.5,0 L.5,1 M0,${.5-s} L1,${.5-s} M0,${.5+s} L1,${.5+s}`},"":{1:(f,s)=>`M0,.5 L1,.5 M${.5-f},0 L${.5-f},1 M${.5+f},0 L${.5+f},1`},"":{1:(f,s)=>`M0,${.5+s} L${.5-f},${.5+s} L${.5-f},1 M1,${.5+s} L${.5+f},${.5+s} L${.5+f},1 M0,${.5-s} L${.5-f},${.5-s} L${.5-f},0 M1,${.5-s} L${.5+f},${.5-s} L${.5+f},0`},"":{1:"M1,0 L0,1"},"":{1:"M0,0 L1,1"},"":{1:"M1,0 L0,1 M0,0 L1,1"},"":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"":{1:(f,s)=>`M.5,1 L.5,${.5+s/.15*.5} C.5,${.5+s/.15*.5},.5,.5,1,.5`},"":{1:(f,s)=>`M.5,1 L.5,${.5+s/.15*.5} C.5,${.5+s/.15*.5},.5,.5,0,.5`},"":{1:(f,s)=>`M.5,0 L.5,${.5-s/.15*.5} C.5,${.5-s/.15*.5},.5,.5,0,.5`},"":{1:(f,s)=>`M.5,0 L.5,${.5-s/.15*.5} C.5,${.5-s/.15*.5},.5,.5,1,.5`}},i.powerlineDefinitions={"":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"":{d:"M.2,1 C.422,1,.8,.826,.78,.5 C.8,.174,0.422,0,.2,0",type:1,rightPadding:1},"":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"":{d:"M.8,1 C0.578,1,0.2,.826,.22,.5 C0.2,0.174,0.578,0,0.8,0",type:1,leftPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}},i.powerlineDefinitions[""]=i.powerlineDefinitions[""],i.powerlineDefinitions[""]=i.powerlineDefinitions[""],i.tryDrawCustomChar=function(f,s,l,o,a,p,S,y){const L=i.blockElementDefinitions[s];if(L)return function(M,R,T,B,F,H){for(let I=0;I<R.length;I++){const k=R[I],A=F/8,P=H/8;M.fillRect(T+k.x*A,B+k.y*P,k.w*A,k.h*P)}}(f,L,l,o,a,p),!0;const g=v[s];if(g)return function(M,R,T,B,F,H){let I=h.get(R);I||(I=new Map,h.set(R,I));const k=M.fillStyle;if(typeof k!="string")throw new Error(`Unexpected fillStyle type "${k}"`);let A=I.get(k);if(!A){const P=R[0].length,O=R.length,$=M.canvas.ownerDocument.createElement("canvas");$.width=P,$.height=O;const W=(0,u.throwIfFalsy)($.getContext("2d")),j=new ImageData(P,O);let K,Y,D,N;if(k.startsWith("#"))K=parseInt(k.slice(1,3),16),Y=parseInt(k.slice(3,5),16),D=parseInt(k.slice(5,7),16),N=k.length>7&&parseInt(k.slice(7,9),16)||1;else{if(!k.startsWith("rgba"))throw new Error(`Unexpected fillStyle color format "${k}" when drawing pattern glyph`);[K,Y,D,N]=k.substring(5,k.length-1).split(",").map(z=>parseFloat(z))}for(let z=0;z<O;z++)for(let U=0;U<P;U++)j.data[4*(z*P+U)]=K,j.data[4*(z*P+U)+1]=Y,j.data[4*(z*P+U)+2]=D,j.data[4*(z*P+U)+3]=R[z][U]*(255*N);W.putImageData(j,0,0),A=(0,u.throwIfFalsy)(M.createPattern($,null)),I.set(k,A)}M.fillStyle=A,M.fillRect(T,B,F,H)}(f,g,l,o,a,p),!0;const w=i.boxDrawingDefinitions[s];if(w)return function(M,R,T,B,F,H,I){M.strokeStyle=M.fillStyle;for(const[k,A]of Object.entries(R)){let P;M.beginPath(),M.lineWidth=I*Number.parseInt(k),P=typeof A=="function"?A(.15,.15/H*F):A;for(const O of P.split(" ")){const $=O[0],W=E[$];if(!W){console.error(`Could not find drawing instructions for "${$}"`);continue}const j=O.substring(1).split(",");j[0]&&j[1]&&W(M,C(j,F,H,T,B,!0,I))}M.stroke(),M.closePath()}}(f,w,l,o,a,p,y),!0;const b=i.powerlineDefinitions[s];return!!b&&(function(M,R,T,B,F,H,I,k){const A=new Path2D;A.rect(T,B,F,H),M.clip(A),M.beginPath();const P=I/12;M.lineWidth=k*P;for(const O of R.d.split(" ")){const $=O[0],W=E[$];if(!W){console.error(`Could not find drawing instructions for "${$}"`);continue}const j=O.substring(1).split(",");j[0]&&j[1]&&W(M,C(j,F,H,T,B,!1,k,(R.leftPadding??0)*(P/2),(R.rightPadding??0)*(P/2)))}R.type===1?(M.strokeStyle=M.fillStyle,M.stroke()):M.fill(),M.closePath()}(f,b,l,o,a,p,S,y),!0)};const h=new Map;function _(f,s,l=0){return Math.max(Math.min(f,s),l)}const E={C:(f,s)=>f.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5]),L:(f,s)=>f.lineTo(s[0],s[1]),M:(f,s)=>f.moveTo(s[0],s[1])};function C(f,s,l,o,a,p,S,y=0,L=0){const g=f.map(w=>parseFloat(w)||parseInt(w));if(g.length<2)throw new Error("Too few arguments for instruction");for(let w=0;w<g.length;w+=2)g[w]*=s-y*S-L*S,p&&g[w]!==0&&(g[w]=_(Math.round(g[w]+.5)-.5,s,0)),g[w]+=o+y*S;for(let w=1;w<g.length;w+=2)g[w]*=l,p&&g[w]!==0&&(g[w]=_(Math.round(g[w]+.5)-.5,l,0)),g[w]+=a;return g}},56:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.observeDevicePixelDimensions=void 0;const u=c(859);i.observeDevicePixelDimensions=function(v,h,_){let E=new h.ResizeObserver(C=>{const f=C.find(o=>o.target===v);if(!f)return;if(!("devicePixelContentBoxSize"in f))return E==null||E.disconnect(),void(E=void 0);const s=f.devicePixelContentBoxSize[0].inlineSize,l=f.devicePixelContentBoxSize[0].blockSize;s>0&&l>0&&_(s,l)});try{E.observe(v,{box:["device-pixel-content-box"]})}catch{E.disconnect(),E=void 0}return(0,u.toDisposable)(()=>E==null?void 0:E.disconnect())}},374:(x,i)=>{function c(v){return 57508<=v&&v<=57558}function u(v){return v>=128512&&v<=128591||v>=127744&&v<=128511||v>=128640&&v<=128767||v>=9728&&v<=9983||v>=9984&&v<=10175||v>=65024&&v<=65039||v>=129280&&v<=129535||v>=127462&&v<=127487}Object.defineProperty(i,"__esModule",{value:!0}),i.computeNextVariantOffset=i.createRenderDimensions=i.treatGlyphAsBackgroundColor=i.allowRescaling=i.isEmoji=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(v){if(!v)throw new Error("value must not be falsy");return v},i.isPowerlineGlyph=c,i.isRestrictedPowerlineGlyph=function(v){return 57520<=v&&v<=57527},i.isEmoji=u,i.allowRescaling=function(v,h,_,E){return h===1&&_>Math.ceil(1.5*E)&&v!==void 0&&v>255&&!u(v)&&!c(v)&&!function(C){return 57344<=C&&C<=63743}(v)},i.treatGlyphAsBackgroundColor=function(v){return c(v)||function(h){return 9472<=h&&h<=9631}(v)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},i.computeNextVariantOffset=function(v,h,_=0){return(v-(2*Math.round(h)-_))%(2*Math.round(h))}},296:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createSelectionRenderModel=void 0;class c{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(v,h,_,E=!1){if(this.selectionStart=h,this.selectionEnd=_,!h||!_||h[0]===_[0]&&h[1]===_[1])return void this.clear();const C=v.buffers.active.ydisp,f=h[1]-C,s=_[1]-C,l=Math.max(f,0),o=Math.min(s,v.rows-1);l>=v.rows||o<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=E,this.viewportStartRow=f,this.viewportEndRow=s,this.viewportCappedStartRow=l,this.viewportCappedEndRow=o,this.startCol=h[0],this.endCol=_[0])}isCellSelected(v,h,_){return!!this.hasSelection&&(_-=v.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?h>=this.startCol&&_>=this.viewportCappedStartRow&&h<this.endCol&&_<=this.viewportCappedEndRow:h<this.startCol&&_>=this.viewportCappedStartRow&&h>=this.endCol&&_<=this.viewportCappedEndRow:_>this.viewportStartRow&&_<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&_===this.viewportStartRow&&h>=this.startCol&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&_===this.viewportEndRow&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&_===this.viewportStartRow&&h>=this.startCol)}}i.createSelectionRenderModel=function(){return new c}},509:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TextureAtlas=void 0;const u=c(237),v=c(860),h=c(374),_=c(160),E=c(345),C=c(485),f=c(385),s=c(147),l=c(855),o={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}};let a;class p{get pages(){return this._pages}constructor(w,b,M){this._document=w,this._config=b,this._unicodeService=M,this._didWarmUp=!1,this._cacheMap=new C.FourKeyMap,this._cacheMapCombined=new C.FourKeyMap,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new s.AttributeData,this._textureSize=512,this._onAddTextureAtlasCanvas=new E.EventEmitter,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new E.EventEmitter,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=L(w,4*this._config.deviceCellWidth+4,this._config.deviceCellHeight+4),this._tmpCtx=(0,h.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}dispose(){for(const w of this.pages)w.canvas.remove();this._onAddTextureAtlasCanvas.dispose()}warmUp(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}_doWarmUp(){const w=new f.IdleTaskQueue;for(let b=33;b<126;b++)w.enqueue(()=>{if(!this._cacheMap.get(b,l.DEFAULT_COLOR,l.DEFAULT_COLOR,l.DEFAULT_EXT)){const M=this._drawToCache(b,l.DEFAULT_COLOR,l.DEFAULT_COLOR,l.DEFAULT_EXT);this._cacheMap.set(b,l.DEFAULT_COLOR,l.DEFAULT_COLOR,l.DEFAULT_EXT,M)}})}beginFrame(){return this._requestClearModel}clearTexture(){if(this._pages[0].currentRow.x!==0||this._pages[0].currentRow.y!==0){for(const w of this._pages)w.clear();this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}_createNewPage(){if(p.maxAtlasPages&&this._pages.length>=Math.max(4,p.maxAtlasPages)){const b=this._pages.filter(I=>2*I.canvas.width<=(p.maxTextureSize||4096)).sort((I,k)=>k.canvas.width!==I.canvas.width?k.canvas.width-I.canvas.width:k.percentageUsed-I.percentageUsed);let M=-1,R=0;for(let I=0;I<b.length;I++)if(b[I].canvas.width!==R)M=I,R=b[I].canvas.width;else if(I-M==3)break;const T=b.slice(M,M+4),B=T.map(I=>I.glyphs[0].texturePage).sort((I,k)=>I>k?1:-1),F=this.pages.length-T.length,H=this._mergePages(T,F);H.version++;for(let I=B.length-1;I>=0;I--)this._deletePage(B[I]);this.pages.push(H),this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire(H.canvas)}const w=new S(this._document,this._textureSize);return this._pages.push(w),this._activePages.push(w),this._onAddTextureAtlasCanvas.fire(w.canvas),w}_mergePages(w,b){const M=2*w[0].canvas.width,R=new S(this._document,M,w);for(const[T,B]of w.entries()){const F=T*B.canvas.width%M,H=Math.floor(T/2)*B.canvas.height;R.ctx.drawImage(B.canvas,F,H);for(const k of B.glyphs)k.texturePage=b,k.sizeClipSpace.x=k.size.x/M,k.sizeClipSpace.y=k.size.y/M,k.texturePosition.x+=F,k.texturePosition.y+=H,k.texturePositionClipSpace.x=k.texturePosition.x/M,k.texturePositionClipSpace.y=k.texturePosition.y/M;this._onRemoveTextureAtlasCanvas.fire(B.canvas);const I=this._activePages.indexOf(B);I!==-1&&this._activePages.splice(I,1)}return R}_deletePage(w){this._pages.splice(w,1);for(let b=w;b<this._pages.length;b++){const M=this._pages[b];for(const R of M.glyphs)R.texturePage--;M.version++}}getRasterizedGlyphCombinedChar(w,b,M,R,T){return this._getFromCacheMap(this._cacheMapCombined,w,b,M,R,T)}getRasterizedGlyph(w,b,M,R,T){return this._getFromCacheMap(this._cacheMap,w,b,M,R,T)}_getFromCacheMap(w,b,M,R,T,B=!1){return a=w.get(b,M,R,T),a||(a=this._drawToCache(b,M,R,T,B),w.set(b,M,R,T,a)),a}_getColorFromAnsiIndex(w){if(w>=this._config.colors.ansi.length)throw new Error("No color found for idx "+w);return this._config.colors.ansi[w]}_getBackgroundColor(w,b,M,R){if(this._config.allowTransparency)return _.NULL_COLOR;let T;switch(w){case 16777216:case 33554432:T=this._getColorFromAnsiIndex(b);break;case 50331648:const B=s.AttributeData.toColorRGB(b);T=_.channels.toColor(B[0],B[1],B[2]);break;default:T=M?_.color.opaque(this._config.colors.foreground):this._config.colors.background}return T}_getForegroundColor(w,b,M,R,T,B,F,H,I,k){const A=this._getMinimumContrastColor(w,b,M,R,T,B,F,I,H,k);if(A)return A;let P;switch(T){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&I&&B<8&&(B+=8),P=this._getColorFromAnsiIndex(B);break;case 50331648:const O=s.AttributeData.toColorRGB(B);P=_.channels.toColor(O[0],O[1],O[2]);break;default:P=F?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(P=_.color.opaque(P)),H&&(P=_.color.multiplyOpacity(P,u.DIM_OPACITY)),P}_resolveBackgroundRgba(w,b,M){switch(w){case 16777216:case 33554432:return this._getColorFromAnsiIndex(b).rgba;case 50331648:return b<<8;default:return M?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}_resolveForegroundRgba(w,b,M,R){switch(w){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&R&&b<8&&(b+=8),this._getColorFromAnsiIndex(b).rgba;case 50331648:return b<<8;default:return M?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}_getMinimumContrastColor(w,b,M,R,T,B,F,H,I,k){if(this._config.minimumContrastRatio===1||k)return;const A=this._getContrastCache(I),P=A.getColor(w,R);if(P!==void 0)return P||void 0;const O=this._resolveBackgroundRgba(b,M,F),$=this._resolveForegroundRgba(T,B,F,H),W=_.rgba.ensureContrastRatio(O,$,this._config.minimumContrastRatio/(I?2:1));if(!W)return void A.setColor(w,R,null);const j=_.channels.toColor(W>>24&255,W>>16&255,W>>8&255);return A.setColor(w,R,j),j}_getContrastCache(w){return w?this._config.colors.halfContrastCache:this._config.colors.contrastCache}_drawToCache(w,b,M,R,T=!1){const B=typeof w=="number"?String.fromCharCode(w):w,F=Math.min(this._config.deviceCellWidth*Math.max(B.length,2)+4,this._textureSize);this._tmpCanvas.width<F&&(this._tmpCanvas.width=F);const H=Math.min(this._config.deviceCellHeight+8,this._textureSize);if(this._tmpCanvas.height<H&&(this._tmpCanvas.height=H),this._tmpCtx.save(),this._workAttributeData.fg=M,this._workAttributeData.bg=b,this._workAttributeData.extended.ext=R,this._workAttributeData.isInvisible())return o;const I=!!this._workAttributeData.isBold(),k=!!this._workAttributeData.isInverse(),A=!!this._workAttributeData.isDim(),P=!!this._workAttributeData.isItalic(),O=!!this._workAttributeData.isUnderline(),$=!!this._workAttributeData.isStrikethrough(),W=!!this._workAttributeData.isOverline();let j=this._workAttributeData.getFgColor(),K=this._workAttributeData.getFgColorMode(),Y=this._workAttributeData.getBgColor(),D=this._workAttributeData.getBgColorMode();if(k){const X=j;j=Y,Y=X;const le=K;K=D,D=le}const N=this._getBackgroundColor(D,Y,k,A);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=N.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";const z=I?this._config.fontWeightBold:this._config.fontWeight,U=P?"italic":"";this._tmpCtx.font=`${U} ${z} ${this._config.fontSize*this._config.devicePixelRatio}px ${this._config.fontFamily}`,this._tmpCtx.textBaseline=u.TEXT_BASELINE;const J=B.length===1&&(0,h.isPowerlineGlyph)(B.charCodeAt(0)),q=B.length===1&&(0,h.isRestrictedPowerlineGlyph)(B.charCodeAt(0)),te=this._getForegroundColor(b,D,Y,M,K,j,k,A,I,(0,h.treatGlyphAsBackgroundColor)(B.charCodeAt(0)));this._tmpCtx.fillStyle=te.css;const Z=q?0:4;let ye=!1;this._config.customGlyphs!==!1&&(ye=(0,v.tryDrawCustomChar)(this._tmpCtx,B,Z,Z,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));let rt,ee=!J;if(rt=typeof w=="number"?this._unicodeService.wcwidth(w):this._unicodeService.getStringCellWidth(w),O){this._tmpCtx.save();const X=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),le=X%2==1?.5:0;if(this._tmpCtx.lineWidth=X,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())ee=!1,this._tmpCtx.strokeStyle=`rgb(${s.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;else{ee=!1;let xe=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&xe<8&&(xe+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(xe).css}this._tmpCtx.beginPath();const Ce=Z,fe=Math.ceil(Z+this._config.deviceCharHeight)-le-(T?2*X:0),Et=fe+X,Ue=fe+2*X;let ct=this._workAttributeData.getUnderlineVariantOffset();for(let xe=0;xe<rt;xe++){this._tmpCtx.save();const ue=Ce+xe*this._config.deviceCellWidth,re=Ce+(xe+1)*this._config.deviceCellWidth,jr=ue+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(ue,fe),this._tmpCtx.lineTo(re,fe),this._tmpCtx.moveTo(ue,Ue),this._tmpCtx.lineTo(re,Ue);break;case 3:const Bi=X<=1?Ue:Math.ceil(Z+this._config.deviceCharHeight-X/2)-le,Oi=X<=1?fe:Math.ceil(Z+this._config.deviceCharHeight+X/2)-le,_l=new Path2D;_l.rect(ue,fe,this._config.deviceCellWidth,Ue-fe),this._tmpCtx.clip(_l),this._tmpCtx.moveTo(ue-this._config.deviceCellWidth/2,Et),this._tmpCtx.bezierCurveTo(ue-this._config.deviceCellWidth/2,Oi,ue,Oi,ue,Et),this._tmpCtx.bezierCurveTo(ue,Bi,jr,Bi,jr,Et),this._tmpCtx.bezierCurveTo(jr,Oi,re,Oi,re,Et),this._tmpCtx.bezierCurveTo(re,Bi,re+this._config.deviceCellWidth/2,Bi,re+this._config.deviceCellWidth/2,Et);break;case 4:const Ii=ct===0?0:ct>=X?2*X-ct:X-ct;ct>=X||Ii===0?(this._tmpCtx.setLineDash([Math.round(X),Math.round(X)]),this._tmpCtx.moveTo(ue+Ii,fe),this._tmpCtx.lineTo(re,fe)):(this._tmpCtx.setLineDash([Math.round(X),Math.round(X)]),this._tmpCtx.moveTo(ue,fe),this._tmpCtx.lineTo(ue+Ii,fe),this._tmpCtx.moveTo(ue+Ii+X,fe),this._tmpCtx.lineTo(re,fe)),ct=(0,h.computeNextVariantOffset)(re-ue,X,ct);break;case 5:const Uh=.6,Wh=.3,Js=re-ue,pl=Math.floor(Uh*Js),vl=Math.floor(Wh*Js),jh=Js-pl-vl;this._tmpCtx.setLineDash([pl,vl,jh]),this._tmpCtx.moveTo(ue,fe),this._tmpCtx.lineTo(re,fe);break;default:this._tmpCtx.moveTo(ue,fe),this._tmpCtx.lineTo(re,fe)}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!ye&&this._config.fontSize>=12&&!this._config.allowTransparency&&B!==" "){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";const xe=this._tmpCtx.measureText(B);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in xe&&xe.actualBoundingBoxDescent>0){this._tmpCtx.save();const ue=new Path2D;ue.rect(Ce,fe-Math.ceil(X/2),this._config.deviceCellWidth*rt,Ue-fe+Math.ceil(X/2)),this._tmpCtx.clip(ue),this._tmpCtx.lineWidth=3*this._config.devicePixelRatio,this._tmpCtx.strokeStyle=N.css,this._tmpCtx.strokeText(B,Z,Z+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(W){const X=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),le=X%2==1?.5:0;this._tmpCtx.lineWidth=X,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(Z,Z+le),this._tmpCtx.lineTo(Z+this._config.deviceCharWidth*rt,Z+le),this._tmpCtx.stroke()}if(ye||this._tmpCtx.fillText(B,Z,Z+this._config.deviceCharHeight),B==="_"&&!this._config.allowTransparency){let X=y(this._tmpCtx.getImageData(Z,Z,this._config.deviceCellWidth,this._config.deviceCellHeight),N,te,ee);if(X)for(let le=1;le<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=N.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(B,Z,Z+this._config.deviceCharHeight-le),X=y(this._tmpCtx.getImageData(Z,Z,this._config.deviceCellWidth,this._config.deviceCellHeight),N,te,ee),X);le++);}if($){const X=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),le=this._tmpCtx.lineWidth%2==1?.5:0;this._tmpCtx.lineWidth=X,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(Z,Z+Math.floor(this._config.deviceCharHeight/2)-le),this._tmpCtx.lineTo(Z+this._config.deviceCharWidth*rt,Z+Math.floor(this._config.deviceCharHeight/2)-le),this._tmpCtx.stroke()}this._tmpCtx.restore();const gt=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height);let _r;if(_r=this._config.allowTransparency?function(X){for(let le=0;le<X.data.length;le+=4)if(X.data[le+3]>0)return!1;return!0}(gt):y(gt,N,te,ee),_r)return o;const ce=this._findGlyphBoundingBox(gt,this._workBoundingBox,F,q,ye,Z);let se,ne;for(;;){if(this._activePages.length===0){const X=this._createNewPage();se=X,ne=X.currentRow,ne.height=ce.size.y;break}se=this._activePages[this._activePages.length-1],ne=se.currentRow;for(const X of this._activePages)ce.size.y<=X.currentRow.height&&(se=X,ne=X.currentRow);for(let X=this._activePages.length-1;X>=0;X--)for(const le of this._activePages[X].fixedRows)le.height<=ne.height&&ce.size.y<=le.height&&(se=this._activePages[X],ne=le);if(ne.y+ce.size.y>=se.canvas.height||ne.height>ce.size.y+2){let X=!1;if(se.currentRow.y+se.currentRow.height+ce.size.y>=se.canvas.height){let le;for(const Ce of this._activePages)if(Ce.currentRow.y+Ce.currentRow.height+ce.size.y<Ce.canvas.height){le=Ce;break}if(le)se=le;else if(p.maxAtlasPages&&this._pages.length>=p.maxAtlasPages&&ne.y+ce.size.y<=se.canvas.height&&ne.height>=ce.size.y&&ne.x+ce.size.x<=se.canvas.width)X=!0;else{const Ce=this._createNewPage();se=Ce,ne=Ce.currentRow,ne.height=ce.size.y,X=!0}}X||(se.currentRow.height>0&&se.fixedRows.push(se.currentRow),ne={x:0,y:se.currentRow.y+se.currentRow.height,height:ce.size.y},se.fixedRows.push(ne),se.currentRow={x:0,y:ne.y+ne.height,height:0})}if(ne.x+ce.size.x<=se.canvas.width)break;ne===se.currentRow?(ne.x=0,ne.y+=ne.height,ne.height=0):se.fixedRows.splice(se.fixedRows.indexOf(ne),1)}return ce.texturePage=this._pages.indexOf(se),ce.texturePosition.x=ne.x,ce.texturePosition.y=ne.y,ce.texturePositionClipSpace.x=ne.x/se.canvas.width,ce.texturePositionClipSpace.y=ne.y/se.canvas.height,ce.sizeClipSpace.x/=se.canvas.width,ce.sizeClipSpace.y/=se.canvas.height,ne.height=Math.max(ne.height,ce.size.y),ne.x+=ce.size.x,se.ctx.putImageData(gt,ce.texturePosition.x-this._workBoundingBox.left,ce.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,ce.size.x,ce.size.y),se.addGlyph(ce),se.version++,ce}_findGlyphBoundingBox(w,b,M,R,T,B){b.top=0;const F=R?this._config.deviceCellHeight:this._tmpCanvas.height,H=R?this._config.deviceCellWidth:M;let I=!1;for(let k=0;k<F;k++){for(let A=0;A<H;A++){const P=k*this._tmpCanvas.width*4+4*A+3;if(w.data[P]!==0){b.top=k,I=!0;break}}if(I)break}b.left=0,I=!1;for(let k=0;k<B+H;k++){for(let A=0;A<F;A++){const P=A*this._tmpCanvas.width*4+4*k+3;if(w.data[P]!==0){b.left=k,I=!0;break}}if(I)break}b.right=H,I=!1;for(let k=B+H-1;k>=B;k--){for(let A=0;A<F;A++){const P=A*this._tmpCanvas.width*4+4*k+3;if(w.data[P]!==0){b.right=k,I=!0;break}}if(I)break}b.bottom=F,I=!1;for(let k=F-1;k>=0;k--){for(let A=0;A<H;A++){const P=k*this._tmpCanvas.width*4+4*A+3;if(w.data[P]!==0){b.bottom=k,I=!0;break}}if(I)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:b.right-b.left+1,y:b.bottom-b.top+1},sizeClipSpace:{x:b.right-b.left+1,y:b.bottom-b.top+1},offset:{x:-b.left+B+(R||T?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-b.top+B+(R||T?this._config.lineHeight===1?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}}i.TextureAtlas=p;class S{get percentageUsed(){return this._usedPixels/(this.canvas.width*this.canvas.height)}get glyphs(){return this._glyphs}addGlyph(w){this._glyphs.push(w),this._usedPixels+=w.size.x*w.size.y}constructor(w,b,M){if(this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],M)for(const R of M)this._glyphs.push(...R.glyphs),this._usedPixels+=R._usedPixels;this.canvas=L(w,b,b),this.ctx=(0,h.throwIfFalsy)(this.canvas.getContext("2d",{alpha:!0}))}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}}function y(g,w,b,M){const R=w.rgba>>>24,T=w.rgba>>>16&255,B=w.rgba>>>8&255,F=b.rgba>>>24,H=b.rgba>>>16&255,I=b.rgba>>>8&255,k=Math.floor((Math.abs(R-F)+Math.abs(T-H)+Math.abs(B-I))/12);let A=!0;for(let P=0;P<g.data.length;P+=4)g.data[P]===R&&g.data[P+1]===T&&g.data[P+2]===B||M&&Math.abs(g.data[P]-R)+Math.abs(g.data[P+1]-T)+Math.abs(g.data[P+2]-B)<k?g.data[P+3]=0:A=!1;return A}function L(g,w,b){const M=g.createElement("canvas");return M.width=w,M.height=b,M}},160:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;let c=0,u=0,v=0,h=0;var _,E,C,f,s;function l(a){const p=a.toString(16);return p.length<2?"0"+p:p}function o(a,p){return a<p?(p+.05)/(a+.05):(a+.05)/(p+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},function(a){a.toCss=function(p,S,y,L){return L!==void 0?`#${l(p)}${l(S)}${l(y)}${l(L)}`:`#${l(p)}${l(S)}${l(y)}`},a.toRgba=function(p,S,y,L=255){return(p<<24|S<<16|y<<8|L)>>>0},a.toColor=function(p,S,y,L){return{css:a.toCss(p,S,y,L),rgba:a.toRgba(p,S,y,L)}}}(_||(i.channels=_={})),function(a){function p(S,y){return h=Math.round(255*y),[c,u,v]=s.toChannels(S.rgba),{css:_.toCss(c,u,v,h),rgba:_.toRgba(c,u,v,h)}}a.blend=function(S,y){if(h=(255&y.rgba)/255,h===1)return{css:y.css,rgba:y.rgba};const L=y.rgba>>24&255,g=y.rgba>>16&255,w=y.rgba>>8&255,b=S.rgba>>24&255,M=S.rgba>>16&255,R=S.rgba>>8&255;return c=b+Math.round((L-b)*h),u=M+Math.round((g-M)*h),v=R+Math.round((w-R)*h),{css:_.toCss(c,u,v),rgba:_.toRgba(c,u,v)}},a.isOpaque=function(S){return(255&S.rgba)==255},a.ensureContrastRatio=function(S,y,L){const g=s.ensureContrastRatio(S.rgba,y.rgba,L);if(g)return _.toColor(g>>24&255,g>>16&255,g>>8&255)},a.opaque=function(S){const y=(255|S.rgba)>>>0;return[c,u,v]=s.toChannels(y),{css:_.toCss(c,u,v),rgba:y}},a.opacity=p,a.multiplyOpacity=function(S,y){return h=255&S.rgba,p(S,h*y/255)},a.toColorRGB=function(S){return[S.rgba>>24&255,S.rgba>>16&255,S.rgba>>8&255]}}(E||(i.color=E={})),function(a){let p,S;try{const y=document.createElement("canvas");y.width=1,y.height=1;const L=y.getContext("2d",{willReadFrequently:!0});L&&(p=L,p.globalCompositeOperation="copy",S=p.createLinearGradient(0,0,1,1))}catch{}a.toColor=function(y){if(y.match(/#[\da-f]{3,8}/i))switch(y.length){case 4:return c=parseInt(y.slice(1,2).repeat(2),16),u=parseInt(y.slice(2,3).repeat(2),16),v=parseInt(y.slice(3,4).repeat(2),16),_.toColor(c,u,v);case 5:return c=parseInt(y.slice(1,2).repeat(2),16),u=parseInt(y.slice(2,3).repeat(2),16),v=parseInt(y.slice(3,4).repeat(2),16),h=parseInt(y.slice(4,5).repeat(2),16),_.toColor(c,u,v,h);case 7:return{css:y,rgba:(parseInt(y.slice(1),16)<<8|255)>>>0};case 9:return{css:y,rgba:parseInt(y.slice(1),16)>>>0}}const L=y.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(L)return c=parseInt(L[1]),u=parseInt(L[2]),v=parseInt(L[3]),h=Math.round(255*(L[5]===void 0?1:parseFloat(L[5]))),_.toColor(c,u,v,h);if(!p||!S)throw new Error("css.toColor: Unsupported css format");if(p.fillStyle=S,p.fillStyle=y,typeof p.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(p.fillRect(0,0,1,1),[c,u,v,h]=p.getImageData(0,0,1,1).data,h!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:_.toRgba(c,u,v,h),css:y}}}(C||(i.css=C={})),function(a){function p(S,y,L){const g=S/255,w=y/255,b=L/255;return .2126*(g<=.03928?g/12.92:Math.pow((g+.055)/1.055,2.4))+.7152*(w<=.03928?w/12.92:Math.pow((w+.055)/1.055,2.4))+.0722*(b<=.03928?b/12.92:Math.pow((b+.055)/1.055,2.4))}a.relativeLuminance=function(S){return p(S>>16&255,S>>8&255,255&S)},a.relativeLuminance2=p}(f||(i.rgb=f={})),function(a){function p(y,L,g){const w=y>>24&255,b=y>>16&255,M=y>>8&255;let R=L>>24&255,T=L>>16&255,B=L>>8&255,F=o(f.relativeLuminance2(R,T,B),f.relativeLuminance2(w,b,M));for(;F<g&&(R>0||T>0||B>0);)R-=Math.max(0,Math.ceil(.1*R)),T-=Math.max(0,Math.ceil(.1*T)),B-=Math.max(0,Math.ceil(.1*B)),F=o(f.relativeLuminance2(R,T,B),f.relativeLuminance2(w,b,M));return(R<<24|T<<16|B<<8|255)>>>0}function S(y,L,g){const w=y>>24&255,b=y>>16&255,M=y>>8&255;let R=L>>24&255,T=L>>16&255,B=L>>8&255,F=o(f.relativeLuminance2(R,T,B),f.relativeLuminance2(w,b,M));for(;F<g&&(R<255||T<255||B<255);)R=Math.min(255,R+Math.ceil(.1*(255-R))),T=Math.min(255,T+Math.ceil(.1*(255-T))),B=Math.min(255,B+Math.ceil(.1*(255-B))),F=o(f.relativeLuminance2(R,T,B),f.relativeLuminance2(w,b,M));return(R<<24|T<<16|B<<8|255)>>>0}a.blend=function(y,L){if(h=(255&L)/255,h===1)return L;const g=L>>24&255,w=L>>16&255,b=L>>8&255,M=y>>24&255,R=y>>16&255,T=y>>8&255;return c=M+Math.round((g-M)*h),u=R+Math.round((w-R)*h),v=T+Math.round((b-T)*h),_.toRgba(c,u,v)},a.ensureContrastRatio=function(y,L,g){const w=f.relativeLuminance(y>>8),b=f.relativeLuminance(L>>8);if(o(w,b)<g){if(b<w){const T=p(y,L,g),B=o(w,f.relativeLuminance(T>>8));if(B<g){const F=S(y,L,g);return B>o(w,f.relativeLuminance(F>>8))?T:F}return T}const M=S(y,L,g),R=o(w,f.relativeLuminance(M>>8));if(R<g){const T=p(y,L,g);return R>o(w,f.relativeLuminance(T>>8))?M:T}return M}},a.reduceLuminance=p,a.increaseLuminance=S,a.toChannels=function(y){return[y>>24&255,y>>16&255,y>>8&255,255&y]}}(s||(i.rgba=s={})),i.toPaddedHex=l,i.contrastRatio=o},345:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.runAndSubscribe=i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=c=>(this._listeners.push(c),{dispose:()=>{if(!this._disposed){for(let u=0;u<this._listeners.length;u++)if(this._listeners[u]===c)return void this._listeners.splice(u,1)}}})),this._event}fire(c,u){const v=[];for(let h=0;h<this._listeners.length;h++)v.push(this._listeners[h]);for(let h=0;h<v.length;h++)v[h].call(void 0,c,u)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},i.forwardEvent=function(c,u){return c(v=>u.fire(v))},i.runAndSubscribe=function(c,u){return u(void 0),c(v=>u(v))}},859:(x,i)=>{function c(u){for(const v of u)v.dispose();u.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.MutableDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const u of this._disposables)u.dispose();this._disposables.length=0}register(u){return this._disposables.push(u),u}unregister(u){const v=this._disposables.indexOf(u);v!==-1&&this._disposables.splice(v,1)}},i.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(u){var v;this._isDisposed||u===this._value||((v=this._value)==null||v.dispose(),this._value=u)}clear(){this.value=void 0}dispose(){var u;this._isDisposed=!0,(u=this._value)==null||u.dispose(),this._value=void 0}},i.toDisposable=function(u){return{dispose:u}},i.disposeArray=c,i.getDisposeArrayDisposable=function(u){return{dispose:()=>c(u)}}},485:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class c{constructor(){this._data={}}set(v,h,_){this._data[v]||(this._data[v]={}),this._data[v][h]=_}get(v,h){return this._data[v]?this._data[v][h]:void 0}clear(){this._data={}}}i.TwoKeyMap=c,i.FourKeyMap=class{constructor(){this._data=new c}set(u,v,h,_,E){this._data.get(u,v)||this._data.set(u,v,new c),this._data.get(u,v).set(h,_,E)}get(u,v,h,_){var E;return(E=this._data.get(u,v))==null?void 0:E.get(h,_)}clear(){this._data.clear()}}},399:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof process<"u"&&"title"in process;const c=i.isNode?"node":navigator.userAgent,u=i.isNode?"node":navigator.platform;i.isFirefox=c.includes("Firefox"),i.isLegacyEdge=c.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(c),i.getSafariVersion=function(){if(!i.isSafari)return 0;const v=c.match(/Version\/(\d+)/);return v===null||v.length<2?0:parseInt(v[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(u),i.isIpad=u==="iPad",i.isIphone=u==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(u),i.isLinux=u.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(c)},385:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;const u=c(399);class v{constructor(){this._tasks=[],this._i=0}enqueue(E){this._tasks.push(E),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(E){this._idleCallback=void 0;let C=0,f=0,s=E.timeRemaining(),l=0;for(;this._i<this._tasks.length;){if(C=Date.now(),this._tasks[this._i]()||this._i++,C=Math.max(1,Date.now()-C),f=Math.max(C,f),l=E.timeRemaining(),1.5*f>l)return s-C<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(s-C))}ms`),void this._start();s=l}this.clear()}}class h extends v{_requestCallback(E){return setTimeout(()=>E(this._createDeadline(16)))}_cancelCallback(E){clearTimeout(E)}_createDeadline(E){const C=Date.now()+E;return{timeRemaining:()=>Math.max(0,C-Date.now())}}}i.PriorityTaskQueue=h,i.IdleTaskQueue=!u.isNode&&"requestIdleCallback"in window?class extends v{_requestCallback(_){return requestIdleCallback(_)}_cancelCallback(_){cancelIdleCallback(_)}}:h,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(_){this._queue.clear(),this._queue.enqueue(_)}flush(){this._queue.flush()}}},147:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class c{constructor(){this.fg=0,this.bg=0,this.extended=new u}static toColorRGB(h){return[h>>>16&255,h>>>8&255,255&h]}static fromColorRGB(h){return(255&h[0])<<16|(255&h[1])<<8|255&h[2]}clone(){const h=new c;return h.fg=this.fg,h.bg=this.bg,h.extended=this.extended.clone(),h}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}i.AttributeData=c;class u{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(h){this._ext=h}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(h){this._ext&=-469762049,this._ext|=h<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(h){this._ext&=-67108864,this._ext|=67108863&h}get urlId(){return this._urlId}set urlId(h){this._urlId=h}get underlineVariantOffset(){const h=(3758096384&this._ext)>>29;return h<0?4294967288^h:h}set underlineVariantOffset(h){this._ext&=536870911,this._ext|=h<<29&3758096384}constructor(h=0,_=0){this._ext=0,this._urlId=0,this._ext=h,this._urlId=_}clone(){return new u(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=u},782:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;const u=c(133),v=c(855),h=c(147);class _ extends h.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new h.ExtendedAttrs,this.combinedData=""}static fromCharData(C){const f=new _;return f.setFromCharData(C),f}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,u.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(C){this.fg=C[v.CHAR_DATA_ATTR_INDEX],this.bg=0;let f=!1;if(C[v.CHAR_DATA_CHAR_INDEX].length>2)f=!0;else if(C[v.CHAR_DATA_CHAR_INDEX].length===2){const s=C[v.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=s&&s<=56319){const l=C[v.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=l&&l<=57343?this.content=1024*(s-55296)+l-56320+65536|C[v.CHAR_DATA_WIDTH_INDEX]<<22:f=!0}else f=!0}else this.content=C[v.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|C[v.CHAR_DATA_WIDTH_INDEX]<<22;f&&(this.combinedData=C[v.CHAR_DATA_CHAR_INDEX],this.content=2097152|C[v.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=_},855:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},133:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(c){return c>65535?(c-=65536,String.fromCharCode(55296+(c>>10))+String.fromCharCode(c%1024+56320)):String.fromCharCode(c)},i.utf32ToString=function(c,u=0,v=c.length){let h="";for(let _=u;_<v;++_){let E=c[_];E>65535?(E-=65536,h+=String.fromCharCode(55296+(E>>10))+String.fromCharCode(E%1024+56320)):h+=String.fromCharCode(E)}return h},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(c,u){const v=c.length;if(!v)return 0;let h=0,_=0;if(this._interim){const E=c.charCodeAt(_++);56320<=E&&E<=57343?u[h++]=1024*(this._interim-55296)+E-56320+65536:(u[h++]=this._interim,u[h++]=E),this._interim=0}for(let E=_;E<v;++E){const C=c.charCodeAt(E);if(55296<=C&&C<=56319){if(++E>=v)return this._interim=C,h;const f=c.charCodeAt(E);56320<=f&&f<=57343?u[h++]=1024*(C-55296)+f-56320+65536:(u[h++]=C,u[h++]=f)}else C!==65279&&(u[h++]=C)}return h}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(c,u){const v=c.length;if(!v)return 0;let h,_,E,C,f=0,s=0,l=0;if(this.interim[0]){let p=!1,S=this.interim[0];S&=(224&S)==192?31:(240&S)==224?15:7;let y,L=0;for(;(y=63&this.interim[++L])&&L<4;)S<<=6,S|=y;const g=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,w=g-L;for(;l<w;){if(l>=v)return 0;if(y=c[l++],(192&y)!=128){l--,p=!0;break}this.interim[L++]=y,S<<=6,S|=63&y}p||(g===2?S<128?l--:u[f++]=S:g===3?S<2048||S>=55296&&S<=57343||S===65279||(u[f++]=S):S<65536||S>1114111||(u[f++]=S)),this.interim.fill(0)}const o=v-4;let a=l;for(;a<v;){for(;!(!(a<o)||128&(h=c[a])||128&(_=c[a+1])||128&(E=c[a+2])||128&(C=c[a+3]));)u[f++]=h,u[f++]=_,u[f++]=E,u[f++]=C,a+=4;if(h=c[a++],h<128)u[f++]=h;else if((224&h)==192){if(a>=v)return this.interim[0]=h,f;if(_=c[a++],(192&_)!=128){a--;continue}if(s=(31&h)<<6|63&_,s<128){a--;continue}u[f++]=s}else if((240&h)==224){if(a>=v)return this.interim[0]=h,f;if(_=c[a++],(192&_)!=128){a--;continue}if(a>=v)return this.interim[0]=h,this.interim[1]=_,f;if(E=c[a++],(192&E)!=128){a--;continue}if(s=(15&h)<<12|(63&_)<<6|63&E,s<2048||s>=55296&&s<=57343||s===65279)continue;u[f++]=s}else if((248&h)==240){if(a>=v)return this.interim[0]=h,f;if(_=c[a++],(192&_)!=128){a--;continue}if(a>=v)return this.interim[0]=h,this.interim[1]=_,f;if(E=c[a++],(192&E)!=128){a--;continue}if(a>=v)return this.interim[0]=h,this.interim[1]=_,this.interim[2]=E,f;if(C=c[a++],(192&C)!=128){a--;continue}if(s=(7&h)<<18|(63&_)<<12|(63&E)<<6|63&C,s<65536||s>1114111)continue;u[f++]=s}}return f}}},776:function(x,i,c){var u=this&&this.__decorate||function(s,l,o,a){var p,S=arguments.length,y=S<3?l:a===null?a=Object.getOwnPropertyDescriptor(l,o):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(s,l,o,a);else for(var L=s.length-1;L>=0;L--)(p=s[L])&&(y=(S<3?p(y):S>3?p(l,o,y):p(l,o))||y);return S>3&&y&&Object.defineProperty(l,o,y),y},v=this&&this.__param||function(s,l){return function(o,a){l(o,a,s)}};Object.defineProperty(i,"__esModule",{value:!0}),i.traceCall=i.setTraceLogger=i.LogService=void 0;const h=c(859),_=c(97),E={trace:_.LogLevelEnum.TRACE,debug:_.LogLevelEnum.DEBUG,info:_.LogLevelEnum.INFO,warn:_.LogLevelEnum.WARN,error:_.LogLevelEnum.ERROR,off:_.LogLevelEnum.OFF};let C,f=i.LogService=class extends h.Disposable{get logLevel(){return this._logLevel}constructor(s){super(),this._optionsService=s,this._logLevel=_.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),C=this}_updateLogLevel(){this._logLevel=E[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(s){for(let l=0;l<s.length;l++)typeof s[l]=="function"&&(s[l]=s[l]())}_log(s,l,o){this._evalLazyOptionalParams(o),s.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+l,...o)}trace(s,...l){var o;this._logLevel<=_.LogLevelEnum.TRACE&&this._log(((o=this._optionsService.options.logger)==null?void 0:o.trace.bind(this._optionsService.options.logger))??console.log,s,l)}debug(s,...l){var o;this._logLevel<=_.LogLevelEnum.DEBUG&&this._log(((o=this._optionsService.options.logger)==null?void 0:o.debug.bind(this._optionsService.options.logger))??console.log,s,l)}info(s,...l){var o;this._logLevel<=_.LogLevelEnum.INFO&&this._log(((o=this._optionsService.options.logger)==null?void 0:o.info.bind(this._optionsService.options.logger))??console.info,s,l)}warn(s,...l){var o;this._logLevel<=_.LogLevelEnum.WARN&&this._log(((o=this._optionsService.options.logger)==null?void 0:o.warn.bind(this._optionsService.options.logger))??console.warn,s,l)}error(s,...l){var o;this._logLevel<=_.LogLevelEnum.ERROR&&this._log(((o=this._optionsService.options.logger)==null?void 0:o.error.bind(this._optionsService.options.logger))??console.error,s,l)}};i.LogService=f=u([v(0,_.IOptionsService)],f),i.setTraceLogger=function(s){C=s},i.traceCall=function(s,l,o){if(typeof o.value!="function")throw new Error("not supported");const a=o.value;o.value=function(...p){if(C.logLevel!==_.LogLevelEnum.TRACE)return a.apply(this,p);C.trace(`GlyphRenderer#${a.name}(${p.map(y=>JSON.stringify(y)).join(", ")})`);const S=a.apply(this,p);return C.trace(`GlyphRenderer#${a.name} return`,S),S}}},726:(x,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0;const c="di$target",u="di$dependencies";i.serviceRegistry=new Map,i.getServiceDependencies=function(v){return v[u]||[]},i.createDecorator=function(v){if(i.serviceRegistry.has(v))return i.serviceRegistry.get(v);const h=function(_,E,C){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(f,s,l){s[c]===s?s[u].push({id:f,index:l}):(s[u]=[{id:f,index:l}],s[c]=s)})(h,_,C)};return h.toString=()=>v,i.serviceRegistry.set(v,h),h}},97:(x,i,c)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;const u=c(726);var v;i.IBufferService=(0,u.createDecorator)("BufferService"),i.ICoreMouseService=(0,u.createDecorator)("CoreMouseService"),i.ICoreService=(0,u.createDecorator)("CoreService"),i.ICharsetService=(0,u.createDecorator)("CharsetService"),i.IInstantiationService=(0,u.createDecorator)("InstantiationService"),function(h){h[h.TRACE=0]="TRACE",h[h.DEBUG=1]="DEBUG",h[h.INFO=2]="INFO",h[h.WARN=3]="WARN",h[h.ERROR=4]="ERROR",h[h.OFF=5]="OFF"}(v||(i.LogLevelEnum=v={})),i.ILogService=(0,u.createDecorator)("LogService"),i.IOptionsService=(0,u.createDecorator)("OptionsService"),i.IOscLinkService=(0,u.createDecorator)("OscLinkService"),i.IUnicodeService=(0,u.createDecorator)("UnicodeService"),i.IDecorationService=(0,u.createDecorator)("DecorationService")}},n={};function d(x){var i=n[x];if(i!==void 0)return i.exports;var c=n[x]={exports:{}};return r[x].call(c.exports,c,c.exports,d),c.exports}var m={};return(()=>{var x=m;Object.defineProperty(x,"__esModule",{value:!0}),x.WebglAddon=void 0;const i=d(345),c=d(859),u=d(399),v=d(666),h=d(776);class _ extends c.Disposable{constructor(C){if(u.isSafari&&(0,u.getSafariVersion)()<16){const f={antialias:!1,depth:!1,preserveDrawingBuffer:!0};if(!document.createElement("canvas").getContext("webgl2",f))throw new Error("Webgl2 is only supported on Safari 16 and above")}super(),this._preserveDrawingBuffer=C,this._onChangeTextureAtlas=this.register(new i.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new i.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new i.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onContextLoss=this.register(new i.EventEmitter),this.onContextLoss=this._onContextLoss.event}activate(C){const f=C._core;if(!C.element)return void this.register(f.onWillOpen(()=>this.activate(C)));this._terminal=C;const s=f.coreService,l=f.optionsService,o=f,a=o._renderService,p=o._characterJoinerService,S=o._charSizeService,y=o._coreBrowserService,L=o._decorationService,g=o._logService,w=o._themeService;(0,h.setTraceLogger)(g),this._renderer=this.register(new v.WebglRenderer(C,p,S,y,s,L,l,w,this._preserveDrawingBuffer)),this.register((0,i.forwardEvent)(this._renderer.onContextLoss,this._onContextLoss)),this.register((0,i.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this.register((0,i.forwardEvent)(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),this.register((0,i.forwardEvent)(this._renderer.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)),a.setRenderer(this._renderer),this.register((0,c.toDisposable)(()=>{const b=this._terminal._core._renderService;b.setRenderer(this._terminal._core._createRenderer()),b.handleResize(C.cols,C.rows)}))}get textureAtlas(){var C;return(C=this._renderer)==null?void 0:C.textureAtlas}clearTextureAtlas(){var C;(C=this._renderer)==null||C.clearTextureAtlas()}}x.WebglAddon=_})(),m})())})(zh);var xf=zh.exports;function Lf(e,t,r){let n="Reconnecting",d=(r==null?void 0:r.from)??0,m=null,x=null,i=0,c=!1;const u=C=>{var f;n=C,(f=r==null?void 0:r.onState)==null||f.call(r,n)};async function v(){try{return await ke.getSession(e),!0}catch{return!1}}function h(){u("Polling");const C=async()=>{var f;try{if(!await v()){u("Closed"),(f=r==null?void 0:r.onGone)==null||f.call(r),_();return}const{frames:l}=await ke.scrollback(e,d);for(const o of l)d=o.seq,t(o)}catch{}};x=setInterval(C,500),C()}function _(){x&&(clearInterval(x),x=null)}function E(){u("Reconnecting"),c=!1,i=Date.now(),m=new WebSocket(yf(`/api/sessions/${e}/stream?from=${d}`)),setTimeout(()=>{c||h()},1500),m.onopen=()=>{u("Live"),_()},m.onmessage=C=>{const f=JSON.parse(String(C.data));c||(c=!0),f.seq>d&&(d=f.seq,t(f))},m.onclose=C=>{var f;if(_(),C.code===1008||String(C.reason).includes("no such session")){u("Closed"),(f=r==null?void 0:r.onGone)==null||f.call(r);return}u("Reconnecting"),setTimeout(E,Math.min(5e3,Date.now()-i<200?1e3:2e3))},m.onerror=()=>{u("Reconnecting");try{m==null||m.close()}catch{}h()}}return E(),{get state(){return n},get lastSeq(){return d},send:C=>{const f=JSON.stringify(C);m&&m.readyState===WebSocket.OPEN?m.send(f):ke.input(e,C).catch(()=>{})},close:()=>{try{m==null||m.close()}catch{}_()}}}function bf({session:e,project:t,onClose:r,sync:n,onBroadcast:d}){var H;const m=oe.useRef(null),x=oe.useRef(null),i=oe.useRef(null),c=oe.useRef(null),[u,v]=oe.useState("Reconnecting"),[h,_]=oe.useState(e.status),[E,C]=oe.useState(0),f=oe.useRef(0),s=oe.useRef(null),l=(t==null?void 0:t.id)||e.projectId,o=oe.useMemo(()=>I=>`mt.${l}.${I}`,[l]),[a,p]=oe.useState(()=>{const I=localStorage.getItem(o("fontSize"))||localStorage.getItem("mt.fontSize.default"),k=I?Number(I):NaN;return Number.isFinite(k)?k:13}),[S,y]=oe.useState(()=>{const I=localStorage.getItem(o("termHeight")),k=I?Number(I):NaN;return Number.isFinite(k)?k:320}),[L,g]=oe.useState(()=>{const I=localStorage.getItem(o("span")),k=I?Number(I):NaN;return Number.isFinite(k)?Math.min(12,Math.max(3,k)):4});oe.useEffect(()=>{const I=document.documentElement.classList.contains("dark"),k=new wf.Terminal({convertEol:!0,fontFamily:"Menlo, Monaco, Consolas, ui-monospace, monospace",scrollback:5e3,fontSize:a,theme:I?{background:"#0b1220",foreground:"#e5e7eb",cursor:"#22d3ee",selection:"#1f2937"}:void 0}),A=new Ef.FitAddon;k.loadAddon(A);try{k.loadAddon(new xf.WebglAddon)}catch{}i.current=k,c.current=A,x.current&&k.open(x.current),setTimeout(()=>A.fit(),50);const P={id:null},O=()=>{P.id===null&&(P.id=window.setTimeout(()=>{P.id=null;try{A.fit();const K=k.cols,Y=k.rows;ke.resize(e.id,K,Y).catch(()=>{})}catch{}},60))};function $(K){const Y=atob(K.dataBase64),D=new Uint8Array(Y.length);for(let z=0;z<Y.length;z++)D[z]=Y.charCodeAt(z);const N=new TextDecoder("utf-8",{fatal:!1}).decode(D);k.write(N),h!=="running"&&_("running")}let W=!0;ke.scrollback(e.id,0).then(({to:K,frames:Y})=>{if(!W)return;for(const N of Y)$(N);const D=Lf(e.id,$,{from:K,onState:v,onGone:()=>_("exited")});s.current=D}).catch(()=>{v("Closed"),_("exited")});const j=new ResizeObserver(()=>{if(O(),x.current){const K=x.current.clientHeight;if(Math.abs(K-S)>2){y(K);try{localStorage.setItem(o("termHeight"),String(K))}catch{}}}});return x.current&&j.observe(x.current),k.onData(K=>{var z;const D=new TextEncoder().encode(K),N=32*1024;for(let U=0;U<D.length;U+=N){const J=D.slice(U,U+N),q={sessionId:e.id,seq:++f.current,dataBase64:btoa(String.fromCharCode(...J))};(z=s.current)==null||z.send(q),n&&d(e.id,J)}}),()=>{var K;W=!1,(K=s.current)==null||K.close(),k.dispose()}},[e.id]),oe.useEffect(()=>{_(e.status)},[e.status]),oe.useEffect(()=>{i.current&&c.current&&setTimeout(()=>{try{c.current.fit(),ke.resize(e.id,i.current.cols,i.current.rows).catch(()=>{})}catch{}},10)},[L]);const w=u==="Live"?"live":u==="Polling"?"polling":u==="Closed"?"closed":"reconnecting",b=(H=e.command)!=null&&H[0]?e.command[0]:"shell",M=`${(t==null?void 0:t.name)||e.cwd.split("/").pop()}  ${b}  pid ${e.pid??""}`;function R(I){const k=Math.min(20,Math.max(10,a+I));p(k);try{localStorage.setItem(o("fontSize"),String(k))}catch{}i.current&&c.current&&(i.current.options.fontSize=k,setTimeout(()=>{c.current.fit(),ke.resize(e.id,i.current.cols,i.current.rows).catch(()=>{})},10))}function T(I){const k=Math.min(12,Math.max(3,L+I));g(k);try{localStorage.setItem(o("span"),String(k))}catch{}}function B(I){I.preventDefault();const k=m.current,A=k.parentElement,P=I.clientX,O=k.getBoundingClientRect().width,$=A.getBoundingClientRect().width,W=$/12;function j(Y){const D=Y.clientX-P,N=Math.max(W*3,Math.min($,O+D)),z=Math.max(3,Math.min(12,Math.round(N/W)));if(z!==L){g(z);try{localStorage.setItem(o("span"),String(z))}catch{}}}function K(){window.removeEventListener("pointermove",j),window.removeEventListener("pointerup",K)}window.addEventListener("pointermove",j),window.addEventListener("pointerup",K)}function F(I){I.preventDefault();const k=I.clientY,A=S;function P($){const W=$.clientY-k,j=Math.max(180,Math.min(window.innerHeight-160,A+W));y(j);try{localStorage.setItem(o("termHeight"),String(j))}catch{}if(i.current&&c.current)try{c.current.fit(),ke.resize(e.id,i.current.cols,i.current.rows).catch(()=>{})}catch{}}function O(){window.removeEventListener("pointermove",P),window.removeEventListener("pointerup",O)}window.addEventListener("pointermove",P),window.addEventListener("pointerup",O)}return Q.jsxs("div",{className:"tile",ref:m,style:{gridColumn:`span ${L} / span ${L}`},children:[Q.jsxs("div",{className:"tile-h",children:[Q.jsx("strong",{style:{marginRight:8},children:M}),Q.jsxs("span",{children:[" ",h,e.exitCode!==void 0?` (${e.exitCode})`:""]}),Q.jsxs("div",{style:{marginLeft:"auto",display:"flex",gap:6,alignItems:"center"},children:[Q.jsx("button",{className:"btn",title:"Narrower",onClick:()=>T(-1),children:""}),Q.jsx("button",{className:"btn",title:"Wider",onClick:()=>T(1),children:"+"}),Q.jsx("button",{className:"btn",title:"Font smaller",onClick:()=>R(-1),children:"A"}),Q.jsx("button",{className:"btn",title:"Font larger",onClick:()=>R(1),children:"A+"}),Q.jsx("button",{className:"btn",onClick:()=>{ke.deleteSession(e.id).then(()=>r(e.id))},children:"Close"})]})]}),Q.jsx("div",{className:"term",ref:x,style:{height:S,flex:"unset"}}),Q.jsx("div",{className:"resize-handle r",onPointerDown:B}),Q.jsx("div",{className:"resize-handle b",onPointerDown:F}),Q.jsx("div",{className:"resize-handle br",onPointerDown:I=>{B(I),F(I)}}),Q.jsxs("div",{className:"tile-f",children:[Q.jsxs("span",{children:[Q.jsx("span",{className:`status-dot ${w}`})," ",u]}),Q.jsxs("span",{children:["Scrollback  5000  PTY: ",e.pty?"yes":"no"]})]})]})}function kf({project:e,projects:t,sessions:r,setSessions:n,sync:d,onBroadcast:m}){const x=oe.useMemo(()=>new Map(t.map(i=>[i.id,i])),[t]);return Q.jsx("div",{children:Q.jsx("div",{className:"grid",children:r.map(i=>{const c=x.get(i.projectId);return Q.jsx(bf,{session:i,project:c||null,sync:d,onBroadcast:m,onClose:u=>n(v=>v.filter(h=>h.id!==u))},i.id)})})})}function Rf(){const[e,t]=oe.useState([]),[r,n]=oe.useState(null),[d,m]=oe.useState(!1),[x,i]=oe.useState([]),[c,u]=oe.useState(()=>localStorage.getItem("mt.theme")||"dark"),[v,h]=oe.useState(()=>localStorage.getItem("mt.sync")==="1"),_=oe.useState(new Map)[0];oe.useEffect(()=>{async function o(){try{let p=await ke.listProjects();try{const L=JSON.parse(localStorage.getItem("mt.cwds")||"[]"),g=new Set(p.map(b=>b.cwd)),w=[];for(const b of L)if(!g.has(b))try{w.push(await ke.importProject(b))}catch{}w.length&&(p=[...p,...w])}catch{}const y=[...new Map(p.map(L=>[L.id,L])).values()];t(y),!r&&y.length&&n(y[0].id)}catch{}}o();const a=localStorage.getItem("mt.selectedProjectId");a&&n(a),ke.listSessions().then(i).catch(()=>{})},[]),oe.useEffect(()=>{const o=setInterval(()=>{ke.listSessions().then(a=>{i(p=>{const S=new Map(p.map(y=>[y.id,y]));for(const y of a)S.set(y.id,{...S.get(y.id)||y,...y});return[...S.values()].sort((y,L)=>y.createdAt<L.createdAt?1:-1)})}).catch(()=>{})},2e3);return()=>clearInterval(o)},[]),oe.useEffect(()=>{const o=document.documentElement;c==="dark"?o.classList.add("dark"):o.classList.remove("dark"),localStorage.setItem("mt.theme",c)},[c]);function E(o){n(o),localStorage.setItem("mt.selectedProjectId",o)}const C=oe.useMemo(()=>e.find(o=>o.id===r)||null,[e,r]);async function f(){const o=await ke.createSession({projectId:C==null?void 0:C.id,cwd:C==null?void 0:C.cwd});i(a=>[o,...a].slice(0,12))}async function s(){const o=await ke.createSession({projectId:C==null?void 0:C.id,cwd:C==null?void 0:C.cwd,command:["codex"]});i(a=>[o,...a].slice(0,12))}async function l(o,a){if(!v)return;const p=x.filter(y=>y.id!==o),S=btoa(String.fromCharCode(...a));await Promise.all(p.map(y=>{const L=(_.get(y.id)||0)+1;return _.set(y.id,L),ke.input(y.id,{sessionId:y.id,seq:L,dataBase64:S})})).catch(()=>{})}return Q.jsxs("div",{children:[Q.jsxs("div",{className:"header",children:[Q.jsxs("div",{className:"left",children:[Q.jsx("strong",{children:"Agents Terminal"}),Q.jsxs("select",{value:r??"",onChange:o=>E(o.target.value),children:[Q.jsx("option",{value:"",children:"Select project"}),e.map(o=>Q.jsx("option",{value:o.id,children:o.name},o.id))]}),Q.jsx("button",{className:"btn",onClick:()=>m(o=>!o),children:"Projects"})]}),Q.jsxs("div",{className:"right",children:[Q.jsx("button",{className:"btn",onClick:s,children:"Spawn"}),Q.jsx("button",{className:"btn",onClick:f,children:"New Terminal"}),Q.jsxs("button",{className:"btn",onClick:()=>{const o=!v;h(o),localStorage.setItem("mt.sync",o?"1":"0")},children:["Sync: ",v?"On":"Off"]}),Q.jsx("button",{className:"btn",onClick:()=>u(c==="dark"?"light":"dark"),children:c==="dark"?"":""})]})]}),d&&Q.jsx("div",{style:{padding:8,borderBottom:"1px solid #eee"},children:Q.jsx(Cf,{onOpen:o=>{m(!1),E(o.id),t(a=>[...a.filter(p=>p.id!==o.id),o])}})}),Q.jsx(kf,{project:C,projects:e,sessions:x,setSessions:i,sync:v,onBroadcast:l})]})}bn.createRoot(document.getElementById("root")).render(Q.jsx(lu.StrictMode,{children:Q.jsx(Rf,{})}));
